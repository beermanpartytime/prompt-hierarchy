<!DOCTYPE html>
<html style="--doc-height: 730px; --SmartThemeBodyColor: rgba(220, 220, 210, 1); --SmartThemeCheckboxBgColorR: 220; --SmartThemeCheckboxBgColorG: 220; --SmartThemeCheckboxBgColorB: 210; --SmartThemeCheckboxBgColorA: 1; --SmartThemeEmColor: rgba(145, 145, 145, 1); --SmartThemeUnderlineColor: rgba(188, 231, 207, 1); --SmartThemeQuoteColor: rgba(225, 138, 36, 1); --SmartThemeBlurTintColor: rgba(23, 23, 23, 1); --SmartThemeChatTintColor: rgba(23, 23, 23, 1); --SmartThemeUserMesBlurTintColor: rgba(30, 30, 30, 0.9); --SmartThemeBotMesBlurTintColor: rgba(30, 30, 30, 0.9); --SmartThemeShadowColor: rgba(0, 0, 0, 1); --SmartThemeBorderColor: rgba(0, 0, 0, 0.5); --animation-duration: 125ms; --fontScale: 1; --sheldWidth: 50vw; --blurStrength: 10; --shadowWidth: 2;" data-lt-installed="true"><head>
    <title>SillyTavern</title>
    <base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="darkreader-lock">
    <meta name="robots" content="noindex, nofollow">
    <style>
        /* Put critical CSS here. The rest should go in stylesheets. */
        body {
            background-color: rgb(36, 36, 37);
        }
    </style>
    <link rel="preload" as="style" href="style.css">
    <link rel="manifest" crossorigin="use-credentials" href="manifest.json">
    <link href="webfonts/NotoSans/stylesheet.css" rel="stylesheet">
    <link href="webfonts/NotoSansMono/stylesheet.css" rel="stylesheet">
    <link href="css/fontawesome.min.css" rel="stylesheet">
    <link href="css/solid.min.css" rel="stylesheet">
    <link href="css/brands.min.css" rel="stylesheet">
    <link href="css/jquery-ui.min.css" rel="stylesheet">
    <link href="css/bright.min.css" rel="stylesheet">
    <link href="css/cropper.min.css" rel="stylesheet">
    <link href="css/toastr.min.css" rel="stylesheet">
    <link href="css/select2.min.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="57x57" href="img/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/apple-icon-144x144.png">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="css/st-tailwind.css">
    <link rel="stylesheet" type="text/css" href="css/rm-groups.css">
    <link rel="stylesheet" type="text/css" href="css/group-avatars.css">
    <link rel="stylesheet" type="text/css" href="css/toggle-dependent.css">
    <link rel="stylesheet" type="text/css" href="css/world-info.css">
    <link rel="stylesheet" type="text/css" href="css/extensions-panel.css">
    <link rel="stylesheet" type="text/css" href="css/select2-overrides.css">
    <link rel="stylesheet" type="text/css" href="css/mobile-styles.css">
    <link rel="stylesheet" type="text/css" href="css/user.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <!-- Scripts are loaded at the end of the body to improve page load speed -->
<style type="text/css">img[onload^="SVGInject("]{visibility:hidden;}</style><style type="text/css" id="custom-style"></style><link id="translate" rel="stylesheet" type="text/css" href="/scripts/extensions/translate/style.css"><link id="connection-manager" rel="stylesheet" type="text/css" href="/scripts/extensions/connection-manager/style.css"><link id="regex" rel="stylesheet" type="text/css" href="/scripts/extensions/regex/style.css"><link id="attachments" rel="stylesheet" type="text/css" href="/scripts/extensions/attachments/style.css"><link id="caption" rel="stylesheet" type="text/css" href="/scripts/extensions/caption/style.css"><link id="expressions" rel="stylesheet" type="text/css" href="/scripts/extensions/expressions/style.css"><link id="gallery" rel="stylesheet" type="text/css" href="/scripts/extensions/gallery/style.css"><link id="memory" rel="stylesheet" type="text/css" href="/scripts/extensions/memory/style.css"><link id="stable-diffusion" rel="stylesheet" type="text/css" href="/scripts/extensions/stable-diffusion/style.css"><link id="tts" rel="stylesheet" type="text/css" href="/scripts/extensions/tts/style.css"><link id="quick-reply" rel="stylesheet" type="text/css" href="/scripts/extensions/quick-reply/style.css"><link id="assets" rel="stylesheet" type="text/css" href="/scripts/extensions/assets/style.css"><link id="token-counter" rel="stylesheet" type="text/css" href="/scripts/extensions/token-counter/style.css"><link id="prompt-hierarchy" rel="stylesheet" type="text/css" href="/scripts/extensions/prompt-hierarchy/styles/main.css"><link id="vectors" rel="stylesheet" type="text/css" href="/scripts/extensions/vectors/style.css"><style id="dynamic-styles"></style><style id="dynamic-extension-styles"></style></head>

<body class="no-blur drop_target no_animation noShadows no-timer no-mesIDDisplay no-tokenCount translate caption tts sd" data-stscript-style="theme" style="--ac-font-scale: 0.8;">
    
    <div id="bg_custom"></div>
    <div id="bg1" style="background-image: url(&quot;backgrounds/__transparent.png&quot;);"></div>
    <div id="character_context_menu" class="hidden">
        <ul>
            <li><button id="character_context_menu_favorite" data-i18n="Favorite">Favorite</button></li>
            <li><button id="character_context_menu_tag" data-i18n="Tag">Tag</button></li>
            <li><button id="character_context_menu_duplicate" data-i18n="Duplicate">Duplicate</button></li>
            <li><button id="character_context_menu_persona" data-i18n="Persona">Persona</button></li>
            <li><button id="character_context_menu_delete" data-i18n="Delete">Delete</button></li>
        </ul>
    </div>
    <!-- top bar central settings buttons -->
    <div id="top-bar">
    </div>
    <div id="top-settings-holder">
        <!-- background selection menu -->
        <div id="ai-config-button" class="drawer">
            <div class="drawer-toggle drawer-header">
                <div id="leftNavDrawerIcon" class="drawer-icon fa-solid fa-sliders fa-fw interactable drawerPinnedOpen openIcon" title="AI Response Configuration" data-i18n="[title]AI Response Configuration" tabindex="0"></div>
            </div>
            <div id="left-nav-panel" class="drawer-content fillLeft pinnedOpen openDrawer" data-slide-toggle="shown" style="display: block;">
                <div id="left-nav-panelheader" class="fa-solid fa-grip drag-grabber"></div>
                <div id="lm_button_panel_pin_div" title="Locked = AI Configuration panel will stay open" data-i18n="[title]AI Configuration panel will stay open">
                    <input type="checkbox" id="lm_button_panel_pin">
                    <label for="lm_button_panel_pin">
                        <div class="unchecked fa-solid fa-unlock right_menu_button interactable" tabindex="0"></div>
                        <div class="checked fa-solid fa-lock right_menu_button interactable" tabindex="0"></div>
                    </label>
                </div>
                <div id="clickSlidersTips" data-i18n="clickslidertips" class="toggle-description wide100p editable-slider-notification">
                    Click slider numbers to input manually.
                </div>
                <div id="labModeWarning" class="redWarningBG textAlignCenter displayNone" data-i18n="MAD LAB MODE ON">MAD LAB MODE ON</div>
                <a class="topRightInset" href="https://docs.sillytavern.app/usage/common-settings/" target="_blank" title="Documentation on sampling parameters." data-i18n="[title]Documentation on sampling parameters">
                    <span name="samplerHelpButton" class="note-link-span fa-solid fa-circle-question"></span>
                </a>
                <div class="scrollableInner">
                    <div class="flex-container flexNoGap" id="ai_response_configuration">
                        <div id="respective-presets-block" class="width100p">
                            <div id="kobold_api-presets" style="display: none;">
                                <div class="margin0 title_restorable standoutHeader">
                                    <strong>
                                        <span data-i18n="kobldpresets">Kobold Presets</span>
                                    </strong>

                                    <div class="flex-container gap3px">
                                        <div data-preset-manager-import="kobold" class="margin0 menu_button_icon menu_button interactable" title="Import preset" data-i18n="[title]Import preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-import"></i>
                                        </div>
                                        <div data-preset-manager-export="kobold" class="margin0 menu_button_icon menu_button interactable" title="Export preset" data-i18n="[title]Export preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-export"></i>
                                        </div>
                                        <div data-preset-manager-delete="kobold" class="margin0 menu_button_icon menu_button interactable" title="Delete the preset" data-i18n="[title]Delete the preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-trash-can"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-container flexNoGap">
                                    <select id="settings_preset" data-preset-manager-for="kobold" class="flex1 text_pole"><option value="gui">GUI KoboldAI Settings</option><option value="0">Ace of Spades</option><option value="1">Basic Coherence</option><option value="2">Best Guess</option><option value="3">Coherent Creativity</option><option value="4">Deterministic</option><option value="5">Genesis</option><option value="6">Godlike</option><option value="7">Good Winds</option><option value="8">Liminal Drift</option><option value="9">Low Rider</option><option value="10">Luna Moth</option><option value="11">Mayday</option><option value="12">Miro Bronze</option><option value="13">Miro Gold</option><option value="14">Miro Silver</option><option value="15">Ouroboros</option><option value="16">Pleasing Results</option><option value="17">Pro Writer</option><option value="18" selected="selected">RecoveredRuins</option><option value="19">simple-proxy-for-tavern</option><option value="20">Space Alien</option><option value="21">Storywriter</option><option value="22">TFS-with-Top-A</option><option value="23">Titanic</option><option value="24">Universal-Creative</option><option value="25">Universal-Light</option><option value="26">Universal-Super-Creative</option></select>
                                    <div class="flex-container marginLeft5 gap3px">
                                        <input type="file" hidden="" data-preset-manager-file="kobold" accept=".json, .settings">
                                        <div data-preset-manager-update="kobold" class="menu_button menu_button_icon interactable" title="Update current preset" data-i18n="[title]Update current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-save"></i>
                                        </div>
                                        <div data-preset-manager-rename="kobold" class="menu_button menu_button_icon interactable" title="Rename current preset" data-i18n="[title]Rename current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-pencil"></i>
                                        </div>
                                        <div data-preset-manager-new="kobold" class="menu_button menu_button_icon interactable" title="Save preset as" data-i18n="[title]Save preset as" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-circle-plus"></i>
                                        </div>
                                        <div data-preset-manager-restore="kobold" class="menu_button menu_button_icon interactable" title="Restore current preset" data-i18n="[title]Restore current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-recycle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="novel_api-presets" style="display: none;">
                                <div class="margin0 title_restorable standoutHeader">
                                    <strong>
                                        <span data-i18n="novelaipresets">NovelAI Presets</span>
                                        <a href="https://docs.sillytavern.app/usage/api-connections/novelai/" class="notes-link" target="_blank">
                                            <span class="fa-solid fa-circle-question note-link-span"></span>
                                        </a>
                                    </strong>

                                    <div class="flex-container gap3px">
                                        <div data-preset-manager-import="novel" class="margin0 menu_button_icon menu_button interactable" title="Import preset" data-i18n="[title]Import preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-import"></i>
                                        </div>
                                        <div data-preset-manager-export="novel" class="margin0 menu_button_icon menu_button interactable" title="Export preset" data-i18n="[title]Export preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-export"></i>
                                        </div>
                                        <div data-preset-manager-delete="novel" class="margin0 menu_button_icon menu_button interactable" title="Delete the preset" data-i18n="[title]Delete the preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-trash-can"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-container flexNoGap">
                                    <select id="settings_preset_novel" class="flex1 text_pole" data-preset-manager-for="novel"><option value="0">Asper-Kayra</option><option value="1">Blended-Coffee-Kayra</option><option value="2">Blook-Kayra</option><option value="3">Carefree-Kayra</option><option value="4">CosmicCube-Kayra</option><option value="5">Edgewise-Clio</option><option value="6">Erato-Dragonfruit</option><option value="7">Erato-Golden Arrow</option><option value="8">Erato-Shosetsu</option><option value="9">Erato-Wilder</option><option value="10">Erato-Zany Scribe</option><option value="11">Fresh-Coffee-Clio</option><option value="12">Fresh-Coffee-Kayra</option><option value="13">Green-Active-Writer-Kayra</option><option value="14">Keelback-Clio</option><option value="15">Long-Press-Clio</option><option value="16">Pilotfish-Kayra</option><option value="17">Pro_Writer-Kayra</option><option value="18">Stelenes-Kayra</option><option value="19" selected="selected">Talker-Chat-Clio</option><option value="20">Tea_Time-Kayra</option><option value="21">Tesseract-Kayra</option><option value="22">Vingt-Un-Clio</option><option value="23">Writers-Daemon-Kayra</option></select>
                                    <div class="flex-container marginLeft5 gap3px">
                                        <input type="file" hidden="" data-preset-manager-file="novel" accept=".json, .settings, .preset">
                                        <div data-preset-manager-update="novel" class="menu_button menu_button_icon interactable" title="Update current preset" data-i18n="[title]Update current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-save"></i>
                                        </div>
                                        <div data-preset-manager-rename="novel" class="menu_button menu_button_icon interactable" title="Rename current preset" data-i18n="[title]Rename current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-pencil"></i>
                                        </div>
                                        <div data-preset-manager-new="novel" class="menu_button menu_button_icon interactable" title="Save preset as" data-i18n="[title]Save preset as" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-circle-plus"></i>
                                        </div>
                                        <div data-preset-manager-restore="novel" class="menu_button menu_button_icon interactable" title="Restore current preset" data-i18n="[title]Restore current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-recycle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="openai_api-presets" style="display: flex;">
                                <div>
                                    <div class="margin0 title_restorable standoutHeader">
                                        <strong>
                                            <span data-i18n="openaipresets">Chat Completion Presets</span>
                                        </strong>

                                        <div class="flex-container gap3px">
                                            <div id="import_oai_preset" class="margin0 menu_button menu_button_icon interactable" title="Import preset" data-i18n="[title]Import preset" tabindex="0">
                                                <i class="fa-fw fa-solid fa-file-import"></i>
                                            </div>
                                            <div id="export_oai_preset" class="margin0 menu_button menu_button_icon interactable" title="Export preset" data-i18n="[title]Export preset" tabindex="0">
                                                <i class="fa-fw fa-solid fa-file-export"></i>
                                            </div>
                                            <div id="delete_oai_preset" class="margin0 menu_button menu_button_icon interactable" title="Delete the preset" data-i18n="[title]Delete the preset" tabindex="0">
                                                <i class="fa-fw fa-solid fa-trash-can"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="flex-container flexNoGap">
                                        <select id="settings_preset_openai" class="flex1 text_pole" data-preset-manager-for="openai"><option value="0" selected="selected">Default</option></select>
                                        <div class="flex-container marginLeft5 gap3px">
                                            <input id="openai_preset_import_file" type="file" accept=".json,.settings" hidden="">
                                            <div id="update_oai_preset" class="menu_button menu_button_icon interactable" title="Update current preset" data-i18n="[title]Update current preset" tabindex="0">
                                                <i class="fa-fw fa-solid fa-save"></i>
                                            </div>
                                            <div id="new_oai_preset" class="menu_button menu_button_icon interactable" title="Save preset as" data-i18n="[title]Save preset as" tabindex="0">
                                                <i class="fa-fw fa-solid fa-file-circle-plus"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="textgenerationwebui_api-presets" style="display: none;">
                                <div class="margin0 title_restorable standoutHeader">
                                    <strong>
                                        <span data-i18n="Text Completion presets">Text Completion presets</span>
                                    </strong>

                                    <div class="flex-container gap3px">
                                        <div data-preset-manager-import="textgenerationwebui" class="margin0 menu_button_icon menu_button interactable" title="Import preset" data-i18n="[title]Import preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-import"></i>
                                        </div>
                                        <div data-preset-manager-export="textgenerationwebui" class="margin0 menu_button_icon menu_button interactable" title="Export preset" data-i18n="[title]Export preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-export"></i>
                                        </div>
                                        <div data-preset-manager-delete="textgenerationwebui" class="margin0 menu_button_icon menu_button interactable" title="Delete the preset" data-i18n="[title]Delete the preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-trash-can"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-container flexNoGap">
                                    <select id="settings_preset_textgenerationwebui" class="flex1 text_pole" data-preset-manager-for="textgenerationwebui">
                                    <option value="Asterism">Asterism</option><option value="Beam Search">Beam Search</option><option value="Big O">Big O</option><option value="Contrastive Search">Contrastive Search</option><option value="Default">Default</option><option value="Deterministic">Deterministic</option><option value="Divine Intellect">Divine Intellect</option><option value="Kobold (Godlike)">Kobold (Godlike)</option><option value="Kobold (Liminal Drift)">Kobold (Liminal Drift)</option><option value="LLaMa-Precise">LLaMa-Precise</option><option value="Midnight Enigma">Midnight Enigma</option><option value="Miro Bronze">Miro Bronze</option><option value="Miro Gold">Miro Gold</option><option value="Miro Silver">Miro Silver</option><option value="Mirostat">Mirostat</option><option value="Naive">Naive</option><option value="NovelAI (Best Guess)">NovelAI (Best Guess)</option><option value="NovelAI (Decadence)">NovelAI (Decadence)</option><option value="NovelAI (Genesis)">NovelAI (Genesis)</option><option value="NovelAI (Lycaenidae)">NovelAI (Lycaenidae)</option><option value="NovelAI (Ouroboros)">NovelAI (Ouroboros)</option><option value="NovelAI (Pleasing Results)">NovelAI (Pleasing Results)</option><option value="NovelAI (Sphinx Moth)">NovelAI (Sphinx Moth)</option><option value="NovelAI (Storywriter)">NovelAI (Storywriter)</option><option value="Shortwave">Shortwave</option><option value="Simple-1">Simple-1</option><option value="simple-proxy-for-tavern">simple-proxy-for-tavern</option><option value="Space Alien">Space Alien</option><option value="StarChat">StarChat</option><option value="TFS-with-Top-A">TFS-with-Top-A</option><option value="Titanic">Titanic</option><option value="Universal-Creative">Universal-Creative</option><option value="Universal-Light">Universal-Light</option><option value="Universal-Super-Creative">Universal-Super-Creative</option><option value="Yara">Yara</option></select>
                                    <div class="flex-container marginLeft5 gap3px">
                                        <input type="file" hidden="" data-preset-manager-file="textgenerationwebui" accept=".json, .settings">
                                        <div data-preset-manager-update="textgenerationwebui" class="menu_button menu_button_icon interactable" title="Update current preset" data-i18n="[title]Update current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-save"></i>
                                        </div>
                                        <div data-preset-manager-rename="textgenerationwebui" class="menu_button menu_button_icon interactable" title="Rename current preset" data-i18n="[title]Rename current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-pencil"></i>
                                        </div>
                                        <div data-preset-manager-new="textgenerationwebui" class="menu_button menu_button_icon interactable" title="Save preset as" data-i18n="[title]Save preset as" tabindex="0">
                                            <i class="fa-fw fa-solid fa-file-circle-plus"></i>
                                        </div>
                                        <div data-preset-manager-restore="textgenerationwebui" class="menu_button menu_button_icon interactable" title="Restore current preset" data-i18n="[title]Restore current preset" tabindex="0">
                                            <i class="fa-fw fa-solid fa-recycle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="common-gen-settings-block" class="width100p" style="display: none;">
                            <div id="pro-settings-block" class="flex-container gap10h5v justifyCenter">
                                <div id="amount_gen_block" class="alignitemscenter flex-container marginBot5 flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                    <small data-i18n="response legth(tokens)">Response (tokens)</small>
                                    <input class="neo-range-slider" type="range" id="amount_gen" name="volume" min="16" max="2048" step="1">
                                    <div data-randomization-disabled="true" class="wide100p">
                                        <input class="neo-range-input" type="number" min="16" max="2048" step="1" data-for="amount_gen" id="amount_gen_counter">
                                    </div>
                                    <div id="streaming_textgenerationwebui_block" class="flex-container alignitemscenter justifyCenter marginTop5" style="display: none;">
                                        <label class="checkbox_label" for="streaming_textgenerationwebui">
                                            <input type="checkbox" id="streaming_textgenerationwebui" x-setting-id="streaming">
                                            <small><span data-i18n="Streaming">Streaming</span>
                                                <div class="margin5 fa-solid fa-circle-info opacity50p" data-i18n="[title]Streaming_desc" title="Display the response bit by bit as it is generated.
When this is off, responses will be displayed all at once when they are complete."></div>
                                            </small>
                                        </label>
                                    </div>
                                    <div id="streaming_kobold_block" class="flex-container alignitemscenter justifyCenter marginTop5" style="display: none;">
                                        <label class="checkbox_label" for="streaming_kobold">
                                            <input type="checkbox" id="streaming_kobold">
                                            <small><span data-i18n="Streaming">Streaming</span>
                                                <div class="margin5 fa-solid fa-circle-info opacity50p" data-i18n="[title]Streaming_desc" title="Display the response bit by bit as it is generated.
When this is off, responses will be displayed all at once when they are complete."></div>
                                            </small>
                                        </label>
                                    </div>
                                    <div id="streaming_novel_block" class="flex-container alignitemscenter justifyCenter marginTop5" style="display: none;">
                                        <label class="checkbox_label" for="streaming_novel">
                                            <input type="checkbox" id="streaming_novel">
                                            <small><span data-i18n="Streaming">Streaming</span>
                                                <div class="margin5 fa-solid fa-circle-info opacity50p" data-i18n="[title]Streaming_desc" title="Display the response bit by bit as it is generated.
When this is off, responses will be displayed all at once when they are complete."></div>
                                            </small>
                                        </label>
                                    </div>
                                </div>
                                <div id="max_context_block" class="alignitemscenter flex-container marginBot5 flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                    <small data-i18n="context size(tokens)">Context (tokens)</small>
                                    <input class="neo-range-slider" type="range" id="max_context" name="volume" min="512" max="8192" step="64">
                                    <div data-randomization-disabled="true" class="wide100p">
                                        <input class="neo-range-input" type="number" min="512" max="8192" step="64" data-for="max_context" id="max_context_counter">
                                    </div>
                                    <div class="flex-container alignitemscenter justifyCenter marginTop5" id="max_context_unlocked_block">
                                        <label class="checkbox_label">
                                            <input id="max_context_unlocked" type="checkbox">
                                            <small><span data-i18n="unlocked">Unlocked</span>
                                                <div id="max_context_unlocked_warning" class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Only enable this if your model supports context sizes greater than 8192 tokens" title="Only enable this if your model supports context sizes greater than 8192 tokens.
Increase only if you know what you're doing."></div>
                                            </small>
                                        </label>
                                    </div>
                                </div>
                                <small data-tg-type="openrouter" style="display: none;">
                                    <span data-i18n="Max prompt cost:">Max prompt cost:</span> <span id="or_prompt_cost">–</span>
                                </small>
                            </div>
                            <div id="ai_module_block_novel" class="width100p" style="display: none;">
                                <div class="range-block">
                                    <div class="range-block-title justifyLeft" data-i18n="AI Module">
                                        AI Module
                                    </div>
                                    <div class="toggle-description justifyLeft" data-i18n="Changes the style of the generated text.">
                                        Changes the style of the generated text.
                                    </div>
                                    <select id="nai_prefix">
                                        <option value="vanilla" data-i18n="No Module">No Module</option>
                                        <option value="special_instruct" data-i18n="Instruct">Instruct</option>
                                        <option value="special_proseaugmenter" data-i18n="Prose Augmenter">Prose Augmenter</option>
                                        <option value="theme_textadventure" data-i18n="Text Adventure">Text Adventure</option>
                                    </select>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <div id="respective-ranges-and-temps" class="width100p">
                            <!--
                            <div name="OldKoboldTempAndRepPenBlock" class="flex-container gap10h5v justifyCenter" id="range_block">
                            </div>
                            -->
                            <div id="range_block_novel" style="display: none;">
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Temperature">
                                        Temperature
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="temp_novel" name="volume" min="0.1" max="2.50" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0.1" max="2.50" step="0.01" data-for="temp_novel" id="temp_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="rep.pen">
                                        Repetition Penalty
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="rep_pen_novel" name="volume" min="1" max="8" step="0.025">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="1" max="8" step="0.025" data-for="rep_pen_novel" id="rep_pen_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Rep. Pen. Range.">
                                        Rep Pen Range
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="rep_pen_size_novel" name="volume" min="0" max="8192" step="1">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="8192" step="1" data-for="rep_pen_size_novel" id="rep_pen_size_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Rep. Pen. Slope">
                                        Repetition Penalty Slope
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="rep_pen_slope_novel" name="volume" min="0" max="10" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="10" step="0.01" data-for="rep_pen_slope_novel" id="rep_pen_slope_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Rep. Pen. Freq.">
                                        Repetition Penalty Frequency
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="rep_pen_freq_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="rep_pen_freq_novel" id="rep_pen_freq_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Rep. Pen. Presence">
                                        Repetition Penalty Presence
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="rep_pen_presence_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="rep_pen_presence_novel" id="rep_pen_presence_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Min P">
                                        Min P
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="min_p_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="min_p_novel" id="min_p_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="TFS">
                                        TFS
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="tail_free_sampling_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="tail_free_sampling_novel" id="tail_free_sampling_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Top P">
                                        Top P
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="top_p_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="top_p_novel" id="top_p_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Top A">
                                        Top A
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="top_a_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="top_a_novel" id="top_a_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Top K">
                                        Top K
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="top_k_novel" name="volume" min="0" max="300" step="1">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="300" step="1" data-for="top_k_novel" id="top_k_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Mirostat Tau">
                                        Mirostat Tau
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="mirostat_tau_novel" name="volume" min="0" max="6" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="6" step="0.01" data-for="mirostat_tau_novel" id="mirostat_tau_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Mirostat LR">
                                        Mirostat LR
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="mirostat_lr_novel" name="volume" min="0" max="1" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.01" data-for="mirostat_lr_novel" id="mirostat_lr_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Typical P">
                                        Typical P
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="typical_p_novel" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="typical_p_novel" id="typical_p_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Linear">
                                        Linear
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="math1_temp_novel" name="volume" min="0" max="1.5" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1.5" step="0.01" data-for="math1_temp_novel" id="math1_temp_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Quad">
                                        Quad
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="math1_quad_novel" name="volume" min="0" max="0.4" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="0.4" step="0.01" data-for="math1_quad_novel" id="math1_quad_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Conf">
                                        Conf
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="math1_quad_entropy_scale_novel" name="volume" min="-0.4" max="0.4" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="-0.4" max="0.4" step="0.01" data-for="math1_quad_entropy_scale_novel" id="math1_quad_entropy_scale_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Min Length">
                                        Min Length
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="min_length_novel" name="volume" min="1" max="150" step="1">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="1" max="150" step="1" data-for="min_length_novel" id="min_length_counter_novel">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Phrase Repetition Penalty">
                                        Phrase Repetition Penalty
                                    </div>
                                    <select id="phrase_rep_pen_novel">
                                        <option value="off" data-i18n="Off">Off</option>
                                        <option value="very_light" data-i18n="Very light">Very light</option>
                                        <option value="light" data-i18n="Light">Light</option>
                                        <option value="medium" data-i18n="Medium">Medium</option>
                                        <option value="aggressive" data-i18n="Aggressive">Aggressive</option>
                                        <option value="very_aggressive" data-i18n="Very aggressive">Very aggressive</option>
                                    </select>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title openai_restorable">
                                        <span data-i18n="Preamble">Preamble</span>
                                        <div id="nai_preamble_restore" title="Restore default prompt" data-i18n="[title]Restore default prompt" class="right_menu_button interactable" tabindex="0">
                                            <div class="fa-solid fa-clock-rotate-left "></div>
                                        </div>
                                    </div>
                                    <div class="toggle-description justifyLeft" data-i18n="Use style tags to modify the writing style of the output.">
                                        Use style tags to modify the writing style of the output.
                                    </div>
                                    <div class="wide100p">
                                        <textarea id="nai_preamble_textarea" class="text_pole textarea_compact" name="nai_preamble" rows="2" placeholder=""></textarea>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title justifyLeft">
                                        <span data-i18n="Banned Tokens">Banned Tokens</span>
                                    </div>
                                    <div class="toggle-description justifyLeft" data-i18n="Sequences you don't want to appear in the output. One per line.">
                                        Sequences you don't want to appear in the output. One per line. Text or [token ids].
                                    </div>
                                    <div class="wide100p">
                                        <textarea id="nai_banned_tokens" class="text_pole textarea_compact" name="nai_banned_tokens" rows="3" placeholder="Example:
some text
[42, 69, 1337]"></textarea>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div id="logit_bias_novel" class="range-block-title title_restorable">
                                        <span data-i18n="Logit Bias">Logit Bias</span>
                                        <div id="novelai_logit_bias_new_entry" class="menu_button menu_button_icon interactable" tabindex="0">
                                            <i class="fa-xs fa-solid fa-plus"></i>
                                            <small data-i18n="Add">Add</small>
                                        </div>
                                    </div>
                                    <div class="toggle-description justifyLeft" data-i18n="Helps to ban or reenforce the usage of certain words">
                                        Helps to ban or reinforce the usage of certain tokens.
                                    </div>
                                    <div class="flex-container flexFlowColumn wide100p">
                                        <div class="logit_bias_list ui-sortable"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="range_block_openai" style="display: block;">
                                <div class="range-block">
                                    <label class="checkbox_label">
                                        <input id="oai_max_context_unlocked" type="checkbox">
                                        <span data-i18n="Unlocked Context Size">
                                            Unlocked Context Size
                                        </span>
                                    </label>
                                    <div class="toggle-description justifyLeft">
                                        <span data-i18n="Unrestricted maximum value for the context slider">
                                            Unrestricted maximum value for the context size slider. Enable only if you know
                                            what you're doing.
                                        </span>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Context Size (tokens)">
                                        Context Size (tokens)
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="openai_max_context" name="volume" min="512" max="128000" step="1">
                                        </div>
                                        <div class="range-block-counter" data-randomization-disabled="true">
                                            <input type="number" min="512" max="128000" step="1" data-for="openai_max_context" id="openai_max_context_counter">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block">
                                    <div class="range-block-title" data-i18n="Max Response Length (tokens)">
                                        Max Response Length (tokens)
                                    </div>
                                    <div class="wide100p">
                                        <input type="number" id="openai_max_tokens" name="openai_max_tokens" class="text_pole" min="1" max="65536">
                                    </div>
                                </div>
                                <div class="range-block" data-source="openai,custom">
                                    <div class="range-block-title" data-i18n="Multiple swipes per generation">
                                        Multiple swipes per generation
                                    </div>
                                    <div class="wide100p">
                                        <input type="number" id="n_openai" name="n_openai" class="text_pole" min="1" value="1">
                                    </div>
                                </div>
                                <div data-source="openrouter" class="range-block" style="display: none;">
                                    <div class="range-block-title" title="Allow compressing requests by removing messages from the middle of the prompt.">
                                        <span data-i18n="Middle-out Transform">Middle-out Transform</span>
                                        <a href="https://openrouter.ai/docs/transforms" target="_blank" rel="noreferrer noopener" class="note-link-span fa-solid fa-circle-question"></a>
                                    </div>
                                    <div class="wide100p">
                                        <select id="openrouter_middleout" class="text_pole">
                                            <option value="auto" data-i18n="Auto">Auto</option>
                                            <option value="on" data-i18n="Allow">Allow</option>
                                            <option value="off" data-i18n="Forbid">Forbid</option>
                                        </select>
                                    </div>
                                </div>
                                <div data-source="openrouter" style="display: none;">
                                    Max prompt cost: <span id="openrouter_max_prompt_cost">Unknown</span>
                                </div>
                                <hr>
                                <div class="range-block">
                                    <label for="stream_toggle" title="Enable OpenAI completion streaming" data-i18n="[title]Enable OpenAI completion streaming" class="checkbox_label widthFreeExpand">
                                        <input id="stream_toggle" type="checkbox"><span data-i18n="Streaming">
                                            Streaming</span>
                                    </label>
                                    <div class="toggle-description justifyLeft">
                                        <span data-i18n="Display the response bit by bit as it is generated.">
                                            Display the response bit by bit as it is generated.
                                        </span><br>
                                        <span data-i18n="When this is off, responses will be displayed all at once when they are complete.">
                                            When this is off, responses will be displayed all at once when they are complete.
                                        </span>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openai,claude,windowai,openrouter,ai21,scale,makersuite,mistralai,custom,cohere,perplexity,groq,01ai,nanogpt">
                                    <div class="range-block-title" data-i18n="Temperature">
                                        Temperature
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="temp_openai" name="volume" min="0" max="2" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="2.0" step="0.01" data-for="temp_openai" id="temp_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openai,openrouter,custom,cohere,perplexity,groq,mistralai,nanogpt">
                                    <div class="range-block-title" data-i18n="Frequency Penalty">
                                        Frequency Penalty
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="freq_pen_openai" name="volume" min="-2" max="2" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="-2" max="2" step="0.01" data-for="freq_pen_openai" id="freq_pen_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openai,openrouter,custom,cohere,perplexity,groq,mistralai,nanogpt">
                                    <div class="range-block-title" data-i18n="Presence Penalty">
                                        Presence Penalty
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="pres_pen_openai" name="volume" min="-2" max="2" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="-2" max="2" step="0.01" data-for="pres_pen_openai" id="pres_pen_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="claude,openrouter,makersuite,cohere,perplexity" style="display: none;">
                                    <div class="range-block-title" data-i18n="Top K">
                                        Top K
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="top_k_openai" name="volume" min="0" max="500" step="1">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="200" step="1" data-for="top_k_openai" id="top_k_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openai,claude,openrouter,ai21,scale,makersuite,mistralai,custom,cohere,perplexity,groq,01ai,nanogpt">
                                    <div class="range-block-title" data-i18n="Top P">
                                        Top P
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="top_p_openai" name="volume" min="0" max="1" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.01" data-for="top_p_openai" id="top_p_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openrouter" style="display: none;">
                                    <div class="range-block-title" data-i18n="Repetition Penalty">
                                        Repetition Penalty
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="repetition_penalty_openai" name="volume" min="1" max="2" step="0.01">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="1" max="2" step="0.01" data-for="repetition_penalty_openai" id="repetition_penalty_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openrouter" style="display: none;">
                                    <div class="range-block-title" data-i18n="Min P">
                                        Min P
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="min_p_openai" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="min_p_openai" id="min_p_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openrouter" style="display: none;">
                                    <div class="range-block-title" data-i18n="Top A">
                                        Top A
                                    </div>
                                    <div class="range-block-range-and-counter">
                                        <div class="range-block-range">
                                            <input type="range" id="top_a_openai" name="volume" min="0" max="1" step="0.001">
                                        </div>
                                        <div class="range-block-counter">
                                            <input type="number" min="0" max="1" step="0.001" data-for="top_a_openai" id="top_a_counter_openai">
                                        </div>
                                    </div>
                                </div>
                                <div class="inline-drawer m-t-1 wide100p">
                                    <div class="inline-drawer-toggle inline-drawer-header">
                                        <b data-i18n="Quick Prompts Edit">Quick Prompts Edit</b>
                                        <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                    </div>
                                    <div class="inline-drawer-content">
                                        <div class="range-block m-t-1">
                                            <div class="justifyLeft" data-i18n="Main">Main</div>
                                            <div class="wide100p">
                                                <textarea id="main_prompt_quick_edit_textarea" class="text_pole textarea_compact autoSetHeight" rows="6" placeholder="—" data-pm-prompt="main" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="justifyLeft" data-i18n="Auxiliary">Auxiliary</div>
                                            <div class="wide100p">
                                                <textarea id="nsfw_prompt_quick_edit_textarea" class="text_pole textarea_compact autoSetHeight" rows="6" placeholder="—" data-pm-prompt="nsfw" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="justifyLeft" data-i18n="Post-History Instructions">Post-History Instructions</div>
                                            <div class="wide100p">
                                                <textarea id="jailbreak_prompt_quick_edit_textarea" class="text_pole textarea_compact autoSetHeight" rows="6" placeholder="—" data-pm-prompt="jailbreak" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="inline-drawer wide100p">
                                    <div class="inline-drawer-toggle inline-drawer-header">
                                        <b data-i18n="Utility Prompts">Utility Prompts</b>
                                        <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                    </div>
                                    <div class="inline-drawer-content">
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="Impersonation prompt">Impersonation prompt</span>
                                                <div id="impersonation_prompt_restore" data-i18n="[title]Restore default prompt" title="Restore default prompt" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft" data-i18n="Prompt that is used for Impersonation function">
                                                Prompt that is used for Impersonation function
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="impersonation_prompt_textarea" class="text_pole textarea_compact autoSetHeight" name="impersonation_prompt" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="World Info Format Template">World Info format template</span>
                                                <div id="wi_format_restore" data-i18n="[title]Restore default format" title="Restore default format" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Wraps activated World Info entries before inserting into the prompt.">Wraps activated World Info entries before inserting into the prompt.</span>
                                                <span data-i18n="scenario_format_template_part_1">Use</span><code>{0}</code>
                                                <span data-i18n="scenario_format_template_part_2">to mark a place where the content is inserted.</span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="wi_format_textarea" class="text_pole textarea_compact autoSetHeight" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="Scenario Format Template">Scenario format template</span>
                                                <div id="scenario_format_restore" data-i18n="[title]Restore default format" title="Restore default format" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="scenario_format_template_part_1">Use</span> <code>{{scenario}}</code> <span data-i18n="scenario_format_template_part_2">to mark a place where the content is inserted.</span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="scenario_format_textarea" class="text_pole textarea_compact autoSetHeight" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="Personality Format Template">Personality format template</span>
                                                <div id="personality_format_restore" data-i18n="[title]Restore default format" title="Restore default format" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="scenario_format_template_part_1">Use</span> <code>{{personality}}</code> <span data-i18n="scenario_format_template_part_2">to mark a place where the content is inserted.</span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="personality_format_textarea" class="text_pole textarea_compact autoSetHeight" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="Group Nudge Prompt Template">Group Nudge prompt template</span>
                                                <div id="group_nudge_prompt_restore" data-i18n="[title]Restore default format" title="Restore default format" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Sent at the end of the group chat history to force reply from a specific character.">
                                                    Sent at the end of the group chat history to force reply from a specific character.
                                                </span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="group_nudge_prompt_textarea" class="text_pole textarea_compact autoSetHeight" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="New Chat">New Chat</span>
                                                <div id="newchat_prompt_restore" data-i18n="[title]Restore new chat prompt" title="Restore new chat prompt" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Set at the beginning of the chat history to indicate that a new chat is about to start.">
                                                    Set at the beginning of the chat history to indicate that a new chat is about to start.
                                                </span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="newchat_prompt_textarea" class="text_pole textarea_compact autoSetHeight" name="new_chat" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="New Group Chat">New Group Chat</span>
                                                <div id="newgroupchat_prompt_restore" title="Restore default prompt" data-i18n="[title]Restore new group chat prompt" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Set at the beginning of the chat history to indicate that a new group chat is about to start.">
                                                    Set at the beginning of the chat history to indicate that a new group chat is about to start.
                                                </span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="newgroupchat_prompt_textarea" class="text_pole textarea_compact autoSetHeight" name="new_group_chat" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="New Example Chat">New Example Chat</span>
                                                <div id="newexamplechat_prompt_restore" title="Restore new example chat prompt" data-i18n="[title]Restore default prompt" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Set at the beginning of Dialogue examples to indicate that a new example chat is about to start.">
                                                    Set at the beginning of Dialogue examples to indicate that a new example chat is about to start.
                                                </span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="newexamplechat_prompt_textarea" class="text_pole textarea_compact autoSetHeight" name="new_example_chat" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title openai_restorable">
                                                <span data-i18n="Continue nudge">Continue nudge</span>
                                                <div id="continue_nudge_prompt_restore" data-i18n="[title]Restore new chat prompt" title="Restore new chat prompt" class="right_menu_button interactable" tabindex="0">
                                                    <div class="fa-solid fa-clock-rotate-left"></div>
                                                </div>
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Set at the end of the chat history when the continue button is pressed.">
                                                    Set at the end of the chat history when the continue button is pressed.
                                                </span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="continue_nudge_prompt_textarea" class="text_pole textarea_compact autoSetHeight" name="continue_nudge" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                        <div class="range-block m-t-1">
                                            <div class="range-block-title justifyLeft" data-i18n="Replace empty message">
                                                Replace empty message
                                            </div>
                                            <div class="toggle-description justifyLeft">
                                                <span data-i18n="Send this text instead of nothing when the text box is empty.">
                                                    Send this text instead of nothing when the text box is empty.
                                                </span>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="send_if_empty_textarea" class="text_pole textarea_compact autoSetHeight" name="send_if_empty" rows="3" placeholder="—" style="height: 3px;"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block" data-source="openai,openrouter,mistralai,custom,cohere,groq,nanogpt">
                                    <div class="range-block-title justifyLeft" data-i18n="Seed">
                                        Seed
                                    </div>
                                    <div class="toggle-description justifyLeft" data-i18n="Set to get deterministic results. Use -1 for random seed.">
                                        Set to get deterministic results. Use -1 for random seed.
                                    </div>
                                    <div class="wide100p">
                                        <input type="number" id="seed_openai" name="seed_openai" class="text_pole" min="-1" max="2147483647" value="-1">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="advanced-ai-config-block" class="width100p">
                            <div id="kobold_api-settings" style="display: none;">
                                <div class="flex-container gap10h5v justifyCenter">
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Temperature">Temperature</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Temperature controls the randomness in token selection" title="Temperature controls the randomness in token selection:
- low temperature (<1.0) leads to more predictable text, favoring higher probability tokens.
- high temperature (>1.0) increases creativity and diversity in the output by giving lower probability tokens a better chance.
Set to 1.0 for the original probabilities."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="temp" name="volume" min="0.0" max="4.0" step="0.01">
                                        <input class="neo-range-input" type="number" min="0.0" max="4.0" step="0.01" data-for="temp" id="temp_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Top K">Top K</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Top K sets a maximum amount of top tokens that can be chosen from.
E.g Top K is 20, this means only the 20 highest ranking tokens will be kept (regardless of their probabilities being diverse or limited).
Set to 0 to disable." data-i18n="[title]Top_K_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="top_k" name="volume" min="0" max="100" step="1">
                                        <input class="neo-range-input" type="number" min="0" max="100" step="1" data-for="top_k" id="top_k_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            Top P
                                            <div class="fa-solid fa-circle-info opacity50p" title="Top P (a.k.a. nucleus sampling) adds up all the top tokens required to add up to the target percentage.
E.g If the Top 2 tokens are both 25%, and Top P is 0.50, only the Top 2 tokens are considered.
Set to 1.0 to disable." data-i18n="[title]Top_P_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="top_p" name="volume" min="0" max="1" step="0.01">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="top_p" id="top_p_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Typical P">Typical P</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Typical P Sampling prioritizes tokens based on their deviation from the average entropy of the set.
It maintains tokens whose cumulative probability is close to a predefined threshold (e.g., 0.5), emphasizing those with average information content.
Set to 1.0 to disable." data-i18n="[title]Typical_P_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="typical_p" name="volume" min="0" max="1" step="0.001">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.001" data-for="typical_p" id="typical_p_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Min P">Min P</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Min P sets a base minimum probability.
This is scaled according to the top token's probability.
E.g If Top token is 80% probability, and Min P is 0.1, only tokens higher than 8% would be considered.
Set to 0 to disable." data-i18n="[title]Min_P_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="min_p" name="volume" min="0" max="1" step="0.001">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.001" data-for="min_p" id="min_p_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Top A">Top A</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Top A sets a threshold for token selection based on the square of the highest token probability.
E.g if the Top-A value is 0.2 and the top token's probability is 50%, tokens with probabilities below 5% (0.2 * 0.5^2) are excluded.
Set to 0 to disable." data-i18n="[title]Top_A_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="top_a" name="volume" min="0" max="1" step="0.001">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.001" data-for="top_a" id="top_a_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="TFS">TFS</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Tail-Free Sampling (TFS) searches for a tail of low-probability tokens in the distribution,
by analyzing the rate of change in token probabilities using derivatives. It retains tokens up to a threshold (e.g., 0.3) based on the normalized second derivative.
The closer to 0, the more discarded tokens. Set to 1.0 to disable." data-i18n="[title]Tail_Free_Sampling_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="tfs" name="volume" min="0" max="1" step="0.001">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.001" data-for="tfs" id="tfs_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="rep.pen">Repetition Penalty</span>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="rep_pen" name="volume" min="1" max="3" step="0.01">
                                        <input class="neo-range-input" type="number" min="1" max="3" step="0.01" data-for="rep_pen" id="rep_pen_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="rep.pen range">Rep Pen Range</span>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="rep_pen_range" name="volume" min="0" max="8192" step="1">
                                        <input class="neo-range-input" type="number" min="0" max="8192" step="1" data-for="rep_pen_range" id="rep_pen_range_counter">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Rep. Pen. Slope">Repetition Penalty Slope</span>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="rep_pen_slope" name="volume" min="0" max="10" step="0.01">
                                        <input class="neo-range-input" type="number" min="0" max="10" step="0.01" data-for="rep_pen_slope" id="rep_pen_slope_counter">
                                    </div>
                                    <div name="miroStatBlock-kobold" class="wide100p">
                                        <h4 class="wide100p textAlignCenter" data-i18n="Mirostat">Mirostat</h4>
                                        <div class="flex-container flexFlowRow gap10px flexShrink">
                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0">
                                                <small>
                                                    <span data-i18n="Mode">Mode</span>
                                                    <div class="fa-solid fa-circle-info opacity50p" title="A value of 0 disables Mirostat entirely. 1 is for Mirostat 1.0, and 2 is for Mirostat 2.0" data-i18n="[title]Mirostat_Mode_desc"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="mirostat_mode_kobold" name="volume" min="0" max="2" step="1">
                                                <input class="neo-range-input" type="number" min="0" max="2" step="1" data-for="mirostat_mode_kobold" id="mirostat_mode_counter_kobold">
                                            </div>
                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0">
                                                <small>
                                                    <span data-i18n="Tau">Tau</span>
                                                    <div class="fa-solid fa-circle-info opacity50p" title="Controls variability of Mirostat outputs" data-i18n="[title]Mirostat_Tau_desc"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="mirostat_tau_kobold" name="volume" min="0" max="20" step="0.01">
                                                <input class="neo-range-input" type="number" min="0" max="20" step="0.01" data-for="mirostat_tau_kobold" id="mirostat_tau_counter_kobold">
                                            </div>
                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0">
                                                <small>
                                                    <span data-i18n="Eta">Eta</span>
                                                    <div class="fa-solid fa-circle-info opacity50p" title="Controls learning rate of Mirostat" data-i18n="[title]Mirostat_Eta_desc"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="mirostat_eta_kobold" name="volume" min="0" max="1" step="0.01">
                                                <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="mirostat_eta_kobold" id="mirostat_eta_counter_kobold">
                                            </div>
                                        </div>
                                        <hr class="wide100p">
                                    </div>
                                    <div class="alignitemscenter justifyCenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <label class="checkbox_label alignItemsBaseline" for="use_default_badwordsids">
                                            <input id="use_default_badwordsids" type="checkbox">
                                            <span>
                                                <span data-i18n="Ban EOS Token">Ban EOS Token</span>
                                                <small class="fa-solid fa-circle-info opacity50p" title="Ban the End-of-Sequence (EOS) token with KoboldCpp (and possibly also other tokens with KoboldAI).
Good for story writing, but should not be used for chat and instruct mode." data-i18n="[title]Ban_EOS_Token_desc"></small>
                                            </span>
                                        </label>
                                    </div>
                                    <div class="alignitemscenter textAlignCenter flexBasis30p flexGrow flexShrink gap0">
                                        <!-- <hr class="wide100p"> -->
                                        <small data-i18n="Seed">Seed</small>
                                        <!-- Max value is 2**64 - 1 -->
                                        <input type="number" id="seed_kobold" class="text_pole wideMax100px" min="-1" value="-1" max="18446744073709551615">
                                    </div>
                                    <div id="grammar_block" class="wide100p">
                                        <hr class="wide100p">
                                        <h4 class="wide100p textAlignCenter"><span data-i18n="GBNF Grammar">GBNF Grammar</span>
                                            <a href="https://github.com/ggerganov/llama.cpp/blob/master/grammars/README.md" target="_blank">
                                                <small>
                                                    <div class="fa-solid fa-circle-question note-link-span"></div>
                                                </small>
                                            </a>
                                        </h4>
                                        <textarea id="grammar" rows="4" class="text_pole textarea_compact monospace" data-i18n="[placeholder]Type in the desired custom grammar" placeholder="Type in the desired custom grammar"></textarea>
                                    </div>
                                    <div name="KoboldSamplerOrderBlock" class="range-block flexFlowColumn">
                                        <hr class="wide100p">
                                        <div class="range-block-title">
                                            <span data-i18n="Samplers Order">Samplers Order</span>
                                        </div>
                                        <div class="toggle-description widthUnset" data-i18n="Samplers will be applied in a top-down order. Use with caution.">
                                            Samplers will be applied in a top-down order.
                                            Use with caution.
                                        </div>
                                        <div id="kobold_order" class="prompt_order ui-sortable">
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                        <div data-id="6" class="ui-sortable-handle">
                                                <span data-i18n="Repetition Penalty">Repetition Penalty</span>
                                                <small>6</small>
                                            </div><div data-id="0" class="ui-sortable-handle">
                                                <span data-i18n="Top K">Top K</span>
                                                <small>0</small>
                                            </div><div data-id="1" class="ui-sortable-handle">
                                                <span data-i18n="Top A">Top A</span>
                                                <small>1</small>
                                            </div><div data-id="2" class="ui-sortable-handle">
                                                <span data-i18n="Top P">Top P &amp; Min P</span>
                                                <small>2</small>
                                            </div><div data-id="3" class="ui-sortable-handle">
                                                <span data-i18n="Tail Free Sampling">Tail Free Sampling</span>
                                                <small>3</small>
                                            </div><div data-id="4" class="ui-sortable-handle">
                                                <span data-i18n="Typical P">Typical P</span>
                                                <small>4</small>
                                            </div><div data-id="5" class="ui-sortable-handle">
                                                <span data-i18n="Temperature">Temperature</span>
                                                <small>5</small>
                                            </div></div>
                                        <div id="samplers_order_recommended" class="menu_button menu_button_icon interactable" tabindex="0">
                                            <span data-i18n="Load koboldcpp order">Load koboldcpp order</span>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- end of kobold settings-->
                            <div id="novel_api-settings" style="display: none;">
                                <div class="range-block flexFlowColumn">
                                    <div class="range-block-title">
                                        <span data-i18n="Samplers Order">Samplers Order</span>
                                    </div>
                                    <div class="toggle-description widthUnset" data-i18n="Samplers will be applied in a top-down order. Use with caution.">
                                        Samplers will be applied in a top-down order. Use with caution.
                                    </div>
                                    <div id="novel_order" class="prompt_order ui-sortable">
                                        
                                        
                                        
                                        
                                        
                                        
                                        <!-- 6 and 7 were removed samplers. -->
                                        
                                        
                                        
                                    <div data-id="1" class="ui-sortable-handle">
                                            <span data-i18n="Top K Sampling">Top K Sampling</span>
                                            <small>1</small>
                                            <div class="toggle_button right_menu_button interactable" tabindex="0"></div>
                                        </div><div data-id="5" class="ui-sortable-handle">
                                            <span data-i18n="Typical P">Typical P</span>
                                            <small>5</small>
                                            <div class="toggle_button right_menu_button interactable" tabindex="0"></div>
                                        </div><div data-id="0" class="ui-sortable-handle">
                                            <span data-i18n="Temperature">Temperature</span>
                                            <small>0</small>
                                            <div class="toggle_button right_menu_button interactable" tabindex="0"></div>
                                        </div><div data-id="2" class="ui-sortable-handle">
                                            <span data-i18n="Nucleus Sampling">Nucleus Sampling</span>
                                            <small>2</small>
                                            <div class="toggle_button right_menu_button interactable" tabindex="0"></div>
                                        </div><div data-id="3" class="ui-sortable-handle">
                                            <span data-i18n="Tail Free Sampling">Tail Free Sampling</span>
                                            <small>3</small>
                                            <div class="toggle_button right_menu_button interactable" tabindex="0"></div>
                                        </div><div data-id="4" class="ui-sortable-handle">
                                            <span data-i18n="Top A Sampling">Top A Sampling</span>
                                            <small>4</small>
                                            <div class="toggle_button right_menu_button interactable" tabindex="0"></div>
                                        </div><div data-id="8" class="ui-sortable-handle disabled">
                                            <span data-i18n="Mirostat">Mirostat</span>
                                            <small>8</small>
                                            <div class="toggle_button right_menu_button interactable" data-original-tabindex="null"></div>
                                        </div><div data-id="9" class="ui-sortable-handle disabled">
                                            <span data-i18n="Unified Sampling">Unified Sampling</span>
                                            <small>9</small>
                                            <div class="toggle_button right_menu_button interactable" data-original-tabindex="null"></div>
                                        </div><div data-id="10" class="ui-sortable-handle disabled">
                                            <span data-i18n="Min P">Min P</span>
                                            <small>10</small>
                                            <div class="toggle_button right_menu_button interactable" data-original-tabindex="null"></div>
                                        </div></div>
                                </div>
                            </div><!-- end of novel settings-->
                            <div id="textgenerationwebui_api-settings" style="display: none;">
                                <div class="flex-container justifyCenter">
                                    <small class="flex-container alignitemscenter">
                                        <div id="samplerResetButton" class="menu_button whitespacenowrap interactable" data-i18n="Neutralize Samplers" tabindex="0">Neutralize Samplers</div>
                                        <div class="fa-solid fa-circle-info opacity50p" title="Set all samplers to their neutral/disabled state." data-i18n="[title]Set all samplers to their neutral/disabled state."></div>
                                    </small>

                                    <small class="flex-container alignitemscenter">
                                        <div id="samplerSelectButton" class="menu_button whitespacenowrap interactable" data-i18n="Sampler Select" tabindex="0">Sampler Select</div>
                                        <div class="fa-solid fa-circle-info opacity50p" title="Customize displayed samplers or add custom samplers." data-i18n="[title]Customize displayed samplers or add custom samplers."></div>
                                    </small>
                                </div>
                                <div data-tg-type="mancer, vllm, aphrodite, tabby, infermaticai" class="flex-container flexFlowColumn alignitemscenter flexBasis100p flexGrow flexShrink gap0" style="display: none;">
                                    <small data-i18n="Multiple swipes per generation">Multiple swipes per generation</small>
                                    <input type="number" id="n_textgenerationwebui" class="text_pole textAlignCenter" min="1" value="1" step="1" x-setting-id="n">
                                </div>
                                <div class="flex-container gap10h5v justifyCenter">
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Temperature">Temperature</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Temperature controls the randomness in token selection" title="Temperature controls the randomness in token selection:
- low temperature (<1.0) leads to more predictable text, favoring higher probability tokens.
- high temperature (>1.0) increases creativity and diversity in the output by giving lower probability tokens a better chance.
Set to 1.0 for the original probabilities."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="temp_textgenerationwebui" name="volume" min="0.0" max="5.0" step="0.01" x-setting-id="temp">
                                        <input class="neo-range-input" type="number" min="0.0" max="5.0" step="0.01" data-for="temp_textgenerationwebui" id="temp_counter_textgenerationwebui">
                                    </div>
                                    <!-- Note: "except" mode = show for all BUT types in data-tg-type -->
                                    <div data-tg-type-mode="except" data-tg-type="generic" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Top K">Top K</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Top K sets a maximum amount of top tokens that can be chosen from.
E.g Top K is 20, this means only the 20 highest ranking tokens will be kept (regardless of their probabilities being diverse or limited).
Set to 0 (or -1, depending on your backend) to disable." data-i18n="[title]Top_K_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="top_k_textgenerationwebui" name="volume" min="-1" max="200" step="1" x-setting-id="top_k">
                                        <input class="neo-range-input" type="number" min="-1" max="200" step="1" data-for="top_k_textgenerationwebui" id="top_k_counter_textgenerationwebui">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Top P">Top P</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Top P (a.k.a. nucleus sampling) adds up all the top tokens required to add up to the target percentage.
E.g If the Top 2 tokens are both 25%, and Top P is 0.50, only the Top 2 tokens are considered.
Set to 1.0 to disable." data-i18n="[title]Top_P_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="top_p_textgenerationwebui" name="volume" min="0" max="1" step="0.01" x-setting-id="top_p">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="top_p_textgenerationwebui" id="top_p_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type-mode="except" data-tg-type="generic" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Typical P">Typical P</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Typical P Sampling prioritizes tokens based on their deviation from the average entropy of the set.
It maintains tokens whose cumulative probability is close to a predefined threshold (e.g., 0.5), emphasizing those with average information content.
Set to 1.0 to disable." data-i18n="[title]Typical_P_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="typical_p_textgenerationwebui" name="volume" min="0" max="1" step="0.01" x-setting-id="typical_p">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="typical_p_textgenerationwebui" id="typical_p_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type-mode="except" data-tg-type="generic" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Min P">Min P</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Min_P_desc" title="Min P sets a base minimum probability. This is scaled according to the top token's probability.
E.g If Top token is 80% probability, and Min P is 0.1, only tokens higher than 8% would be considered.
Set to 0 to disable."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="min_p_textgenerationwebui" name="volume" min="0" max="1" step="0.001" x-setting-id="min_p">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.001" data-for="min_p_textgenerationwebui" id="min_p_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type-mode="except" data-tg-type="generic" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Top A">Top A</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="Top A sets a threshold for token selection based on the square of the highest token probability.
E.g if the Top-A value is 0.2 and the top token's probability is 50%, tokens with probabilities below 5% (0.2 * 0.5^2) are excluded.
Set to 0 to disable." data-i18n="[title]Top_A_desc"></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="top_a_textgenerationwebui" name="volume" min="0" max="1" step="0.01" x-setting-id="top_a">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="top_a_textgenerationwebui" id="top_a_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type-mode="except" data-tg-type="generic" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="TFS">TFS</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Tail_Free_Sampling_desc" title="Tail-Free Sampling (TFS) searches for a tail of low-probability tokens in the distribution,
by analyzing the rate of change in token probabilities using derivatives. It retains tokens up to a threshold (e.g., 0.3) based on the normalized second derivative.
The closer to 0, the more discarded tokens. Set to 1.0 to disable."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="tfs_textgenerationwebui" name="volume" min="0" max="1" step="0.01" x-setting-id="tfs">
                                        <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="tfs_textgenerationwebui" id="tfs_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="ooba,mancer,aphrodite" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Epsilon Cutoff">Epsilon Cutoff</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Epsilon cutoff sets a probability floor below which tokens are excluded from being sampled" title="Epsilon cutoff sets a probability floor below which tokens are excluded from being sampled.
In units of 1e-4; a reasonable value is 3.
Set to 0 to disable."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="epsilon_cutoff_textgenerationwebui" name="volume" min="0" max="9" step="0.01" x-setting-id="epsilon_cutoff">
                                        <input class="neo-range-input" type="number" min="0" max="9" step="0.01" data-for="epsilon_cutoff_textgenerationwebui" id="epsilon_cutoff_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="aphrodite" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0" style="display: none;">
                                        <small>
                                            <span data-i18n="Top nsigma">Top nsigma</span>
                                            <div class="fa-solid fa-circle-info opacity50p" title="A sampling method that filters logits based on their statistical properties. It keeps tokens within n standard deviations of the maximum logit value, providing a simpler alternative to top-p/top-k sampling while maintaining sampling stability across different temperatures."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="nsigma_textgenerationwebui" name="volume" min="0" max="5" step="0.01" x-setting-id="nsigma">
                                        <input class="neo-range-input" type="number" min="0" max="5" step="0.01" data-for="nsigma_textgenerationwebui" id="nsigma_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="ooba,mancer,aphrodite" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Eta Cutoff">Eta Cutoff</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Eta_Cutoff_desc" title="Eta cutoff is the main parameter of the special Eta Sampling technique.
In units of 1e-4; a reasonable value is 3.
Set to 0 to disable.
See the paper Truncation Sampling as Language Model Desmoothing by Hewitt et al. (2022) for details."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="eta_cutoff_textgenerationwebui" name="volume" min="0" max="20" step="0.01" x-setting-id="eta_cutoff">
                                        <input class="neo-range-input" type="number" min="0" max="20" step="0.01" data-for="eta_cutoff_textgenerationwebui" id="eta_cutoff_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type-mode="except" data-tg-type="generic" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small data-i18n="rep.pen">Repetition Penalty</small>
                                        <input class="neo-range-slider" type="range" id="rep_pen_textgenerationwebui" name="volume" min="1" max="3" step="0.01" x-setting-id="rep_pen">
                                        <input class="neo-range-input" type="number" min="1" max="3" step="0.01" data-for="rep_pen_textgenerationwebui" id="rep_pen_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="ooba, koboldcpp, tabby, ollama, llamacpp" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small data-i18n="rep.pen range">Rep Pen Range</small>
                                        <input class="neo-range-slider" type="range" id="rep_pen_range_textgenerationwebui" name="volume" min="-1" max="8192" step="1" x-setting-id="rep_pen_range">
                                        <input class="neo-range-input" type="number" min="-1" max="8192" step="1" data-for="rep_pen_range_textgenerationwebui" id="rep_pen_range_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="koboldcpp" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0" style="display: none;">
                                        <small data-i18n="Rep. Pen. Slope">Rep Pen Slope</small>
                                        <input class="neo-range-slider" type="range" id="rep_pen_slope_textgenerationwebui" name="volume" min="0" max="10" step="0.01" x-setting-id="rep_pen_slope">
                                        <input class="neo-range-input" type="number" min="0" max="10" step="0.01" data-for="rep_pen_slope_textgenerationwebui" id="rep_pen_slope_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="tabby" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0" style="display: none;">
                                        <small data-i18n="rep.pen decay">Rep Pen Decay</small>
                                        <input class="neo-range-slider" type="range" id="rep_pen_decay_textgenerationwebui" name="volume" min="-1" max="8192" step="1" x-setting-id="rep_pen_decay">
                                        <input class="neo-range-input" type="number" min="-1" max="8192" step="1" data-for="rep_pen_decay_textgenerationwebui" id="rep_pen_decay_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="ooba" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small data-i18n="Encoder Rep. Pen.">Encoder Penalty</small>
                                        <input class="neo-range-slider" type="range" id="encoder_rep_pen_textgenerationwebui" name="volume" min="0.8" max="1.5" step="0.01" x-setting-id="encoder_rep_pen">
                                        <input class="neo-range-input" type="number" min="0.8" max="1.5" step="0.01" data-for="encoder_rep_pen_textgenerationwebui" id="encoder_rep_pen_counter_textgenerationwebui">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small data-i18n="Frequency Penalty">Frequency Penalty</small>
                                        <input class="neo-range-slider" type="range" id="freq_pen_textgenerationwebui" name="volume" min="-2" max="2" step="0.01" x-setting-id="freq_pen">
                                        <input class="neo-range-input" type="number" data-for="freq_pen_textgenerationwebui" min="-2" max="2" step="0.01" id="freq_pen_counter_textgenerationwebui">
                                    </div>
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small data-i18n="Presence Penalty">Presence Penalty</small>
                                        <input class="neo-range-slider" type="range" id="presence_pen_textgenerationwebui" name="volume" min="-2" max="2" step="0.01" x-setting-id="presence_pen">
                                        <input class="neo-range-input" type="number" min="-2" max="2" step="0.01" data-for="presence_pen_textgenerationwebui" id="presence_pen_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="aphrodite, ooba" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0" style="">
                                        <small data-i18n="No Repeat Ngram Size">No Repeat Ngram Size</small>
                                        <input class="neo-range-slider" type="range" id="no_repeat_ngram_size_textgenerationwebui" name="volume" min="0" max="20" step="1" x-setting-id="no_repeat_ngram_size">
                                        <input class="neo-range-input" type="number" min="0" max="20" step="1" data-for="no_repeat_ngram_size_textgenerationwebui" id="no_repeat_ngram_size_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="tabby, aphrodite" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0" style="display: none;">
                                        <small data-i18n="Skew">Skew</small>
                                        <input class="neo-range-slider" type="range" id="skew_textgenerationwebui" name="volume" min="-5" max="5" step="0.01" x-setting-id="skew">
                                        <input class="neo-range-input" type="number" min="-5" max="5" step="0.01" data-for="skew_textgenerationwebui" id="skew_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="mancer, ooba, tabby, dreamgen, infermaticai, aphrodite" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0" style="">
                                        <small data-i18n="Min Length">Min Length</small>
                                        <input class="neo-range-slider" type="range" id="min_length_textgenerationwebui" name="volume" min="0" max="2000" step="1" x-setting-id="min_length">
                                        <input class="neo-range-input" type="number" min="0" max="2000" step="1" data-for="min_length_textgenerationwebui" id="min_length_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="ooba" class="alignitemscenter flex-container flexFlowColumn flexBasis30p flexGrow flexShrink gap0">
                                        <small data-i18n="Max Tokens Second">Maximum tokens/second</small>
                                        <input class="neo-range-slider" type="range" id="max_tokens_second_textgenerationwebui" name="volume" min="0" max="20" step="1" x-setting-id="max_tokens_second">
                                        <input class="neo-range-input" type="number" min="0" max="20" step="1" data-for="max_tokens_second_textgenerationwebui" id="max_tokens_second_counter_textgenerationwebui">
                                    </div>
                                    <div data-tg-type="mancer, ooba, koboldcpp, aphrodite, tabby" id="smoothingBlock" name="smoothingBlock" class="wide100p" style="">
                                        <h4 class="wide100p textAlignCenter">
                                            <label data-i18n="Smooth Sampling">Smooth Sampling</label>
                                            <div class=" fa-solid fa-circle-info opacity50p " data-i18n="[title]Smooth_Sampling_desc" title="Allows you to use quadratic/cubic transformations to adjust the distribution. Lower Smoothing Factor values will be more creative, usually between 0.2-0.3 is the sweetspot (assuming the curve = 1). Higher Smoothing Curve values will make the curve steeper, which will punish low probability choices more aggressively. 1.0 curve is equivalent to only using Smoothing Factor."></div>
                                        </h4>
                                        <div data-tg-type="mancer, ooba, koboldcpp, aphrodite, tabby" class="flex-container flexFlowRow gap10px flexShrink" style="">
                                            <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                                <small data-i18n="Smoothing Factor">Smoothing Factor</small>
                                                <input class="neo-range-slider" type="range" id="smoothing_factor_textgenerationwebui" name="volume" min="0" max="10" step="0.01" x-setting-id="smoothing_factor">
                                                <input class="neo-range-input" type="number" min="0" max="10" step="0.01" data-for="smoothing_factor_textgenerationwebui" id="smoothing_factor_counter_textgenerationwebui">
                                            </div>
                                            <div data-tg-type="mancer, ooba, koboldcpp, aphrodite" class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0" style="">
                                                <small data-i18n="Smoothing Curve">Smoothing Curve</small>
                                                <input class="neo-range-slider" type="range" id="smoothing_curve_textgenerationwebui" name="volume" min="1" max="10" step="0.01" x-setting-id="smoothing_curve">
                                                <input class="neo-range-input" type="number" min="1" max="10" step="0.01" data-for="smoothing_curve_textgenerationwebui" id="smoothing_curve_counter_textgenerationwebui">
                                            </div>
                                        </div>
                                    </div>

                                    <div data-tg-type="koboldcpp, aphrodite, tabby, ooba, llamacpp" id="xtc_block" class="wide100p" style="">
                                        <h4 class="wide100p textAlignCenter">
                                            <label data-i18n="Exclude Top Choices (XTC)">Exclude Top Choices (XTC)</label>
                                            <a href="https://github.com/oobabooga/text-generation-webui/pull/6335" target="_blank">
                                                <div class=" fa-solid fa-circle-info opacity50p"></div>
                                            </a>
                                        </h4>
                                        <div class="flex-container flexFlowRow gap10px flexShrink">
                                            <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                                <small data-i18n="Threshold">Threshold</small>
                                                <input class="neo-range-slider" type="range" id="xtc_threshold_textgenerationwebui" name="volume" min="0" max="0.5" step="0.01" x-setting-id="xtc_threshold">
                                                <input class="neo-range-input" type="number" min="0" max="0.5" step="0.01" data-for="xtc_threshold_textgenerationwebui" id="xtc_threshold_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                                <small data-i18n="Probability">Probability</small>
                                                <input class="neo-range-slider" type="range" id="xtc_probability_textgenerationwebui" name="volume" min="0" max="1" step="0.01" x-setting-id="xtc_probability">
                                                <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="xtc_probability_textgenerationwebui" id="xtc_probability_counter_textgenerationwebui">
                                            </div>
                                        </div>
                                    </div>

                                    <div data-tg-type="aphrodite, ooba, koboldcpp, tabby, llamacpp" id="dryBlock" class="wide100p" style="">
                                        <h4 class="wide100p textAlignCenter" title="DRY penalizes tokens that would extend the end of the input into a sequence that has previously occurred in the input. Set multiplier to 0 to disable." data-i18n="[title]DRY_Repetition_Penalty_desc">
                                            <label data-i18n="DRY Repetition Penalty">DRY Repetition Penalty</label>
                                            <a href="https://github.com/oobabooga/text-generation-webui/pull/5677" target="_blank">
                                                <div class=" fa-solid fa-circle-info opacity50p"></div>
                                            </a>
                                        </h4>
                                        <div class="flex-container flexFlowRow gap10px flexShrink">
                                            <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0" title="Set to value > 0 to enable DRY. Controls the magnitude of the penalty for the shortest penalized sequences." data-i18n="[title]DRY_Multiplier_desc">
                                                <small data-i18n="Multiplier">Multiplier</small>
                                                <input class="neo-range-slider" type="range" id="dry_multiplier_textgenerationwebui" min="0" max="5" step="0.01" x-setting-id="dry_multiplier">
                                                <input class="neo-range-input" type="number" min="0" max="5" step="0.01" data-for="dry_multiplier_textgenerationwebui" id="dry_multiplier_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0" title="Controls how fast the penalty grows with increasing sequence length." data-i18n="[title]DRY_Base_desc">
                                                <small data-i18n="Base">Base</small>
                                                <input class="neo-range-slider" type="range" id="dry_base_textgenerationwebui" min="1" max="4" step="0.01" x-setting-id="dry_base">
                                                <input class="neo-range-input" type="number" min="1" max="4" step="0.01" data-for="dry_base_textgenerationwebui" id="dry_base_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0" title="Longest sequence that can be repeated without being penalized." data-i18n="[title]DRY_Allowed_Length_desc">
                                                <small data-i18n="Allowed Length">Allowed Length</small>
                                                <input class="neo-range-slider" type="range" id="dry_allowed_length_textgenerationwebui" min="1" max="20" step="1" x-setting-id="dry_allowed_length">
                                                <input class="neo-range-input" type="number" min="1" max="20" step="1" data-for="dry_allowed_length_textgenerationwebui" id="dry_allowed_length_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignItemsCenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0" data-tg-type="llamacpp, koboldcpp, tabby, aphrodite" style="display: none;">
                                                <small data-i18n="Penalty Range">Penalty Range</small>
                                                <input class="neo-range-slider" type="range" id="dry_penalty_last_n_textgenerationwebui" min="0" max="8192" step="1" x-setting-id="dry_penalty_last_n">
                                                <input class="neo-range-input" type="number" min="0" max="8192" step="1" data-for="dry_penalty_last_n_textgenerationwebui" id="dry_penalty_last_n_counter_textgenerationwebui">
                                            </div>
                                        </div>
                                        <div class="range-block marginTop5" title="Tokens across which sequence matching is not continued. Specified as a comma-separated list of quoted strings." data-i18n="[title]DRY_Sequence_Breakers_desc">
                                            <div class="range-block-title textAlignCenter">
                                                <small data-i18n="Sequence Breakers">Sequence Breakers</small>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="dry_sequence_breakers_textgenerationwebui" class="text_pole textarea_compact" name="sequence_breakers" rows="3" data-i18n="[placeholder]JSON-serialized array of strings." placeholder="JSON-serialized array of strings." x-setting-id="dry_sequence_breakers"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div data-tg-type="ooba, mancer, koboldcpp, tabby, llamacpp, aphrodite" id="dynatemp_block_ooba" class="wide100p">
                                        <h4 class="wide100p textAlignCenter">
                                            <div class="flex-container alignitemscenter justifyCenter">
                                                <div class="checkbox_label" for="dynatemp_textgenerationwebui">
                                                    <input type="checkbox" id="dynatemp_textgenerationwebui" x-setting-id="dynatemp">
                                                </div>
                                                <span class="textAlignCenter" data-i18n="Dynamic Temperature">Dynamic Temperature</span>
                                                <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Scale Temperature dynamically per token, based on the variation of probabilities" title="Scale Temperature dynamically per token, based on the variation of probabilities."></div>
                                            </div>
                                        </h4>
                                        <div class="flex-container flexFlowRow alignitemscenter gap10px flexShrink">
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <small data-i18n="Minimum Temp">Minimum Temp</small>
                                                <input class="neo-range-slider" type="range" id="min_temp_textgenerationwebui" name="volume" min="0" max="5" step="0.01" x-setting-id="min_temp">
                                                <input class="neo-range-input" type="number" min="0" max="5" step="0.01" data-for="min_temp_textgenerationwebui" id="min_temp_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <small data-i18n="Maximum Temp">Maximum Temp</small>
                                                <input class="neo-range-slider" type="range" id="max_temp_textgenerationwebui" name="volume" min="0" max="5" step="0.01" x-setting-id="max_temp">
                                                <input class="neo-range-input" type="number" min="0" max="5" step="0.01" data-for="max_temp_textgenerationwebui" id="max_temp_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <small data-i18n="Exponent">Exponent</small>
                                                <input class="neo-range-slider" type="range" id="dynatemp_exponent_textgenerationwebui" name="volume" min="0.01" max="10" step="0.01" x-setting-id="dynatemp_exponent">
                                                <input class="neo-range-input" type="number" min="0.01" max="10" step="0.01" data-for="dynatemp_exponent_textgenerationwebui" id="dynatemp_exponent_counter_textgenerationwebui">
                                            </div>
                                        </div>
                                    </div>
                                    <div data-tg-type="ooba,infermaticai,koboldcpp,llamacpp,mancer,ollama,tabby" id="mirostat_block_ooba" class="wide100p">
                                        <h4 class="wide100p textAlignCenter">
                                            <label data-i18n="Mirostat (mode=1 is only for llama.cpp)">Mirostat</label>
                                            <div class=" fa-solid fa-circle-info opacity50p " data-i18n="[title]Mirostat_desc" title="Mirostat is a thermostat for output perplexity.
Mirostat matches the output perplexity to that of the input, thus avoiding the repetition trap
(where, as the autoregressive inference produces text, the perplexity of the output tends toward zero)
and the confusion trap (where the perplexity diverges).
For details, see the paper Mirostat: A Neural Text Decoding Algorithm that Directly Controls Perplexity by Basu et al. (2020).
Mode chooses the Mirostat version. 0=disable, 1=Mirostat 1.0 (llama.cpp only), 2=Mirostat 2.0."></div>
                                        </h4>
                                        <div class="flex-container flexFlowRow gap10px flexShrink">
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <small data-i18n="Mirostat Mode">Mode</small>
                                                <input class="neo-range-slider" type="range" id="mirostat_mode_textgenerationwebui" name="volume" min="0" max="2" step="1" x-setting-id="mirostat_mode">
                                                <input class="neo-range-input" type="number" min="0" max="2" step="1" data-for="mirostat_mode_textgenerationwebui" id="mirostat_mode_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <label>
                                                    <small data-i18n="Mirostat Tau">Tau</small>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Variability parameter for Mirostat outputs" title="Variability parameter for Mirostat outputs."></div>
                                                </label>
                                                <input class="neo-range-slider" type="range" id="mirostat_tau_textgenerationwebui" name="volume" min="0" max="20" step="0.01" x-setting-id="mirostat_tau">
                                                <input class="neo-range-input" type="number" min="0" max="20" step="0.01" data-for="mirostat_tau_textgenerationwebui" id="mirostat_tau_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <label>
                                                    <small data-i18n="Mirostat Eta">Eta</small>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Learning rate of Mirostat" title="Learning rate of Mirostat."></div>
                                                </label>
                                                <input class="neo-range-slider" type="range" id="mirostat_eta_textgenerationwebui" name="volume" min="0" max="1" step="0.01" x-setting-id="mirostat_eta">
                                                <input class="neo-range-input" type="number" min="0" max="1" step="0.01" data-for="mirostat_eta_textgenerationwebui" id="mirostat_eta_counter_textgenerationwebui">
                                            </div>
                                        </div>
                                    </div>
                                    <div data-tg-type="ooba" id="beamSearchBlock" name="beamSearchBlock" class="wide100p">
                                        <h4 class="wide100p textAlignCenter">
                                            <label>
                                                <span data-i18n="Beam search">Beam Search</span>
                                                <div class=" fa-solid fa-circle-info opacity50p " title="A greedy, brute-force algorithm used in LLM sampling to find the most likely sequence of words or tokens. It expands multiple candidate sequences at once, maintaining a fixed number (beam width) of top sequences at each step." data-i18n="[title]A greedy, brute-force algorithm used in LLM sampling to find the most likely sequence of words or tokens. It expands multiple candidate sequences at once, maintaining a fixed number (beam width) of top sequences at each step."></div>
                                            </label>
                                        </h4>
                                        <div class="flex-container flexFlowRow alignitemscenter gap10px flexShrink">
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <label>
                                                    <small data-i18n="# of Beams"># of Beams</small>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]The number of sequences generated at each step with Beam Search." title="The number of sequences generated at each step with Beam Search."></div>
                                                </label>
                                                <input class="neo-range-slider" type="range" id="num_beams_textgenerationwebui" name="volume" min="1" max="20" step="1" x-setting-id="num_beams">
                                                <input class="neo-range-input" type="number" min="1" max="20" step="1" data-for="num_beams_textgenerationwebui" id="num_beams_counter_textgenerationwebui">
                                            </div>
                                            <div class="alignitemscenter flex-container marginBot5 flexFlowColumn flexGrow flexShrink gap0">
                                                <label>
                                                    <small data-i18n="Length Penalty">Length Penalty</small>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Penalize sequences based on their length." title="Penalize sequences based on their length."></div>
                                                </label>
                                                <input class="neo-range-slider" type="range" id="length_penalty_textgenerationwebui" name="volume" min="-5" max="5" step="0.1" x-setting-id="length_penalty">
                                                <input class="neo-range-input" type="number" min="-5" max="5" step="0.1" data-for="length_penalty_textgenerationwebui" id="length_penalty_counter_textgenerationwebui">
                                            </div>
                                            <div class="">
                                                <label class="checkbox_label" for="early_stopping_textgenerationwebui">
                                                    <input type="checkbox" id="early_stopping_textgenerationwebui" x-setting-id="early_stopping">
                                                    <small data-i18n="Early Stopping">Early Stopping</small>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Controls the stopping condition for beam search. If checked, the generation stops as soon as there are '# of Beams' sequences. If not checked, a heuristic is applied and the generation is stopped when it's very unlikely to find better candidates." title="Controls the stopping condition for beam search. If checked, the generation stops as soon as there are '# of Beams' sequences. If not checked, a heuristic is applied and the generation is stopped when it's very unlikely to find better candidates."></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div data-tg-type="ooba" id="contrastiveSearchBlock" name="contrastiveSearchBlock" class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                        <h4 class="textAlignCenter">
                                            <span data-i18n="Contrastive search">Contrastive Search</span>
                                            <div class=" fa-solid fa-circle-info opacity50p " data-i18n="Contrastive_search_txt" title="A sampler that encourages diversity while maintaining coherence, by exploiting the isotropicity of the representation space of most LLMs. For details, see the paper A Contrastive Framework for Neural Text Generation by Su et al. (2022)."></div>
                                        </h4>
                                        <div class="alignitemscenter flex-container flexFlowColumn wide100p gap0">
                                            <label>
                                                <small data-i18n="Penalty Alpha">Penalty Alpha</small>
                                                <div class="fa-solid fa-circle-info opacity50p " title="Strength of the Contrastive Search regularization term. Set to 0 to disable CS." data-i18n="[title]Strength of the Contrastive Search regularization term. Set to 0 to disable CS"></div>
                                            </label>
                                            <input class="neo-range-slider" type="range" id="penalty_alpha_textgenerationwebui" name="volume" min="0" max="5" step="0.05" x-setting-id="penalty_alpha">
                                            <input class="neo-range-input" type="number" min="0" max="5" step="0.05" data-for="penalty_alpha_textgenerationwebui" id="penalty_alpha_counter_textgenerationwebui">
                                        </div>
                                    </div>
                                    <div name="checkboxes" class="flex-container flexBasis48p justifyCenter flexGrow flexShrink ">
                                        <div class="flex-container flexFlowColumn marginTop5">
                                            <label data-tg-type="ooba" class="checkbox_label  flexGrow flexShrink" for="do_sample_textgenerationwebui">
                                                <input type="checkbox" id="do_sample_textgenerationwebui" x-setting-id="do_sample">
                                                <small data-i18n="Do Sample">Do Sample</small>
                                            </label>
                                            <label data-tg-type="ooba, tabby" class="checkbox_label  flexGrow flexShrink" for="add_bos_token_textgenerationwebui">
                                                <input type="checkbox" id="add_bos_token_textgenerationwebui" x-setting-id="add_bos_token">
                                                <label>
                                                    <small data-i18n="Add BOS Token">Add BOS Token</small>
                                                    <div class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Add the bos_token to the beginning of prompts. Disabling this can make the replies more creative" title="Add the bos_token to the beginning of prompts. Disabling this can make the replies more creative."></div>
                                                </label>
                                            </label>
                                            <label data-tg-type="ooba, llamacpp, tabby, koboldcpp" class="checkbox_label  flexGrow flexShrink" for="ban_eos_token_textgenerationwebui">
                                                <input type="checkbox" id="ban_eos_token_textgenerationwebui" x-setting-id="ban_eos_token">
                                                <label>
                                                    <small data-i18n="Ban EOS Token">Ban EOS Token</small>
                                                    <div class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Ban the eos_token. This forces the model to never end the generation prematurely" title="Ban the eos_token. This forces the model to never end the generation prematurely."></div>
                                                </label>
                                            </label>
                                            <label data-tg-type="vllm, aphrodite, infermaticai" class="checkbox_label" for="ignore_eos_token_textgenerationwebui" style="display: none;">
                                                <input type="checkbox" id="ignore_eos_token_textgenerationwebui" x-setting-id="ignore_eos_token">
                                                <small data-i18n="Ignore EOS Token">Ignore EOS Token</small>
                                                <div class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Ignore the EOS Token even if it generates." title="Ignore the EOS Token even if it generates."></div>
                                            </label>
                                            <label data-tg-type-mode="except" data-tg-type="generic" class="checkbox_label flexGrow flexShrink" for="skip_special_tokens_textgenerationwebui">
                                                <input type="checkbox" id="skip_special_tokens_textgenerationwebui" x-setting-id="skip_special_tokens">
                                                <small data-i18n="Skip Special Tokens">Skip Special Tokens</small>
                                            </label>
                                            <label data-tg-type="ooba, aphrodite, tabby" class="checkbox_label  flexGrow flexShrink" for="temperature_last_textgenerationwebui">
                                                <input type="checkbox" id="temperature_last_textgenerationwebui" x-setting-id="temperature_last">
                                                <label>
                                                    <small data-i18n="Temperature Last">Temperature Last</small>
                                                    <div class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Temperature_Last_desc" title="Use the temperature sampler last. This is almost always the sensible thing to do.
When enabled: sample the set of plausible tokens first, then apply temperature to adjust their relative probabilities (technically, logits).
When disabled: apply temperature to adjust the relative probabilities of ALL tokens first, then sample plausible tokens from that.
Disabling Temperature Last boosts the probabilities in the tail of the distribution, which tends to amplify the chances of getting an incoherent response."></div>
                                                </label>
                                            </label>
                                            <label data-tg-type="tabby" class="checkbox_label  flexGrow flexShrink" for="speculative_ngram_textgenerationwebui" style="display: none;">
                                                <input type="checkbox" id="speculative_ngram_textgenerationwebui" x-setting-id="speculative_ngram">
                                                <label>
                                                    <small data-i18n="Speculative Ngram">Speculative Ngram</small>
                                                    <div class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Use a different speculative decoding method without a draft model" title="Use a different speculative decoding method without a draft model.
Using a draft model is preferred. Speculative ngram is not as effective."></div>
                                                </label>
                                            </label>

                                            <label data-tg-type="vllm, aphrodite, infermaticai" class="checkbox_label" for="spaces_between_special_tokens_textgenerationwebui" style="display: none;">
                                                <input type="checkbox" id="spaces_between_special_tokens_textgenerationwebui" x-setting-id="spaces_between_special_tokens">
                                                <small data-i18n="Spaces Between Special Tokens">Spaces Between Special Tokens</small>
                                            </label>
                                        </div>
                                    </div>
                                    <div data-tg-type="mancer, ooba, koboldcpp, vllm, aphrodite, llamacpp, ollama, infermaticai, huggingface, generic" class="flex-container flexFlowColumn alignitemscenter flexBasis48p flexGrow flexShrink gap0" style="">
                                        <label>
                                            <small data-i18n="Seed">Seed</small>
                                            <div class="fa-solid fa-circle-info opacity50p " data-i18n="[title]Seed_desc" title="A random seed to use for deterministic and reproducable outputs. Set to -1 to use a random seed."></div>
                                        </label>
                                        <input type="number" id="seed_textgenerationwebui" class="text_pole textAlignCenter" min="-1" value="-1" x-setting-id="seed">
                                    </div>
                                    <div data-tg-type-mode="except" data-tg-type="generic" id="banned_tokens_block_ooba" class="wide100p">
                                        <hr class="width100p">
                                        <h4 class="range-block-title justifyCenter">
                                            <span data-i18n="Banned Tokens">Banned Tokens/Strings</span>
                                            <div class="margin5 fa-solid fa-circle-info opacity50p " data-i18n="[title]LLaMA / Mistral / Yi models only" title="Enter sequences you don't want to appear in the output.
Unquoted text will be tokenized in the back end and banned as tokens.
[token ids] will be banned as-is.
Most tokens have a leading space. Use token counter (with the correct tokenizer selected first!) if you are unsure.
Enclose text in double quotes to ban the entire string as a set.
Quoted Strings and [Token ids] must be on their own line."></div>
                                        </h4>
                                        <div class="wide100p">
                                            <textarea id="banned_tokens_textgenerationwebui" class="text_pole textarea_compact" name="banned_tokens_textgenerationwebui" rows="3" data-i18n="[placeholder]Example: some text [42, 69, 1337]" placeholder="some text as tokens
[420, 69, 1337]
&quot;Some verbatim string&quot;" x-setting-id="banned_tokens"></textarea>
                                        </div>
                                    </div>
                                    <div class="range-block wide100p">
                                        <div id="logit_bias_textgenerationwebui" class="range-block-title title_restorable" x-setting-id="logit_bias">
                                            <span data-i18n="Logit Bias">Logit Bias</span>
                                            <div id="textgen_logit_bias_new_entry" class="menu_button menu_button_icon interactable" tabindex="0">
                                                <i class="fa-xs fa-solid fa-plus"></i>
                                                <small data-i18n="Add">Add</small>
                                            </div>
                                        </div>
                                        <div class="toggle-description justifyLeft" data-i18n="Helps to ban or reenforce the usage of certain words">
                                            Helps to ban or reinforce the usage of certain tokens.
                                        </div>
                                        <div class="flex-container flexFlowColumn wide100p">
                                            <div class="logit_bias_list ui-sortable"></div>
                                        </div>
                                    </div>
                                    <div id="cfg_block_ooba" data-tg-type="ooba, tabby" class="wide100p">
                                        <hr class="width100p">
                                        <h4 class="textAlignCenter">
                                            <span data-i18n="CFG">CFG</span>
                                            <div class="margin5 fa-solid fa-circle-info opacity50p " data-i18n="[title]Classifier Free Guidance. More helpful tip coming soon" title="Classifier Free Guidance. More helpful tip coming soon."></div>
                                        </h4>
                                        <div class="alignitemscenter flex-container flexFlowColumn flexShrink gap0">
                                            <small data-i18n="Scale">Scale</small>
                                            <input class="neo-range-slider" type="range" id="guidance_scale_textgenerationwebui" name="volume" min="0.1" max="4" step="0.05" x-setting-id="guidance_scale">
                                            <input class="neo-range-input" type="number" min="0.1" max="4" step="0.05" data-for="guidance_scale_textgenerationwebui" id="guidance_scale_counter_textgenerationwebui">
                                        </div>
                                        <div class="range-block">
                                            <div class="range-block-title justifyLeft">
                                                <span data-i18n="Negative Prompt">Negative Prompt</span>
                                                <small>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Used if CFG Scale is unset globally, per chat or character" title="Used if CFG Scale is unset globally, per chat or character"></div>
                                                </small>
                                            </div>
                                            <div class="wide100p">
                                                <textarea id="negative_prompt_textgenerationwebui" class="text_pole textarea_compact" name="negative_prompt" rows="3" data-i18n="[placeholder]Add text here that would make the AI generate things you don't want in your outputs." placeholder="Add text here that would make the AI generate things you don't want in your outputs." x-setting-id="negative_prompt"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="grammar_block_ooba" data-tg-type="ooba,aphrodite" class="wide100p">
                                        <hr class="wide100p">
                                        <h4 class="wide100p textAlignCenter">
                                            <label>
                                                <span data-i18n="Grammar String">Grammar String</span>
                                                <div class="margin5 fa-solid fa-circle-info opacity50p " data-i18n="[title]GBNF or EBNF, depends on the backend in use. If you're using this you should know which." title="GBNF or EBNF, depends on the backend in use. If you're using this you should know which."></div>
                                                <a href="https://github.com/ggerganov/llama.cpp/blob/master/grammars/README.md" target="_blank">
                                                    <small>
                                                        <div class="fa-solid fa-up-right-from-square note-link-span"></div>
                                                    </small>
                                                </a>
                                            </label>
                                        </h4>
                                        <textarea id="grammar_string_textgenerationwebui" rows="4" class="text_pole textarea_compact monospace" data-i18n="[placeholder]Type in the desired custom grammar" placeholder="Type in the desired custom grammar" x-setting-id="grammar_string"></textarea>
                                    </div>
                                    <div id="json_schema_block" data-tg-type="tabby, llamacpp, aphrodite" class="wide100p" style="display: none;">
                                        <hr class="wide100p">
                                        <h4 class="wide100p textAlignCenter"><span data-i18n="JSON Schema">JSON Schema</span>
                                            <a href="https://json-schema.org/learn/getting-started-step-by-step" target="_blank">
                                                <small>
                                                    <div class="fa-solid fa-circle-question note-link-span"></div>
                                                </small>
                                            </a>
                                        </h4>
                                        <textarea id="tabby_json_schema" rows="4" class="text_pole textarea_compact monospace" data-i18n="[placeholder]Type in the desired JSON schema" placeholder="Type in the desired JSON schema"></textarea>
                                    </div>
                                    <div id="sampler_order_block_kcpp" data-tg-type="koboldcpp" class="range-block flexFlowColumn wide100p" style="display: none;">
                                        <hr class="wide100p">
                                        <div class="range-block-title">
                                            <span data-i18n="Samplers Order">Samplers Order</span>
                                        </div>
                                        <div class="toggle-description widthUnset" data-i18n="Samplers will be applied in a top-down order. Use with caution.">
                                            kcpp only. Samplers will be applied in a top-down order.
                                            Use with caution.
                                        </div>
                                        <div id="koboldcpp_order" class="prompt_order ui-sortable">
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                        <div data-id="6" class="ui-sortable-handle">
                                                <span data-i18n="Repetition Penalty">Repetition Penalty</span>
                                                <small>6</small>
                                            </div><div data-id="0" class="ui-sortable-handle">
                                                <span data-i18n="Top K">Top K</span>
                                                <small>0</small>
                                            </div><div data-id="1" class="ui-sortable-handle">
                                                <span data-i18n="Top A">Top A</span>
                                                <small>1</small>
                                            </div><div data-id="3" class="ui-sortable-handle">
                                                <span data-i18n="Tail Free Sampling">Tail Free Sampling</span>
                                                <small>3</small>
                                            </div><div data-id="4" class="ui-sortable-handle">
                                                <span data-i18n="Typical P">Typical P</span>
                                                <small>4</small>
                                            </div><div data-id="2" class="ui-sortable-handle">
                                                <span data-i18n="Top P &amp; Min P">Top P &amp; Min P</span>
                                                <small>2</small>
                                            </div><div data-id="5" class="ui-sortable-handle">
                                                <span data-i18n="Temperature">Temperature</span>
                                                <small>5</small>
                                            </div></div>
                                        <div id="koboldcpp_default_order" class="menu_button menu_button_icon interactable" tabindex="0">
                                            <span data-i18n="Load default order">Load default order</span>
                                        </div>
                                    </div>
                                    <div id="sampler_order_block_lcpp" data-tg-type="llamacpp" class="range-block flexFlowColumn wide100p" style="display: none;">
                                        <hr class="wide100p">
                                        <h4 class="range-block-title justifyCenter">
                                            <span data-i18n="Sampler Order">Sampler Order</span>
                                            <div class="margin5 fa-solid fa-circle-info opacity50p" data-i18n="[title]llama.cpp only. Determines the order of samplers. If Mirostat mode is not 0, sampler order is ignored." title="llama.cpp only. Determines the order of samplers. If Mirostat mode is not 0, sampler order is ignored."></div>
                                        </h4>
                                        <div class="toggle-description widthUnset" data-i18n="llama.cpp only. Determines the order of samplers. If Mirostat mode is not 0, sampler order is ignored.">
                                            llama.cpp only. Determines the order of samplers. If Mirostat mode is not 0, sampler order is ignored.
                                        </div>
                                        <div id="llamacpp_samplers_sortable" class="prompt_order ui-sortable">
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                        <div data-name="dry" draggable="true" class="ui-sortable-handle"><span>DRY</span><small></small></div><div data-name="top_k" draggable="true" class="ui-sortable-handle"><span>Top K</span><small></small></div><div data-name="tfs_z" draggable="true" class="ui-sortable-handle"><span>Tail Free Sampling</span><small></small></div><div data-name="typical_p" draggable="true" class="ui-sortable-handle"><span>Typical P</span><small></small></div><div data-name="top_p" draggable="true" class="ui-sortable-handle"><span>Top P</span><small></small></div><div data-name="min_p" draggable="true" class="ui-sortable-handle"><span>Min P</span><small></small></div><div data-name="xtc" draggable="true" class="ui-sortable-handle"><span>Exclude Top Choices</span><small></small></div><div data-name="temperature" draggable="true" class="ui-sortable-handle"><span>Temperature</span><small></small></div></div>
                                        <div id="llamacpp_samplers_default_order" class="menu_button menu_button_icon interactable" tabindex="0">
                                            <span data-i18n="Load default order">Load default order</span>
                                        </div>
                                    </div>
                                    <div id="sampler_priority_block_ooba" data-tg-type="ooba" class="range-block flexFlowColumn wide100p">
                                        <hr class="wide100p">
                                        <h4 class="range-block-title justifyCenter">
                                            <span data-i18n="Sampler Priority">Sampler Priority</span>
                                            <div class="margin5 fa-solid fa-circle-info opacity50p" title="Ooba only. Determines the order of samplers." data-i18n="[title]Ooba only. Determines the order of samplers."></div>
                                        </h4>
                                        <div class="toggle-description widthUnset" data-i18n="Ooba only. Determines the order of samplers.">
                                            Ooba only. Determines the order of samplers.
                                        </div>
                                        <div id="sampler_priority_container" class="prompt_order ui-sortable">
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                        <div data-name="repetition_penalty" draggable="true" class="ui-sortable-handle"><span>Repetition Penalty</span><small></small></div><div data-name="presence_penalty" draggable="true" class="ui-sortable-handle"><span>Presence Penalty</span><small></small></div><div data-name="frequency_penalty" draggable="true" class="ui-sortable-handle"><span>Frequency Penalty</span><small></small></div><div data-name="dry" draggable="true" class="ui-sortable-handle"><span>DRY</span><small></small></div><div data-name="temperature" draggable="true" class="ui-sortable-handle"><span>Temperature</span><small></small></div><div data-name="dynamic_temperature" draggable="true" class="ui-sortable-handle"><span>Dynamic Temperature</span><small></small></div><div data-name="quadratic_sampling" draggable="true" class="ui-sortable-handle"><span>Quadratic / Smooth Sampling</span><small></small></div><div data-name="top_k" draggable="true" class="ui-sortable-handle"><span>Top K</span><small></small></div><div data-name="top_p" draggable="true" class="ui-sortable-handle"><span>Top P</span><small></small></div><div data-name="typical_p" draggable="true" class="ui-sortable-handle"><span>Typical P</span><small></small></div><div data-name="epsilon_cutoff" draggable="true" class="ui-sortable-handle"><span>Epsilon Cutoff</span><small></small></div><div data-name="eta_cutoff" draggable="true" class="ui-sortable-handle"><span>Eta Cutoff</span><small></small></div><div data-name="tfs" draggable="true" class="ui-sortable-handle"><span>Tail Free Sampling</span><small></small></div><div data-name="top_a" draggable="true" class="ui-sortable-handle"><span>Top A</span><small></small></div><div data-name="min_p" draggable="true" class="ui-sortable-handle"><span>Min P</span><small></small></div><div data-name="mirostat" draggable="true" class="ui-sortable-handle"><span>Mirostat</span><small></small></div><div data-name="xtc" draggable="true" class="ui-sortable-handle"><span>XTC</span><small></small></div><div data-name="encoder_repetition_penalty" draggable="true" class="ui-sortable-handle"><span>Encoder Repetition Penalty</span><small></small></div><div data-name="no_repeat_ngram" draggable="true" class="ui-sortable-handle"><span>No Repeat Ngram</span><small></small></div></div>
                                        <div id="textgenerationwebui_default_order" class="menu_button menu_button_icon interactable" tabindex="0">
                                            <span data-i18n="Load default order">Load default order</span>
                                        </div>
                                    </div>
                                    <div id="sampler_priority_block_aphrodite" data-tg-type="aphrodite" class="range-block flexFlowColumn wide100p" style="display: none;">
                                        <hr class="wide100p">
                                        <h4 class="range-block-title justifyCenter">
                                            <span data-i18n="Sampler Order">Sampler Order</span>
                                            <div class="margin5 fa-solid fa-circle-info opacity50p" title="Aphrodite only. Determines the order of samplers. Skew is always applied post-softmax, so it's not included here." data-i18n="[title]Aphrodite only. Determines the order of samplers. Skew is always applied post-softmax, so it's not included here."></div>
                                        </h4>
                                        <div class="toggle-description widthUnset" data-i18n="Aphrodite only. Determines the order of samplers.">
                                            Aphrodite only. Determines the order of samplers.
                                        </div>
                                        <div id="sampler_priority_container_aphrodite" class="prompt_order ui-sortable">
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                            
                                        <div data-name="dry" draggable="true" class="ui-sortable-handle"><span>DRY</span><small></small></div><div data-name="penalties" draggable="true" class="ui-sortable-handle"><span>Penalties</span><small></small></div><div data-name="no_repeat_ngram" draggable="true" class="ui-sortable-handle"><span>No Repeat Ngram</span><small></small></div><div data-name="temperature" draggable="true" class="ui-sortable-handle"><span>Dynatemp &amp; Temperature</span><small></small></div><div data-name="top_nsigma" draggable="true" class="ui-sortable-handle"><span>Top Nsigma</span><small></small></div><div data-name="top_p_top_k" draggable="true" class="ui-sortable-handle"><span>Top P &amp; Top K</span><small></small></div><div data-name="top_a" draggable="true" class="ui-sortable-handle"><span>Top A</span><small></small></div><div data-name="min_p" draggable="true" class="ui-sortable-handle"><span>Min P</span><small></small></div><div data-name="tfs" draggable="true" class="ui-sortable-handle"><span>Tail-Free Sampling</span><small></small></div><div data-name="eta_cutoff" draggable="true" class="ui-sortable-handle"><span>Eta Cutoff</span><small></small></div><div data-name="epsilon_cutoff" draggable="true" class="ui-sortable-handle"><span>Epsilon Cutoff</span><small></small></div><div data-name="typical_p" draggable="true" class="ui-sortable-handle"><span>Typical P</span><small></small></div><div data-name="quadratic" draggable="true" class="ui-sortable-handle"><span>Cubic and Quadratic Sampling</span><small></small></div><div data-name="xtc" draggable="true" class="ui-sortable-handle"><span>XTC</span><small></small></div></div>
                                        <div id="aphrodite_default_order" class="menu_button menu_button_icon interactable" tabindex="0">
                                            <span data-i18n="Load default order">Load default order</span>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- end of textgen settings-->
                            <div id="openai_settings" style="display: block;">
                                <div class="">
                                    <div class="inline-drawer wide100p flexFlowColumn">
                                        <div class="inline-drawer-toggle inline-drawer-header">
                                            <div class="flex-container alignItemsCenter">
                                                <b data-i18n="Character Names Behavior">Character Names Behavior</b>
                                                <span title="Helps the model to associate messages with characters." data-i18n="[title]Helps the model to associate messages with characters." class="opacity50p fa-solid fa-circle-info"></span>
                                                <small class="flexBasis100p">(<span id="character_names_display">Default</span>)</small>
                                            </div>
                                            <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                        </div>
                                        <div class="inline-drawer-content">
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="character_names_none">
                                                <input type="radio" id="character_names_none" name="character_names" value="-1">
                                                <span data-i18n="None">None</span>
                                                <small class="flexBasis100p" data-i18n="character_names_none">
                                                    Never add character name prefixes. May behave poorly in groups, choose with caution.
                                                </small>
                                            </label>
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="character_names_default">
                                                <input type="radio" id="character_names_default" name="character_names" value="0">
                                                <span data-i18n="Default">Default</span>
                                                <small class="flexBasis100p" data-i18n="character_names_default">
                                                    Add prefixes for groups and past personas. Otherwise, make sure you provide names in the prompt.
                                                </small>
                                            </label>
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="character_names_completion">
                                                <input type="radio" id="character_names_completion" name="character_names" value="1">
                                                <span data-i18n="Completion Object">Completion Object</span>
                                                <small class="flexBasis100p" data-i18n="character_names_completion">
                                                    Add character names to completion objects. Restrictions apply: only Latin alphanumerics and underscores.
                                                </small>
                                            </label>
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="character_names_content">
                                                <input type="radio" id="character_names_content" name="character_names" value="2">
                                                <span data-i18n="Message Content">Message Content</span>
                                                <small class="flexBasis100p" data-i18n="Prepend character names to message contents.">
                                                    Prepend character names to message contents.
                                                </small>
                                            </label>
                                            <!-- Hidden input for loading radio buttons from presets. Don't remove! -->
                                            <input type="hidden" id="names_behavior" class="displayNone">
                                        </div>
                                    </div>
                                    <div class="inline-drawer wide100p flexFlowColumn marginBot10">
                                        <div class="inline-drawer-toggle inline-drawer-header">
                                            <div class="flex-container alignItemsCenter">
                                                <b data-i18n="Continue Postfix">Continue Postfix</b>
                                                <span data-i18n="[title]The next chunk of the continued message will be appended using this as a separator." title="The next chunk of the continued message will be appended using this as a separator." class="opacity50p fa-solid fa-circle-info"></span>
                                                <small class="flexBasis100p">(<span id="continue_postfix_display">Space</span>)</small>
                                            </div>
                                            <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                        </div>
                                        <div class="inline-drawer-content">
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="continue_postfix_none">
                                                <input type="radio" id="continue_postfix_none" name="continue_postfix" value="0">
                                                <span data-i18n="None">None</span>
                                            </label>
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="continue_postfix_space">
                                                <input type="radio" id="continue_postfix_space" name="continue_postfix" value="1">
                                                <span data-i18n="Space">Space</span>
                                            </label>
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="continue_postfix_newline">
                                                <input type="radio" id="continue_postfix_newline" name="continue_postfix" value="2">
                                                <span data-i18n="Newline">Newline</span>
                                            </label>
                                            <label class="checkbox_label flexWrap alignItemsCenter" for="continue_postfix_double_newline">
                                                <input type="radio" id="continue_postfix_double_newline" name="continue_postfix" value="3">
                                                <span data-i18n="Double Newline">Double Newline</span>
                                            </label>
                                            <!-- Hidden input for loading radio buttons from presets. Don't remove! -->
                                            <input type="hidden" id="continue_postfix" class="displayNone" value=" ">
                                        </div>
                                    </div>
                                    <div class="range-block">
                                        <label for="wrap_in_quotes" title="Wrap user messages in quotes before sending" data-i18n="[title]Wrap user messages in quotes before sending" class="checkbox_label widthFreeExpand">
                                            <input id="wrap_in_quotes" type="checkbox"><span data-i18n="Wrap in Quotes">
                                                Wrap in Quotes</span>
                                        </label>
                                        <div class="toggle-description justifyLeft">
                                            <span data-i18n="Wrap entire user message in quotes before sending.">Wrap
                                                entire user message in quotes before sending.</span><br>
                                            <span data-i18n="Leave off if you use quotes manually for speech.">Leave off
                                                if you use quotes manually for speech.</span>
                                        </div>
                                    </div>
                                    <div class="range-block">
                                        <label for="continue_prefill" class="checkbox_label widthFreeExpand">
                                            <input id="continue_prefill" type="checkbox">
                                            <span data-i18n="Continue prefill">Continue prefill</span>
                                        </label>
                                        <div class="toggle-description justifyLeft">
                                            <span data-i18n="Continue sends the last message as assistant role instead of system message with instruction.">
                                                Continue sends the last message as assistant role instead of system message with instruction.
                                            </span>
                                        </div>
                                    </div>
                                    <div class="range-block">
                                        <label for="squash_system_messages" title="Squash system messages" data-i18n="[title]Squash system messages" class="checkbox_label widthFreeExpand">
                                            <input id="squash_system_messages" type="checkbox">
                                            <span data-i18n="Squash system messages">
                                                Squash system messages
                                            </span>
                                        </label>
                                        <div class="toggle-description justifyLeft">
                                            <span data-i18n="Combines consecutive system messages into one (excluding example dialogues). May improve coherence for some models.">
                                                Combines consecutive system messages into one (excluding example dialogues). May improve coherence for some models.
                                            </span>
                                        </div>
                                    </div>
                                    <div class="range-block" data-source="openai,cohere,mistralai,custom,claude,openrouter,groq">
                                        <label for="openai_function_calling" class="checkbox_label flexWrap widthFreeExpand">
                                            <input id="openai_function_calling" type="checkbox">
                                            <span data-i18n="Enable function calling">Enable function calling</span>
                                            <div class="flexBasis100p toggle-description justifyLeft">
                                                <span data-i18n="enable_functions_desc_1">Allows using </span><a href="https://platform.openai.com/docs/guides/function-calling" target="_blank" data-i18n="enable_functions_desc_2">function tools</a>.
                                                <span data-i18n="enable_functions_desc_3">Can be utilized by various extensions to provide additional functionality.</span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="range-block" data-source="openai,openrouter,makersuite,claude,custom,01ai">
                                        <label for="openai_image_inlining" class="checkbox_label flexWrap widthFreeExpand">
                                            <input id="openai_image_inlining" type="checkbox">
                                            <span data-i18n="Send inline images">Send inline images</span>
                                            <div id="image_inlining_hint" class="flexBasis100p toggle-description justifyLeft">
                                                <span data-i18n="image_inlining_hint_1">Sends images in prompts if the model supports it (e.g. GPT-4V, Claude 3 or Llava 13B).
                                                    Use the</span> <code><i class="fa-solid fa-paperclip"></i></code> <span data-i18n="image_inlining_hint_2">action on any message or the</span>
                                                <code><i class="fa-solid fa-wand-magic-sparkles"></i></code> <span data-i18n="image_inlining_hint_3">menu to attach an image file to the chat.</span>
                                            </div>
                                        </label>
                                        <div class="flex-container flexFlowColumn wide100p textAlignCenter marginTop10" data-source="openai,custom">
                                            <label for="openai_inline_image_quality" data-i18n="Inline Image Quality">
                                                Inline Image Quality
                                            </label>
                                            <select id="openai_inline_image_quality">
                                                <option data-i18n="openai_inline_image_quality_auto" value="auto">Auto</option>
                                                <option data-i18n="openai_inline_image_quality_low" value="low">Low</option>
                                                <option data-i18n="openai_inline_image_quality_high" value="high">High</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="range-block" data-source="makersuite" style="display: none;">
                                        <label for="use_makersuite_sysprompt" class="checkbox_label widthFreeExpand">
                                            <input id="use_makersuite_sysprompt" type="checkbox">
                                            <span>
                                                <span data-i18n="Use system prompt">Use system prompt</span>
                                                <i class="opacity50p fa-solid fa-circle-info" title="Gemini 1.5/2.0 Pro/Flash"></i>
                                            </span>
                                        </label>
                                        <div class="toggle-description justifyLeft marginBot5">
                                            <span data-i18n="Merges_all_system_messages_desc_1">
                                                Merges all system messages up until the first message with a non-system role, and sends them in a</span> <code>system_instruction</code> <span data-i18n="Merges_all_system_messages_desc_2">field.
                                            </span>
                                        </div>
                                    </div>
                                    <div class="range-block" data-source="claude" style="display: none;">
                                        <div class="wide100p">
                                            <div class="flex-container alignItemsCenter">
                                                <span id="claude_assistant_prefill_text" data-i18n="Assistant Prefill">Assistant Prefill</span>
                                                <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="claude_assistant_prefill" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                            </div>
                                            <textarea id="claude_assistant_prefill" class="text_pole textarea_compact autoSetHeight" name="assistant_prefill" rows="2" data-i18n="[placeholder]Start Claude's answer with..." placeholder="Start Claude's answer with..." style="height: 3px;"></textarea>
                                            <div class="flex-container alignItemsCenter">
                                                <span id="claude_assistant_impersonation_text" data-i18n="Assistant Impersonation Prefill">Assistant Impersonation Prefill</span>
                                                <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="claude_assistant_impersonation" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                            </div>
                                            <textarea id="claude_assistant_impersonation" class="text_pole textarea_compact autoSetHeight" name="assistant_impersonation" rows="2" data-i18n="[placeholder]Start Claude's answer with..." placeholder="Start Claude's answer with..." style="height: 3px;"></textarea>
                                        </div>
                                        <div id="claude_function_prefill_warning">
                                            <i class="fa-solid fa-circle-info"></i>
                                            <span>Prefills won't work when function calling is enabled and any tools are registered.</span>
                                        </div>
                                        <label for="claude_use_sysprompt" class="checkbox_label widthFreeExpand">
                                            <input id="claude_use_sysprompt" type="checkbox">
                                            <span data-i18n="Use system prompt (Claude 2.1+ only)">
                                                Use system prompt (Claude 2.1+ only)
                                            </span>
                                        </label>
                                        <div class="toggle-description justifyLeft marginBot5">
                                            <span data-i18n="Send the system prompt for supported models. If disabled, the user message is added to the beginning of the prompt.">
                                                Send the system prompt for supported models. If disabled, the user message is added to the beginning of the prompt.
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block m-t-1" data-source="openai,openrouter,scale,custom">
                                    <div id="logit_bias_openai" class="range-block-title openai_restorable" data-i18n="Logit Bias">
                                        Logit Bias
                                    </div>
                                    <div class="toggle-description justifyLeft">
                                        <span data-i18n="Helps to ban or reenforce the usage of certain words">Helps to ban or reinforce the usage of certain tokens.</span>
                                        <span data-i18n="Confirm token parsing with">Confirm token parsing with</span>
                                        <a target="_blank" href="https://platform.openai.com/tokenizer/" data-i18n="Tokenizer">Tokenizer</a>.
                                    </div>
                                    <div class="openai_logit_bias_preset_form">
                                        <select id="openai_logit_bias_preset"><option value="Default (none)">Default (none)</option><option value="Anti-bond">Anti-bond</option></select>
                                        <i title="New preset" id="openai_logit_bias_new_preset" class="menu_button fa-solid fa-plus interactable" data-i18n="[title]New preset" tabindex="0"></i>
                                        <i title="Import preset" id="openai_logit_bias_import_preset" class="menu_button fa-solid fa-file-import interactable" data-i18n="[title]Import preset" tabindex="0"></i>
                                        <i title="Export preset" id="openai_logit_bias_export_preset" class="menu_button fa-solid fa-file-export interactable" data-i18n="[title]Export preset" tabindex="0"></i>
                                        <i title="Delete preset" id="openai_logit_bias_delete_preset" class="menu_button fa-solid fa-trash-can interactable" data-i18n="[title]Delete preset" tabindex="0"></i>
                                        <input id="openai_logit_bias_import_file" type="file" accept=".json" hidden="">
                                    </div>
                                    <div class="inline-drawer wide100p">
                                        <div class="inline-drawer-toggle inline-drawer-header">
                                            <b data-i18n="View / Edit bias preset">View / Edit bias preset</b>
                                            <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                        </div>
                                        <div class="inline-drawer-content">
                                            <div id="openai_logit_bias_new_entry" class="menu_button wide100p flex-container justifyCenter interactable" data-i18n="Add bias entry" tabindex="0">
                                                Add bias entry
                                            </div>
                                            <div class="openai_logit_bias_list ui-sortable" no_items_text="No items" data-i18n="[no_items_text]openai_logit_bias_no_items"></div>
                                            <div class="m-t-1">
                                                <small>
                                                    <i class="fa-solid fa-lightbulb"></i>
                                                    &nbsp;
                                                    <span data-i18n="Most tokens have a leading space.">
                                                        Most tokens have a leading space.
                                                    </span>
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="range-block m-b-1">
                                    <div id="completion_prompt_manager"><div class="range-block">
    <div class="completion_prompt_manager_header">
        <div class="completion_prompt_manager_header_advanced">
            <span data-i18n="Prompts">Prompts</span>
        </div>
        <div><span data-i18n="Total Tokens:">Total Tokens:</span> 0 </div>
    </div><div class="completion_prompt_manager_footer">
    <select name="append-prompt" class="text_pole" id="completion_prompt_manager_footer_append_prompt">
        
    </select>
    <a data-i18n="[title]Insert prompt" title="Insert prompt" class="menu_button fa-chain fa-solid fa-fw interactable" target="_blank" rel="noopener" tabindex="0"></a>
    <a data-i18n="[title]Delete prompt" title="Delete prompt" class="caution menu_button fa-x fa-solid fa-fw interactable" target="_blank" rel="noopener" tabindex="0"></a>
    <a data-i18n="[title]Import a prompt list" title="Import a prompt list" id="prompt-manager-import" class="menu_button fa-file-import fa-solid fa-fw interactable" target="_blank" rel="noopener" tabindex="0"></a>
    <a data-i18n="[title]Export this prompt list" title="Export this prompt list" id="prompt-manager-export" class="menu_button fa-file-export fa-solid fa-fw interactable" target="_blank" rel="noopener" tabindex="0"></a>
    <a data-i18n="[title]Reset current character" title="Reset current character" id="prompt-manager-reset-character" class="menu_button fa-undo fa-solid fa-fw interactable" target="_blank" rel="noopener" tabindex="0"></a>
    <a data-i18n="[title]New prompt" title="New prompt" class="menu_button fa-plus-square fa-solid fa-fw interactable" target="_blank" rel="noopener" tabindex="0"></a>
</div>

    <ul class="text_pole ui-sortable" id="completion_prompt_manager_list"><li class="completion_prompt_manager_list_head">
    <span data-i18n="Name">Name</span>
    <span></span>
    <span data-i18n="Tokens;prompt_manager_tokens" class="prompt_manager_prompt_tokens">Tokens</span>
</li>
<li class="completion_prompt_manager_list_separator">
    <hr>
</li>

                
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="worldInfoBefore">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="World Info (before)">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="World Info (before)" class="prompt-manager-inspect-action">World Info (before)</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li><li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable ui-sortable-handle" data-pm-identifier="main" style="">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Main Prompt">
                        
                        <span class="fa-fw fa-solid fa-square-poll-horizontal" title="Global Prompt"></span>
                        
                        
                        
                        <a title="Main Prompt" class="prompt-manager-inspect-action">Main Prompt</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="personaDescription">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Persona Description">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="Persona Description" class="prompt-manager-inspect-action">Persona Description</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="charDescription">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Char Description">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="Char Description" class="prompt-manager-inspect-action">Char Description</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="charPersonality">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Char Personality">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="Char Personality" class="prompt-manager-inspect-action">Char Personality</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="scenario">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Scenario">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="Scenario" class="prompt-manager-inspect-action">Scenario</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_prompt_disabled ui-sortable-handle" data-pm-identifier="enhanceDefinitions">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Enhance Definitions">
                        
                        <span class="fa-fw fa-solid fa-square-poll-horizontal" title="Global Prompt"></span>
                        
                        
                        
                        <a title="Enhance Definitions" class="prompt-manager-inspect-action">Enhance Definitions</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-off"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable ui-sortable-handle" data-pm-identifier="nsfw">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Auxiliary Prompt">
                        
                        <span class="fa-fw fa-solid fa-square-poll-horizontal" title="Global Prompt"></span>
                        
                        
                        
                        <a title="Auxiliary Prompt" class="prompt-manager-inspect-action">Auxiliary Prompt</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="worldInfoAfter">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="World Info (after)">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="World Info (after)" class="prompt-manager-inspect-action">World Info (after)</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="dialogueExamples">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Chat Examples">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="Chat Examples" class="prompt-manager-inspect-action">Chat Examples</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                <span class="fa-solid"></span>
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable completion_prompt_manager_marker ui-sortable-handle" data-pm-identifier="chatHistory">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Chat History">
                        <span class="fa-fw fa-solid fa-thumb-tack" title="Marker"></span>
                        
                        
                        
                        
                        <a title="Chat History" class="prompt-manager-inspect-action">Chat History</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                <span class="fa-solid"></span>
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            
                <li class="completion_prompt_manager_prompt completion_prompt_manager_prompt_draggable ui-sortable-handle" data-pm-identifier="jailbreak">
                    <span class="completion_prompt_manager_prompt_name" data-pm-name="Post-History Instructions">
                        
                        <span class="fa-fw fa-solid fa-square-poll-horizontal" title="Global Prompt"></span>
                        
                        
                        
                        <a title="Post-History Instructions" class="prompt-manager-inspect-action">Post-History Instructions</a>
                        
                        
                    </span>
                    <span>
                            <span class="prompt_manager_prompt_controls">
                                <span class="fa-solid"></span>
                                
                    <span title="edit" class="prompt-manager-edit-action fa-solid fa-pencil"></span>
                
                                
                    <span class="prompt-manager-toggle-action fa-solid fa-toggle-on"></span>
                
                            </span>
                    </span>

                    <span class="prompt_manager_prompt_tokens" data-pm-tokens="-"><span class="" title=""> </span>-</span>
                </li>
            </ul>
<div class="list-group" id="prompt-manager-export-format-popup" style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(517px, 544px);" data-popper-placement="bottom">
        <div class="prompt-manager-export-format-popup-flex">
            <div class="row">
                <a data-i18n="Export all" class="export-promptmanager-prompts-full list-group-item" target="_blank" rel="noopener">Export all</a>
                <span title="Export all your prompts to a file" data-i18n="[title]Export all your prompts to a file" class="tooltip fa-solid fa-info-circle"></span>
            </div>
        </div>
</div>
</div>
</div>
                                </div>
                            </div><!-- end of OpenAI settings-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sys-settings-button" class="drawer">
            <div class="drawer-toggle drawer-header">
                <div id="API-status-top" class="drawer-icon fa-solid fa-fw interactable fa-plug-circle-exclamation redOverlayGlow closedIcon" title="API Connections" data-i18n="[title]API Connections;[no_connection_text]api_no_connection" no_connection_text="No connection..." tabindex="0"></div>
            </div>
            <div id="rm_api_block" class="drawer-content closedDrawer" data-slide-toggle="hidden" style="display: none;"><div class="wide100p">
    <div class="flex-container alignItemsBaseline">
        <h3 class="margin0">
            <span data-i18n="Connection Profile">Connection Profile</span>
            <a class="notes-link" href="https://docs.sillytavern.app/usage/core-concepts/connection-profiles" target="_blank" rel="noopener">
                <span class="fa-solid fa-circle-question note-link-span"></span>
            </a>
        </h3>
        <i class="fa-solid fa-spinner fa-spin hidden" id="connection_profile_spinner"></i>
    </div>
    <div class="flex-container">
        <select id="connection_profiles" class="text_pole flex1"><option value="">&lt;None&gt;</option></select>
        <i data-i18n="[title]View connection profile details" title="View connection profile details" class="menu_button fa-solid fa-info-circle interactable" id="view_connection_profile" tabindex="0"></i>
        <i data-i18n="[title]Create a new connection profile" title="Create a new connection profile" class="menu_button fa-solid fa-file-circle-plus interactable" id="create_connection_profile" tabindex="0"></i>
        <i data-i18n="[title]Update a connection profile" title="Update a connection profile" class="menu_button fa-solid fa-save disabled interactable" id="update_connection_profile" data-original-tabindex="null"></i>
        <i data-i18n="[title]Edit a connection profile" title="Edit a connection profile" class="menu_button fa-solid fa-pencil interactable" id="edit_connection_profile" tabindex="0"></i>
        <i data-i18n="[title]Reload a connection profile" title="Reload a connection profile" class="menu_button fa-solid fa-recycle disabled interactable" id="reload_connection_profile" data-original-tabindex="null"></i>
        <i data-i18n="[title]Delete a connection profile" title="Delete a connection profile" class="menu_button fa-solid fa-trash-can disabled interactable" id="delete_connection_profile" data-original-tabindex="null"></i>
    </div>
    <div class="hidden" id="connection_profile_details_content"></div>
</div>

                <h3 class="margin0" id="title_api">API</h3>
                <div class="flex-container flexFlowColumn">
                    <div id="main-API-selector-block">
                        <select id="main_api">
                            <option value="textgenerationwebui" data-i18n="Text Completion">Text Completion</option>
                            <option value="openai" data-i18n="Chat Completion">Chat Completion</option>
                            <option value="novel" data-i18n="NovelAI">NovelAI</option>
                            <option value="koboldhorde" data-i18n="AI Horde" selected="selected">AI Horde</option>
                            <option value="kobold" data-i18n="KoboldAI">KoboldAI Classic</option>
                        </select>
                    </div>
                    <div id="kobold_horde" style="position: relative; display: none;"> <!-- shows the kobold settings -->
                        <form action="javascript:void(null);" method="post" enctype="multipart/form-data">
                            <div id="kobold_horde_block">
                                <ul>
                                    <li>
                                        <a target="_blank" href="https://aihorde.net/" data-i18n="AI Horde Website">
                                            AI Horde Website
                                        </a>
                                    </li>
                                    <li>
                                        <span data-i18n="Avoid sending sensitive information to the Horde.">Avoid sending sensitive information to the Horde.</span>
                                        <a target="_blank" href="https://docs.sillytavern.app/usage/api-connections/horde/" data-i18n="Review the Privacy statement">
                                            Review the Privacy statement
                                        </a>
                                    </li>
                                    <li>
                                        <a target="_blank" href="https://aihorde.net/register" data-i18n="Register a Horde account for faster queue times">
                                            Register a Horde account for faster queue times
                                        </a>
                                    </li>
                                    <li>
                                        <a target="_blank" href="https://github.com/Haidra-Org/horde-worker-reGen?tab=readme-ov-file#ai-horde-worker-regen" data-i18n="Learn how to contribute your idle GPU cycles to the Horde">
                                            Learn how to contribute your idle GPU cycles to the Horde
                                        </a>
                                    </li>
                                </ul>
                                <label for="horde_auto_adjust_context_length" class="checkbox_label">
                                    <input id="horde_auto_adjust_context_length" type="checkbox">
                                    <span data-i18n="Adjust context size to worker capabilities">Adjust context size to worker capabilities</span>
                                </label>
                                <label for="horde_auto_adjust_response_length" class="checkbox_label">
                                    <input id="horde_auto_adjust_response_length" type="checkbox">
                                    <span data-i18n="Adjust response length to worker capabilities">Adjust response length to worker capabilities</span>
                                </label>
                                <label for="horde_trusted_workers_only" class="checkbox_label" title="Can help with bad responses by queueing only the approved workers. May slowdown the response time." data-i18n="[title]Can help with bad responses by queueing only the approved workers. May slowdown the response time.">
                                    <input id="horde_trusted_workers_only" type="checkbox">
                                    <span data-i18n="Trusted workers only">Trusted workers only</span>
                                </label>
                                <small id="adjustedHordeParams">Context: --, Response: --</small>
                                <h4 data-i18n="API key">API key</h4>
                                <small>
                                    <span data-i18n="Get it here:">Get it here: </span> <a target="_blank" href="https://aihorde.net/register" data-i18n="Register">Register</a> (<a id="horde_kudos" href="javascript:void(0);" data-i18n="View my Kudos">View my Kudos</a>)<br>
                                    <span data-i18n="Enter">Enter </span> <span class="monospace">0000000000</span> <span data-i18n="to use anonymous mode.">to use anonymous mode. </span>
                                </small>
                                <div class="flex-container">
                                    <input id="horde_api_key" name="horde_api_key" class="text_pole flex1" type="text" placeholder="❌ Missing key" autocomplete="off">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_horde" tabindex="0"></div>
                                </div>
                                <div data-for="horde_api_key" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <h4 class="horde_model_title">
                                    <span data-i18n="Models">Models </span>
                                    <div id="horde_refresh" title="Refresh models" data-i18n="[title]Refresh models" class="right_menu_button interactable" tabindex="0">
                                        <div class="fa-solid fa-repeat "></div>
                                    </div>
                                </h4>
                                <select id="horde_model" multiple="" data-select2-id="select2-data-horde_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true"><option value="koboldcpp/L3-8B-Stheno-v3.2">koboldcpp/L3-8B-Stheno-v3.2 (ETA: 21s, Speed: 35.1, Queue: 4444, Workers: 6)</option><option value="koboldcpp/NeuralDaredevil-8B-abliterated">koboldcpp/NeuralDaredevil-8B-abliterated (ETA: 82s, Speed: 3.9, Queue: 960, Workers: 3)</option><option value="koboldcpp/Cydonia-v1.3-Magnum-v4-22B">koboldcpp/Cydonia-v1.3-Magnum-v4-22B (ETA: 55s, Speed: 18.4, Queue: 3056, Workers: 3)</option><option value="koboldcpp/Meta-Llama-3.1-8B-Instruct">koboldcpp/Meta-Llama-3.1-8B-Instruct (ETA: 36s, Speed: 17.3, Queue: 1272, Workers: 2)</option><option value="koboldcpp/Ministrations-8B-v1">koboldcpp/Ministrations-8B-v1 (ETA: 0s, Speed: 16.3, Queue: 0, Workers: 2)</option><option value="aphrodite/KoboldAI/LLaMA2-13B-Estopia">aphrodite/KoboldAI/LLaMA2-13B-Estopia (ETA: 22s, Speed: 13.3, Queue: 2344, Workers: 8)</option><option value="koboldcpp/Qwen2.5-Coder-32B-Instruct-abliterated">koboldcpp/Qwen2.5-Coder-32B-Instruct-abliterated (ETA: 59s, Speed: 12.1, Queue: 721, Workers: 1)</option><option value="koboldcpp/NemoMix-Unleashed-12B">koboldcpp/NemoMix-Unleashed-12B (ETA: 43s, Speed: 9.3, Queue: 400, Workers: 1)</option><option value="aphrodite/knifeayumu/Cydonia-v1.3-Magnum-v4-22B">aphrodite/knifeayumu/Cydonia-v1.3-Magnum-v4-22B (ETA: 89s, Speed: 5.7, Queue: 3065, Workers: 6)</option><option value="Henk717/airochronos-33B">Henk717/airochronos-33B (ETA: 783s, Speed: 2.7, Queue: 2115, Workers: 1)</option><option value="koboldcpp/Llama-3.2-3B-Instruct">koboldcpp/Llama-3.2-3B-Instruct (ETA: 578s, Speed: 2.2, Queue: 1272, Workers: 1)</option><option value="koboldcpp/llama3.8b.l3-lunaris-v1.gguf_v2.q4_k_m">koboldcpp/llama3.8b.l3-lunaris-v1.gguf_v2.q4_k_m (ETA: 71s, Speed: 55.5, Queue: 3956, Workers: 1)</option><option value="koboldcpp/L3-8B-Stheno-v3.3-32K-NEO-V1-D_AU-Q6_K-imat13">koboldcpp/L3-8B-Stheno-v3.3-32K-NEO-V1-D_AU-Q6_K-imat13 (ETA: 0s, Speed: 27.6, Queue: 0, Workers: 1)</option><option value="tabbyAPI/PocketDoc/Dans-PersonalityEngine-V1.1.0-12b">tabbyAPI/PocketDoc/Dans-PersonalityEngine-V1.1.0-12b (ETA: 0s, Speed: 26.3, Queue: 0, Workers: 4)</option><option value="koboldcpp/Gemma-2-Ataraxy-v4d-9B.i1-Q4_K_S">koboldcpp/Gemma-2-Ataraxy-v4d-9B.i1-Q4_K_S (ETA: 32s, Speed: 19.5, Queue: 1272, Workers: 2)</option><option value="koboldcpp/mini-magnum-12b-v1.1-iMat-Q4_K_M">koboldcpp/mini-magnum-12b-v1.1-iMat-Q4_K_M (ETA: 94s, Speed: 16.6, Queue: 1572, Workers: 1)</option><option value="koboldcpp/timecrystal-l2-13b.Q8_0">koboldcpp/timecrystal-l2-13b.Q8_0 (ETA: 0s, Speed: 16, Queue: 0, Workers: 1)</option><option value="koboldcpp/Q25-1.5B-VeoLu-Q8_0">koboldcpp/Q25-1.5B-VeoLu-Q8_0 (ETA: 0s, Speed: 15.4, Queue: 0, Workers: 1)</option><option value="koboldcpp/EVA-LLaMA-3.33-70B-v0.0-Q4_K_M">koboldcpp/EVA-LLaMA-3.33-70B-v0.0-Q4_K_M (ETA: 305s, Speed: 12.1, Queue: 3692, Workers: 1)</option><option value="koboldcpp/tinyllama">koboldcpp/tinyllama (ETA: 0s, Speed: 9.4, Queue: 0, Workers: 1)</option><option value="koboldcpp/Hathor_Sofit-L3-8B">koboldcpp/Hathor_Sofit-L3-8B (ETA: 47s, Speed: 8.4, Queue: 400, Workers: 1)</option><option value="koboldcpp/Llama-3.1-8B-Stheno-v3.4-Q8_0-imat">koboldcpp/Llama-3.1-8B-Stheno-v3.4-Q8_0-imat (ETA: 378s, Speed: 6.2, Queue: 2344, Workers: 1)</option><option value="tabbyAPI/Behemoth-123B-v1.2-4.25bpw-h8-exl2">tabbyAPI/Behemoth-123B-v1.2-4.25bpw-h8-exl2 (ETA: 1031s, Speed: 5.7, Queue: 5880, Workers: 1)</option><option value="koboldcpp/NekoMix-12B">koboldcpp/NekoMix-12B (ETA: 0s, Speed: 5.1, Queue: 0, Workers: 1)</option><option value="koboldcpp/Llama-3.2-1B-Instruct-Uncensored.Q4_K_M">koboldcpp/Llama-3.2-1B-Instruct-Uncensored.Q4_K_M (ETA: 171s, Speed: 3.7, Queue: 1272, Workers: 2)</option><option value="koboldcpp/LLaMA2-13B-Estopia.Q4_K_M">koboldcpp/LLaMA2-13B-Estopia.Q4_K_M (ETA: 1156s, Speed: 2.2, Queue: 2544, Workers: 1)</option></select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-2-9kdv" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--multiple" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="-1" aria-disabled="false"><ul class="select2-selection__rendered" id="select2-horde_model-container"></ul><span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="0" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" autocomplete="off" aria-label="Search" aria-describedby="select2-horde_model-container" placeholder="Select Horde models" style="width: 100%;"></textarea></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                            <div class="online_status">
                                <div class="online_status_indicator"></div>
                                <div data-i18n="Not connected..." class="online_status_text">No connection...</div>
                            </div>
                        </form>
                    </div>
                    <div id="kobold_api" style="position: relative; display: none;"> <!-- shows the kobold settings -->
                        <form action="javascript:void(null);" method="post" enctype="multipart/form-data">
                            <div id="kobold_api_block">
                                <h4 data-i18n="API url">API url</h4>
                                <small data-i18n="Example: http://127.0.0.1:5000/api ">Example: http://127.0.0.1:5000/api </small>
                                <input id="api_url_text" name="api_url" class="text_pole ui-autocomplete-input" placeholder="http://127.0.0.1:5000/api" value="" autocomplete="off" data-server-history="kobold">
                                <div id="koboldcpp_hint" class="neutral_warning displayNone">
                                    KoboldCpp works better when you select the Text Completion API and then KoboldCpp as a type!
                                </div>
                                <div class="flex-container">
                                    <div id="api_button" class="api_button menu_button menu_button_icon interactable" type="submit" data-i18n="Connect" data-server-connect="kobold" tabindex="0">Connect</div>
                                    <div class="api_loading menu_button menu_button_icon interactable" data-i18n="Cancel" style="display: none;" tabindex="0">Cancel</div>
                                </div>
                            </div>
                            <div class="online_status">
                                <div class="online_status_indicator"></div>
                                <div class="online_status_text" data-i18n="Not connected...">No connection...</div>
                            </div>
                        </form>
                    </div>
                    <div id="novel_api" style="display: none;position: relative;"> <!-- shows the novel settings -->
                        <form action="javascript:void(null);" method="post" enctype="multipart/form-data">
                            <h4 data-i18n="Novel API key">Novel API key</h4>
                            <span>
                                <ol>
                                    <li>
                                        <a href="https://docs.sillytavern.app/usage/api-connections/novelai/" class="notes-link" target="_blank"> <span data-i18n="Get your NovelAI API Key">Get your NovelAI API key</span></a>
                                    </li>
                                    <li><span data-i18n="Enter it in the box below">Enter it in the box below:</span>
                                    </li>
                                </ol>
                            </span>
                            <div class="flex-container">
                                <input id="api_key_novel" name="api_key_novel" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_novel" tabindex="0">
                                </div>
                            </div>
                            <div data-for="api_key_novel" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <h4><span data-i18n="Novel AI Model">Novel AI Model</span>
                                <a href="https://docs.sillytavern.app/usage/api-connections/novelai/#models" class="notes-link" target="_blank">
                                    <span class="fa-solid fa-circle-question note-link-span"></span>
                                </a>
                            </h4>
                            <select id="model_novel_select">
                                <option value="clio-v1">Clio</option>
                                <option value="kayra-v1">Kayra</option>
                                <option value="llama-3-erato-v1">Erato</option>
                            </select>
                            <div class="flex-container">
                                <div id="api_button_novel" class="api_button menu_button menu_button_icon interactable" type="submit" data-i18n="Connect" tabindex="0">Connect</div>
                                <div class="api_loading menu_button menu_button_icon interactable" data-i18n="Cancel" style="display: none;" tabindex="0">Cancel</div>
                            </div>
                        </form>
                        <div class="online_status">
                            <div class="online_status_indicator"></div>
                            <div class="online_status_text" data-i18n="No connection...">No connection...</div>
                        </div>
                    </div>
                    <div id="textgenerationwebui_api" style="display: none;position: relative;">
                        <form action="javascript:void(null);" method="post" enctype="multipart/form-data">
                            <div>
                                <h4 data-i18n="API Type">API Type</h4>
                                <select id="textgen_type">
                                    <option value="aphrodite">Aphrodite</option>
                                    <option value="dreamgen">DreamGen</option>
                                    <option value="featherless">Featherless</option>
                                    <option value="generic" data-i18n="Generic (OpenAI-compatible) [LM Studio, LiteLLM, etc.]">Generic (OpenAI-compatible) [LM Studio, LiteLLM, etc.]</option>
                                    <option value="huggingface">HuggingFace (Inference Endpoint)</option>
                                    <option value="infermaticai">InfermaticAI</option>
                                    <option value="koboldcpp">KoboldCpp</option>
                                    <option value="llamacpp">llama.cpp</option>
                                    <option value="mancer">Mancer</option>
                                    <option value="ollama">Ollama</option>
                                    <option value="openrouter">OpenRouter</option>
                                    <option value="tabby">TabbyAPI</option>
                                    <option value="ooba">Text Generation WebUI (oobabooga)</option>
                                    <option value="togetherai">TogetherAI</option>
                                    <option value="vllm">vLLM</option>
                                </select>
                            </div>
                            <div data-tg-type="togetherai" class="flex-container flexFlowColumn" style="display: none;">
                                <h4 data-i18n="TogetherAI API Key">TogetherAI API Key</h4>
                                <div class="flex-container">
                                    <input id="api_key_togetherai" name="api_key_togetherai" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_togetherai" tabindex="0"></div>
                                </div>
                                <div data-for="api_key_togetherai" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div>
                                    <h4 data-i18n="TogetherAI Model">TogetherAI Model</h4>
                                    <select id="model_togetherai_select" data-select2-id="select2-data-model_togetherai_select" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-6-16vz">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-5-asj8" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-model_togetherai_select-container" aria-controls="select2-model_togetherai_select-container"><span class="select2-selection__rendered" id="select2-model_togetherai_select-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                            </div>
                            <div data-tg-type="openrouter" class="flex-container flexFlowColumn" style="display: none;">
                                <h4 data-i18n="OpenRouter API Key">OpenRouter API Key</h4>
                                <div>
                                    <small data-i18n="Click Authorize below or get the key from">
                                        Click "Authorize" below or get the key from </small> <a target="_blank" href="https://openrouter.ai/keys/">OpenRouter</a>.
                                    <br>
                                    <a href="https://openrouter.ai/account" target="_blank" data-i18n="View Remaining Credits">View Remaining Credits</a>
                                </div>
                                <div class="flex-container">
                                    <input id="api_key_openrouter-tg" name="api_key_openrouter" class="text_pole flex1 api_key_openrouter" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_openrouter" tabindex="0"></div>
                                </div>
                                <div data-for="api_key_openrouter" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div>
                                    <h4 data-i18n="OpenRouter Model">OpenRouter Model</h4>
                                    <select id="openrouter_model" data-select2-id="select2-data-openrouter_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-16-9qz9">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-15-hv7d" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-openrouter_model-container" aria-controls="select2-openrouter_model-container"><span class="select2-selection__rendered" id="select2-openrouter_model-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                                <div>
                                    <h4 data-i18n="Model Providers">Model Providers</h4>
                                    <select id="openrouter_providers_text" class="openrouter_providers select2-hidden-accessible" multiple="" data-select2-id="select2-data-openrouter_providers_text" tabindex="-1" aria-hidden="true">
                                    <option value="OpenAI">OpenAI</option><option value="Anthropic">Anthropic</option><option value="Google">Google</option><option value="Google AI Studio">Google AI Studio</option><option value="Amazon Bedrock">Amazon Bedrock</option><option value="Groq">Groq</option><option value="SambaNova">SambaNova</option><option value="Cohere">Cohere</option><option value="Mistral">Mistral</option><option value="Together">Together</option><option value="Together 2">Together 2</option><option value="Fireworks">Fireworks</option><option value="DeepInfra">DeepInfra</option><option value="Lepton">Lepton</option><option value="Novita">Novita</option><option value="Avian">Avian</option><option value="Lambda">Lambda</option><option value="Azure">Azure</option><option value="Modal">Modal</option><option value="AnyScale">AnyScale</option><option value="Replicate">Replicate</option><option value="Perplexity">Perplexity</option><option value="Recursal">Recursal</option><option value="OctoAI">OctoAI</option><option value="DeepSeek">DeepSeek</option><option value="Infermatic">Infermatic</option><option value="AI21">AI21</option><option value="Featherless">Featherless</option><option value="Inflection">Inflection</option><option value="xAI">xAI</option><option value="Cloudflare">Cloudflare</option><option value="SF Compute">SF Compute</option><option value="01.AI">01.AI</option><option value="HuggingFace">HuggingFace</option><option value="Mancer">Mancer</option><option value="Mancer 2">Mancer 2</option><option value="Hyperbolic">Hyperbolic</option><option value="Hyperbolic 2">Hyperbolic 2</option><option value="Lynn 2">Lynn 2</option><option value="Lynn">Lynn</option><option value="Reflection">Reflection</option></select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-21-9rm0" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--multiple" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="-1" aria-disabled="false"><ul class="select2-selection__rendered" id="select2-openrouter_providers_text-container"></ul><span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="0" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" autocomplete="off" aria-label="Search" aria-describedby="select2-openrouter_providers_text-container" placeholder="Select providers. No selection = all providers." style="width: 100%;"></textarea></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                    <label class="checkbox_label" for="openrouter_allow_fallbacks_textgenerationwebui" title="Automatically chooses an alternative provider if chosen providers can't serve your request.">
                                        <input id="openrouter_allow_fallbacks_textgenerationwebui" type="checkbox" x-setting-id="openrouter_allow_fallbacks">
                                        <span data-i18n="Allow fallback providers">Allow fallback providers</span>
                                    </label>
                                </div>
                            </div>
                            <div data-tg-type="infermaticai" class="flex-container flexFlowColumn" style="display: none;">
                                <h4 data-i18n="InfermaticAI API Key">InfermaticAI API Key</h4>
                                <div class="flex-container">
                                    <input id="api_key_infermaticai" name="api_key_infermaticai" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_infermaticai" tabindex="0"></div>
                                </div>
                                <div data-for="api_key_infermaticai" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div>
                                    <h4 data-i18n="InfermaticAI Model">InfermaticAI Model</h4>
                                    <select id="model_infermaticai_select" data-select2-id="select2-data-model_infermaticai_select" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-12-yqpq">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-11-f9dl" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-model_infermaticai_select-container" aria-controls="select2-model_infermaticai_select-container"><span class="select2-selection__rendered" id="select2-model_infermaticai_select-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                            </div>
                            <div data-tg-type="dreamgen" class="flex-container flexFlowColumn" style="display: none;">
                                <h4>
                                    <span data-i18n="DreamGen API key">DreamGen API key</span>
                                    <a href="https://docs.sillytavern.app/usage/api-connections/dreamgen/" class="notes-link" target="_blank">
                                        <span class="fa-solid fa-circle-question note-link-span"></span>
                                    </a>
                                </h4>
                                <div class="flex-container">
                                    <input id="api_key_dreamgen" name="api_key_dreamgen" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_dreamgen" tabindex="0"></div>
                                </div>
                                <div data-for="api_key_dreamgen" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div>
                                    <h4 data-i18n="DreamGen Model">DreamGen Model</h4>
                                    <select id="model_dreamgen_select" data-select2-id="select2-data-model_dreamgen_select" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-14-zdug">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-13-l382" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-model_dreamgen_select-container" aria-controls="select2-model_dreamgen_select-container"><span class="select2-selection__rendered" id="select2-model_dreamgen_select-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                            </div>
                            <div data-tg-type="mancer" class="flex-container flexFlowColumn" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                </div>
                                <h4>
                                    <span data-i18n="Mancer API key">Mancer API key</span>
                                    <a href="https://mancer.tech/" class="notes-link" target="_blank">
                                        <span class="fa-solid fa-circle-question note-link-span"></span>
                                    </a>
                                </h4>
                                <div class="flex-container">
                                    <input id="api_key_mancer" name="api_key_mancer" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_mancer" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_mancer" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="Mancer Model">Mancer Model</h4>
                                    <select id="mancer_model" data-select2-id="select2-data-mancer_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-4-o95a">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-3-6pd9" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-mancer_model-container" aria-controls="select2-mancer_model-container"><span class="select2-selection__rendered" id="select2-mancer_model-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                            </div>
                            <div data-tg-type="generic" class="flex-container flexFlowColumn" style="display: none;">
                                <h4 data-i18n="API key (optional)">API key (optional)</h4>
                                <div class="flex-container">
                                    <input id="api_key_generic" name="api_key_generic" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_generic" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_generic" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="Server url">Server URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:5000">Example: http://127.0.0.1:5000</small>
                                    <input id="generic_api_url_text" name="generic_api_url" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="generic">
                                </div>
                                <datalist id="generic_model_fill"></datalist>
                                <input id="generic_model_textgenerationwebui" list="generic_model_fill" class="text_pole wide100p" placeholder="Model ID (optional)" data-i18n="[placeholder]Model ID (optional)" type="text" x-setting-id="generic_model">
                            </div>
                            <div data-tg-type="ooba" class="flex-container flexFlowColumn">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/oobabooga/text-generation-webui" target="_blank">
                                        oobabooga/text-generation-webui
                                    </a>
                                    <label for="">
                                        <span data-i18n="Make sure you run it with">Make sure you run it with</span>
                                        <code>--api</code>
                                        <span data-i18n="flag">flag</span>
                                    </label>

                                </div>
                                <h4 data-i18n="API key (optional)">API key (optional)</h4>
                                <div class="flex-container">
                                    <input id="api_key_ooba" name="api_key_ooba" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_ooba" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_ooba" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="Server url">Server URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:5000">Example: http://127.0.0.1:5000</small>
                                    <input id="textgenerationwebui_api_url_text" name="textgenerationwebui_api_url" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="ooba_blocking">
                                </div>
                                <input id="custom_model_textgenerationwebui" class="text_pole wide100p" placeholder="Custom model (optional)" data-i18n="[placeholder]Custom model (optional)" type="text" x-setting-id="custom_model">
                            </div>
                            <div data-tg-type="featherless" class="flex-container flexFlowColumn" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://featherless.ai/models/" target="_blank" rel="noopener noreferrer">
                                        featherless.ai
                                    </a>
                                </div>
                                <h4 data-i18n="API key (optional)">API key</h4>
                                <div class="flex-container">
                                    <input id="api_key_featherless" name="api_key_featherless" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_featherless" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_featherless" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <hr>
                                <h4 data-i18n="Featherless Model Selection">Featherless Model Selection</h4>
                                <div class="flex-container wide100p flexGap10">
                                    <div class="flex1 overflowHidden wide100p">
                                        <div class="flex-container marginBot10 alignitemscenter">
                                            <input id="featherless_model_search_bar" class="text_pole width100p flex1 margin0" type="search" data-i18n="[placeholder]Search..." placeholder="Search...">
                                            <select id="featherless_model_sort_order" class="margin0 text_pole">
                                                <option value="search" data-i18n="Search" hidden="">A-Z</option>
                                                <option value="asc">A-Z</option>
                                                <option value="desc">Z-A</option>
                                                <option value="date_asc">Date Asc</option>
                                                <option value="date_desc">Date Desc</option>
                                            </select>
                                            <select id="featherless_category_selection" class="text_pole">
                                                <option value="" disabled="" selected="" data-i18n="category">category</option>
                                                <!-- <option value="Favorite" data-i18n="Top">Favorite</option> -->
                                                <option value="Top" data-i18n="Top">Top</option>
                                                <option value="New" data-i18n="New">New</option>
                                                <option value="All" data-i18n="All">All</option>
                                            </select>
                                            <select id="featherless_class_selection" class="text_pole">
                                                <option value="" selected="" data-i18n="class">All Classes</option>
                                            </select>
                                            <div id="featherless_model_pagination_container" class="flex1"></div>
                                            <i id="featherless_model_grid_toggle" class="fa-solid fa-table-cells-large menu_button interactable" data-i18n="[title]Toggle grid view" title="Toggle grid view" tabindex="0"></i>
                                        </div>
                                        <div id="featherless_model_card_block" data-i18n="[no_desc_text]No model description" no_desc_text="[No description]" class="list-view"></div>
                                    </div>
                                </div>
                                <!-- Do not remove. Needed for the /model command to function -->
                                <select id="featherless_model" class="displayNone">
                                    <option value="" data-i18n="-- Connect to the API --">
                                        -- Connect to the API --
                                    </option>
                                </select>
                            </div>
                            <div data-tg-type="vllm" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/vllm-project/vllm" target="_blank" data-i18n="vllm-project/vllm">
                                        vllm-project/vllm (OpenAI API wrapper mode)
                                    </a>
                                </div>
                                <h4 data-i18n="vLLM API key">vLLM API key</h4>
                                <div class="flex-container">
                                    <input id="api_key_vllm" name="api_key_vllm" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_vllm" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_vllm" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="API url">API URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:8000">Example: http://127.0.0.1:8000</small>
                                    <input id="vllm_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="vllm">
                                </div>
                                <div>
                                    <h4 data-i18n="vLLM Model">vLLM Model</h4>
                                    <select id="vllm_model" data-select2-id="select2-data-vllm_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-18-zhuu">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-17-zcua" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-vllm_model-container" aria-controls="select2-vllm_model-container"><span class="select2-selection__rendered" id="select2-vllm_model-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                            </div>
                            <div data-tg-type="huggingface" style="display: none;">
                                <h4 data-i18n="HuggingFace Token">HuggingFace Token</h4>
                                <div class="flex-container">
                                    <input id="api_key_huggingface" name="api_key_huggingface" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_huggingface" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_huggingface" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="Endpoint URL">Endpoint URL</h4>
                                    <small data-i18n="Example: https://****.endpoints.huggingface.cloud">Example: https://****.endpoints.huggingface.cloud</small>
                                    <input id="huggingface_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="huggingface">
                                </div>
                            </div>

                            <div data-tg-type="aphrodite" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/PygmalionAI/aphrodite-engine" target="_blank" data-i18n="PygmalionAI/aphrodite-engine">
                                        PygmalionAI/aphrodite-engine (OpenAI API wrapper mode)
                                    </a>
                                </div>
                                <h4 data-i18n="Aphrodite API key">Aphrodite API key</h4>
                                <div class="flex-container">
                                    <input id="api_key_aphrodite" name="api_key_aphrodite" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_aphrodite" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_aphrodite" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="API url">API URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:5000">Example: http://127.0.0.1:5000</small>
                                    <input id="aphrodite_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="aphrodite">
                                </div>
                                <div>
                                    <h4 data-i18n="Aphrodite Model">Aphrodite Model</h4>
                                    <select id="aphrodite_model" data-select2-id="select2-data-aphrodite_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-20-pvg8">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-19-5cnn" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-aphrodite_model-container" aria-controls="select2-aphrodite_model-container"><span class="select2-selection__rendered" id="select2-aphrodite_model-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                </div>
                            </div>
                            <div data-tg-type="llamacpp" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/ggerganov/llama.cpp" target="_blank" data-i18n="ggerganov/llama.cpp">
                                        ggerganov/llama.cpp (inference server)
                                    </a>
                                </div>
                                <h4 data-i18n="API key (optional)">API key (optional)</h4>
                                <div class="flex-container">
                                    <input id="api_key_llamacpp" name="api_key_llamacpp" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_llamacpp" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_llamacpp" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="API url">API URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:8080">Example: http://127.0.0.1:8080</small>
                                    <input id="llamacpp_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="llamacpp">
                                </div>
                            </div>
                            <div data-tg-type="ollama" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/jmorganca/ollama" target="_blank">
                                        jmorganca/ollama
                                    </a>
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="API url">API URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:11434">Example: http://127.0.0.1:11434</small>
                                    <input id="ollama_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="ollama">
                                </div>
                                <div class="flex1">
                                    <h4>
                                        <span data-i18n="Ollama Model">Ollama Model</span>
                                    </h4>
                                    <select id="ollama_model" data-select2-id="select2-data-ollama_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-8-jsds">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-7-izh3" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-ollama_model-container" aria-controls="select2-ollama_model-container"><span class="select2-selection__rendered" id="select2-ollama_model-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                    <div id="ollama_download_model" class="menu_button menu_button_icon interactable" tabindex="0">
                                        <i class="fa-solid fa-download"></i>
                                        <span data-i18n="Download">Download</span>
                                    </div>
                                </div>
                            </div>
                            <div data-tg-type="tabby" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/theroyallab/tabbyAPI" target="_blank">
                                        theroyallab/tabbyAPI
                                    </a>
                                </div>
                                <h4 data-i18n="Tabby API key">Tabby API key</h4>
                                <div class="flex-container">
                                    <input id="api_key_tabby" name="api_key_tabby" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_tabby" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_tabby" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="API url">API URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:5000">Example: http://127.0.0.1:5000</small>
                                    <input id="tabby_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="tabby">
                                </div>
                                <div class="flex1">
                                    <h4>
                                        <span data-i18n="Tabby Model">Tabby Model</span>
                                    </h4>
                                    <select id="tabby_model" data-select2-id="select2-data-tabby_model" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                        <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-10-t6sa">
                                            -- Connect to the API --
                                        </option>
                                    </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-9-gdbq" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-tabby_model-container" aria-controls="select2-tabby_model-container"><span class="select2-selection__rendered" id="select2-tabby_model-container" role="textbox" aria-readonly="true" title="[Currently loaded]"><span class="select2-selection__placeholder">[Currently loaded]</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                    <div class="marginTopBot5">
                                        <i class="fa-solid fa-flask"></i>
                                        <span>Experimental feature. Use at your own risk.</span>
                                    </div>
                                    <div class="marginTopBot5">
                                        <small>
                                            <i class="fa-solid fa-lightbulb"></i>
                                            &nbsp;
                                            <code>inline_model_loading: True</code>
                                            <span data-i18n="must be set in Tabby's config.yml to switch models.">
                                                must be set in Tabby's config.yml to switch models.
                                            </span>
                                            <b data-i18n="Use an admin API key.">
                                                Use an admin API key.
                                            </b>
                                        </small>
                                    </div>
                                    <div id="tabby_download_model" class="menu_button menu_button_icon interactable" tabindex="0">
                                        <i class="fa-solid fa-download"></i>
                                        <span data-i18n="Download">Download</span>
                                    </div>
                                </div>
                            </div>
                            <div data-tg-type="koboldcpp" style="display: none;">
                                <div class="flex-container flexFlowColumn">
                                    <a href="https://github.com/LostRuins/koboldcpp" target="_blank">
                                        LostRuins/koboldcpp
                                    </a>
                                </div>
                                <h4 data-i18n="koboldcpp API key (optional)">koboldcpp API key (optional)</h4>
                                <div class="flex-container">
                                    <input id="api_key_koboldcpp" name="api_key_koboldcpp" class="text_pole flex1 wide100p" type="text" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_koboldcpp" tabindex="0">
                                    </div>
                                </div>
                                <div data-for="api_key_koboldcpp" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <div class="flex1">
                                    <h4 data-i18n="API url">API URL</h4>
                                    <small data-i18n="Example: 127.0.0.1:5001">Example: http://127.0.0.1:5001</small>
                                    <input id="koboldcpp_api_url_text" class="text_pole wide100p ui-autocomplete-input" value="" autocomplete="off" data-server-history="koboldcpp">
                                </div>
                            </div>
                            <div class="flex-container flexFlowColumn marginTopBot5">
                                <label data-tg-type="ooba, generic" class="checkbox_label" for="bypass_status_check_textgenerationwebui">
                                    <input type="checkbox" id="bypass_status_check_textgenerationwebui" x-setting-id="bypass_status_check">
                                    <span data-i18n="Bypass status check">Bypass status check</span>
                                </label>
                                <label data-tg-type="koboldcpp, llamacpp" class="checkbox_label" for="context_size_derived" style="display: none;">
                                    <input type="checkbox" id="context_size_derived">
                                    <span data-i18n="Derive context size from backend">Derive context size from backend</span>
                                </label>
                            </div>
                            <div class="flex-container">
                                <div id="api_button_textgenerationwebui" class="api_button menu_button menu_button_icon interactable" type="submit" data-i18n="Connect" data-server-connect="ooba_blocking,vllm,aphrodite,tabby,koboldcpp,ollama,llamacpp,huggingface" tabindex="0">Connect</div>
                                <div data-tg-type="openrouter" class="menu_button menu_button_icon openrouter_authorize interactable" title="Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai" data-i18n="Authorize;[title]Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai" style="display: none;" tabindex="0">Authorize</div>
                                <div class="api_loading menu_button menu_button_icon interactable" data-i18n="Cancel" style="display: none;" tabindex="0">Cancel</div>
                            </div>
                        </form>
                        <div class="online_status">
                            <div class="online_status_indicator"></div>
                            <div class="online_status_text" data-i18n="Not connected...">No connection...</div>
                        </div>
                    </div>
                    <div id="openai_api" style="display: block; position: relative;">
                        <h4 class="margin0" data-i18n="Chat Completion Source">
                            Chat Completion Source
                        </h4>
                        <select id="chat_completion_source">
                            <optgroup>
                                <option value="openai">OpenAI</option>
                                <option value="custom" data-i18n="Custom (OpenAI-compatible)">Custom (OpenAI-compatible)</option>
                            </optgroup>
                            <optgroup>
                                <option value="01ai">01.AI (Yi)</option>
                                <option value="ai21">AI21</option>
                                <option value="blockentropy">Block Entropy</option>
                                <option value="claude">Claude</option>
                                <option value="cohere">Cohere</option>
                                <option value="groq">Groq</option>
                                <option value="makersuite">Google AI Studio</option>
                                <option value="mistralai">MistralAI</option>
                                <option value="nanogpt">NanoGPT</option>
                                <option value="openrouter">OpenRouter</option>
                                <option value="perplexity">Perplexity</option>
                                <option value="scale">Scale</option>
                                <option value="windowai">Window AI</option>
                            </optgroup>
                        </select>
                        <div class="inline-drawer wide100p" data-source="openai,claude,mistralai,makersuite">
                            <div class="inline-drawer-toggle inline-drawer-header">
                                <b data-i18n="Reverse Proxy">Reverse Proxy</b>
                                <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                            </div>
                            <div class="inline-drawer-content">
                                <div class="range-block-title justifyLeft" data-i18n="Proxy Presets">
                                    Proxy Presets
                                </div>
                                <div class="toggle-description justifyLeft">
                                    <span data-i18n="Saved addresses and passwords.">
                                        Saved addresses and passwords.
                                    </span>
                                    <br>
                                </div>
                                <div class="openai_logit_bias_preset_form">
                                    <select id="openai_proxy_preset"><option value="None">None</option></select>
                                    <i id="save_proxy" class="menu_button fa-solid fa-save interactable" title="Save Proxy" data-i18n="[title]Save Proxy" tabindex="0"></i>
                                    <i id="delete_proxy" class="menu_button fa-solid fa-trash interactable" title="Delete Proxy" data-i18n="[title]Delete Proxy" tabindex="0"></i>
                                </div>
                                <div class="range-block-title justifyLeft" data-i18n="Proxy Name">
                                    Proxy Name
                                </div>
                                <div class="toggle-description justifyLeft">
                                    <span data-i18n="This will show up as your saved preset.">
                                        This will show up as your saved preset.
                                    </span>
                                    <br>
                                </div>
                                <div class="wide100p">
                                    <input id="openai_reverse_proxy_name" type="text" class="text_pole" placeholder="...">
                                </div>
                                <div class="range-block-title justifyLeft" data-i18n="Proxy Server URL">
                                    Proxy Server URL
                                </div>
                                <div class="toggle-description justifyLeft wide100p">
                                    <span data-i18n="Alternative server URL (leave empty to use the default value).">
                                        Alternative server URL (leave empty to use the default value).
                                    </span>
                                    <br>
                                </div>
                                <div class="wide100p">
                                    <input id="openai_reverse_proxy" type="text" class="text_pole" placeholder="https://api.openai.com/v1">
                                    <small class="reverse_proxy_warning" style="display: none;">
                                        <span data-i18n="Doesn't work? Try adding">Doesn't work? Try adding</span> <code>/v1</code> <span data-i18n="at the end!">at the end!</span>
                                    </small>
                                </div>
                                <div class="range-block-title justifyLeft" data-i18n="Proxy Password">
                                    Proxy Password
                                </div>
                                <div class="toggle-description justifyLeft">
                                    <span data-i18n="Will be used as a password for the proxy instead of API key.">
                                        Will be used as a password for the proxy instead of API key.
                                    </span>
                                    <br>
                                </div>
                                <div class="flex-container width100p">
                                    <input id="openai_proxy_password" type="password" class="text_pole flex1" placeholder="" form="openai_form" autocomplete="off">
                                    <div id="openai_proxy_password_show" title="Peek a password" data-i18n="[title]Peek a password" class="menu_button fa-solid fa-eye-slash fa-fw interactable" tabindex="0"></div>
                                </div>
                            </div>
                        </div>
                        <div id="ReverseProxyWarningMessage" data-source="openai,claude,mistralai,makersuite" style="display: block;">
                            <div class="reverse_proxy_warning" style="display: none;">
                                <b>
                                    <div data-i18n="Using a proxy that you're not running yourself is a risk to your data privacy.">
                                        Using a proxy that you're not running yourself is a risk to your data privacy.
                                    </div>
                                    <div data-i18n="ANY support requests will be REFUSED if you are using a proxy.">
                                        ANY support requests will be REFUSED if you are using a proxy.
                                    </div>
                                    <hr>
                                    <i data-i18n="Do not proceed if you do not agree to this!">
                                        Do not proceed if you do not agree to this!
                                    </i>
                                </b>
                            </div>
                        </div>
                        <form id="openai_form" data-source="openai" action="javascript:void(null);" method="post" enctype="multipart/form-data">
                            <h4><span data-i18n="OpenAI API key">OpenAI API key</span></h4>
                            <div>
                                <a id="openai_api_usage" href="https://platform.openai.com/account/usage" target="_blank">
                                    <span data-i18n="View API Usage Metrics">View API Usage Metrics</span>
                                </a>
                            </div>
                            <span>
                                <ol>
                                    <li>
                                        <span data-i18n="Follow">Follow</span>
                                        <a href="https://docs.sillytavern.app/usage/api-connections/openai/" class="notes-link" target="_blank"><span data-i18n="these directions"> these directions </span></a>
                                        <span data-i18n="to get your OpenAI API key.">to get your OpenAI API key.</span>
                                    </li>
                                    <li>
                                        <span data-i18n="Enter it in the box below">Enter it in the box below:</span>
                                    </li>
                                </ol>
                            </span>
                            <div class="flex-container">
                                <input id="api_key_openai" name="api_key_openai" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_openai" tabindex="0"></div>
                            </div>
                            <div id="ReverseProxyWarningMessage2" class="reverse_proxy_warning" style="display: none;">
                                <b data-i18n="Use Proxy password field instead. This input will be ignored.">
                                    Use "Proxy password" field instead. This input will be ignored.
                                </b>
                            </div>
                            <div data-for="api_key_openai" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="OpenAI Model">OpenAI Model</h4>
                                <select id="model_openai_select">
                                    <optgroup label="GPT-3.5 Turbo">
                                        <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
                                        <option value="gpt-3.5-turbo-0125">gpt-3.5-turbo-0125 (2024)</option>
                                        <option value="gpt-3.5-turbo-1106">gpt-3.5-turbo-1106 (2023)</option>
                                        <option value="gpt-3.5-turbo-0613">gpt-3.5-turbo-0613 (2023)</option>
                                        <option value="gpt-3.5-turbo-0301">gpt-3.5-turbo-0301 (2023)</option>
                                        <option value="gpt-3.5-turbo-16k">gpt-3.5-turbo-16k</option>
                                        <option value="gpt-3.5-turbo-16k-0613">gpt-3.5-turbo-16k-0613 (2023)</option>
                                    </optgroup>
                                    <optgroup label="GPT-3.5 Turbo Instruct">
                                        <option value="gpt-3.5-turbo-instruct">gpt-3.5-turbo-instruct</option>
                                        <option value="gpt-3.5-turbo-instruct-0914">gpt-3.5-turbo-instruct-0914</option>
                                    </optgroup>
                                    <optgroup label="GPT-4">
                                        <option value="gpt-4">gpt-4</option>
                                        <option value="gpt-4-0613">gpt-4-0613 (2023)</option>
                                        <option value="gpt-4-0314">gpt-4-0314 (2023)</option>
                                        <option value="gpt-4-32k">gpt-4-32k</option>
                                        <option value="gpt-4-32k-0613">gpt-4-32k-0613 (2023)</option>
                                        <option value="gpt-4-32k-0314">gpt-4-32k-0314 (2023)</option>
                                    </optgroup>
                                    <optgroup label="GPT-4o">
                                        <option value="gpt-4o">gpt-4o</option>
                                        <option value="gpt-4o-2024-11-20">gpt-4o-2024-11-20</option>
                                        <option value="gpt-4o-2024-08-06">gpt-4o-2024-08-06</option>
                                        <option value="gpt-4o-2024-05-13">gpt-4o-2024-05-13</option>
                                        <option value="chatgpt-4o-latest">chatgpt-4o-latest</option>
                                    </optgroup>
                                    <optgroup label="gpt-4o-mini">
                                        <option value="gpt-4o-mini">gpt-4o-mini</option>
                                        <option value="gpt-4o-mini-2024-07-18">gpt-4o-mini-2024-07-18</option>
                                    </optgroup>
                                    <optgroup label="GPT-4 Turbo">
                                        <option value="gpt-4-turbo" selected="selected">gpt-4-turbo</option>
                                        <option value="gpt-4-turbo-2024-04-09">gpt-4-turbo-2024-04-09</option>
                                        <option value="gpt-4-turbo-preview">gpt-4-turbo-preview</option>
                                        <option value="gpt-4-vision-preview">gpt-4-vision-preview</option>
                                        <option value="gpt-4-0125-preview">gpt-4-0125-preview (2024)</option>
                                        <option value="gpt-4-1106-preview">gpt-4-1106-preview (2023)</option>
                                    </optgroup>
                                    <optgroup label="o1">
                                        <option value="o1-preview">o1-preview</option>
                                        <option value="o1-mini">o1-mini</option>
                                    </optgroup>
                                    <optgroup label="Other">
                                        <option value="text-davinci-003">text-davinci-003</option>
                                        <option value="text-davinci-002">text-davinci-002</option>
                                        <option value="text-curie-001">text-curie-001</option>
                                        <option value="text-babbage-001">text-babbage-001</option>
                                        <option value="text-ada-001">text-ada-001</option>
                                        <option value="code-davinci-002">code-davinci-002</option>
                                    </optgroup>
                                    <optgroup id="openai_external_category" label="External" style="display: none;">
                                    </optgroup>
                                </select>
                                <label for="openai_bypass_status_check" class="checkbox_label">
                                    <input id="openai_bypass_status_check" type="checkbox">
                                    <span data-i18n="Bypass API status check">Bypass API status check</span>
                                </label>
                                <label for="openai_show_external_models" class="checkbox_label">
                                    <input id="openai_show_external_models" type="checkbox">
                                    <span data-i18n="Show External models (provided by API)">Show "External" models (provided by API)</span>
                                </label>
                            </div>
                        </form>
                        <form id="claude_form" data-source="claude" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <h4 data-i18n="Claude API Key">Claude API Key</h4>
                            <div>
                                <span data-i18n="Get your key from">Get your key from </span> <a target="_blank" href="https://console.anthropic.com/account/keys" data-i18n="Anthropic's developer console">Anthropic's developer console</a>.
                            </div>
                            <div class="flex-container">
                                <input id="api_key_claude" name="api_key_claude" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_claude" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_claude" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="Claude Model">Claude Model</h4>
                                <select id="model_claude_select">
                                    <optgroup label="Versions">
                                        <option value="claude-3-5-sonnet-latest">claude-3-5-sonnet-latest</option>
                                        <option value="claude-3-5-sonnet-20241022">claude-3-5-sonnet-20241022</option>
                                        <option value="claude-3-5-sonnet-20240620" selected="selected">claude-3-5-sonnet-20240620</option>
                                        <option value="claude-3-5-haiku-latest">claude-3-5-haiku-latest</option>
                                        <option value="claude-3-5-haiku-20241022">claude-3-5-haiku-20241022</option>
                                        <option value="claude-3-opus-20240229">claude-3-opus-20240229</option>
                                        <option value="claude-3-sonnet-20240229">claude-3-sonnet-20240229</option>
                                        <option value="claude-3-haiku-20240307">claude-3-haiku-20240307</option>
                                        <option value="claude-2.1">claude-2.1</option>
                                        <option value="claude-2.0">claude-2.0</option>
                                    </optgroup>
                                </select>
                            </div>
                        </form>
                        <form id="windowai_form" data-source="windowai" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <div>
                                <h4 data-i18n="Window AI Model">Window AI Model</h4>
                                <select id="model_windowai_select">
                                    <option value="" selected="selected">Use extension settings</option>
                                    <option value="openai/gpt-3.5-turbo">openai/gpt-3.5-turbo</option>
                                    <option value="openai/gpt-3.5-turbo-16k">openai/gpt-3.5-turbo-16k</option>
                                    <option value="openai/gpt-4">openai/gpt-4</option>
                                    <option value="openai/gpt-4-32k">openai/gpt-4-32k</option>
                                    <option value="anthropic/claude-instant-v1">anthropic/claude-instant-v1</option>
                                    <option value="anthropic/claude-instant-v1-100k">anthropic/claude-instant-v1-100k</option>
                                    <option value="anthropic/claude-v1">anthropic/claude-v1</option>
                                    <option value="anthropic/claude-v1-100k">anthropic/claude-v1-100k</option>
                                    <option value="google/palm-2-chat-bison">google/palm-2-chat-bison</option>
                                    <option value="google/palm-2-codechat-bison">google/palm-2-codechat-bison</option>
                                    <option value="togethercomputer/GPT-NeoXT-Chat-Base-20B">togethercomputer/GPT-NeoXT-Chat-Base-20B</option>
                                    <option value="cohere/command-nightly">cohere/command-nightly</option>
                                </select>
                            </div>
                        </form>
                        <form id="openrouter_form" data-source="openrouter" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <h4 data-i18n="OpenRouter API Key">OpenRouter API Key</h4>
                            <div>
                                <small data-i18n="Click Authorize below or get the key from">
                                    Click "Authorize" below or get the key from </small> <a target="_blank" href="https://openrouter.ai/keys/">OpenRouter</a>.
                                <br>
                                <a href="https://openrouter.ai/account" target="_blank" data-i18n="View Remaining Credits">View Remaining Credits</a>
                            </div>
                            <div class="flex-container">
                                <input id="api_key_openrouter" name="api_key_openrouter" class="text_pole flex1 api_key_openrouter" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_openrouter" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_openrouter" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="OpenRouter Model">OpenRouter Model</h4>
                                <select id="model_openrouter_select" data-select2-id="select2-data-model_openrouter_select" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                    <option value="" data-i18n="-- Connect to the API --" data-select2-id="select2-data-24-leql">-- Connect to the API --</option>
                                </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-23-ejao" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-model_openrouter_select-container" aria-controls="select2-model_openrouter_select-container"><span class="select2-selection__rendered" id="select2-model_openrouter_select-container" role="textbox" aria-readonly="true" title="Select a model"><span class="select2-selection__placeholder">Select a model</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                            <label for="openrouter_use_fallback" class="checkbox_label marginTopBot5" data-i18n="[title]Allow fallback routes Description" title="Automatically chooses an alternative model if the chosen model can't serve your request.">
                                <input id="openrouter_use_fallback" type="checkbox">
                                <span data-i18n="Allow fallback models">Allow fallback models</span>
                            </label>
                            <div class="marginTopBot5">
                                <div class="inline-drawer wide100p">
                                    <div class="inline-drawer-toggle inline-drawer-header">
                                        <b data-i18n="Model Order">OpenRouter Model Sorting</b>
                                        <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                    </div>
                                    <div class="inline-drawer-content m-b-1">
                                        <div class="marginTopBot5">
                                            <label for="openrouter_sort_models" class="checkbox_label">
                                                <select id="openrouter_sort_models">
                                                    <option data-i18n="Alphabetically" value="alphabetically">Alphabetically</option>
                                                    <option data-i18n="Price" value="pricing.prompt">Price (cheapest)</option>
                                                    <option data-i18n="Context Size" value="context_length">Context Size</option>
                                                </select>
                                            </label>
                                        </div>
                                        <div class="marginTopBot5">
                                            <label for="openrouter_group_models" class="checkbox_label">
                                                <input id="openrouter_group_models" type="checkbox">
                                                <span data-i18n="Group by vendors">Group by vendors</span>
                                            </label>
                                            <div class="toggle-description justifyLeft wide100p">
                                                <span data-i18n="Group by vendors Description">
                                                    Put OpenAI models in one group, Anthropic models in other group, etc. Can be combined with sorting.
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 data-i18n="Model Providers">Model Providers</h4>
                                <select id="openrouter_providers_chat" class="openrouter_providers select2-hidden-accessible" multiple="" data-select2-id="select2-data-openrouter_providers_chat" tabindex="-1" aria-hidden="true">
                                <option value="OpenAI">OpenAI</option><option value="Anthropic">Anthropic</option><option value="Google">Google</option><option value="Google AI Studio">Google AI Studio</option><option value="Amazon Bedrock">Amazon Bedrock</option><option value="Groq">Groq</option><option value="SambaNova">SambaNova</option><option value="Cohere">Cohere</option><option value="Mistral">Mistral</option><option value="Together">Together</option><option value="Together 2">Together 2</option><option value="Fireworks">Fireworks</option><option value="DeepInfra">DeepInfra</option><option value="Lepton">Lepton</option><option value="Novita">Novita</option><option value="Avian">Avian</option><option value="Lambda">Lambda</option><option value="Azure">Azure</option><option value="Modal">Modal</option><option value="AnyScale">AnyScale</option><option value="Replicate">Replicate</option><option value="Perplexity">Perplexity</option><option value="Recursal">Recursal</option><option value="OctoAI">OctoAI</option><option value="DeepSeek">DeepSeek</option><option value="Infermatic">Infermatic</option><option value="AI21">AI21</option><option value="Featherless">Featherless</option><option value="Inflection">Inflection</option><option value="xAI">xAI</option><option value="Cloudflare">Cloudflare</option><option value="SF Compute">SF Compute</option><option value="01.AI">01.AI</option><option value="HuggingFace">HuggingFace</option><option value="Mancer">Mancer</option><option value="Mancer 2">Mancer 2</option><option value="Hyperbolic">Hyperbolic</option><option value="Hyperbolic 2">Hyperbolic 2</option><option value="Lynn 2">Lynn 2</option><option value="Lynn">Lynn</option><option value="Reflection">Reflection</option></select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-22-5y11" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--multiple" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="-1" aria-disabled="false"><ul class="select2-selection__rendered" id="select2-openrouter_providers_chat-container"></ul><span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="0" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" autocomplete="off" aria-label="Search" aria-describedby="select2-openrouter_providers_chat-container" placeholder="Select providers. No selection = all providers." style="width: 100%;"></textarea></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                <label class="checkbox_label marginTopBot5" for="openrouter_allow_fallbacks" title="Automatically chooses an alternative provider if chosen providers can't serve your request.">
                                    <input id="openrouter_allow_fallbacks" type="checkbox">
                                    <span data-i18n="Allow fallback providers">Allow fallback providers</span>
                                </label>
                            </div>
                            <small class="marginTopBot5">
                                <i class="fa-solid fa-lightbulb"></i>
                                <span>To use instruct formatting, switch to OpenRouter under Text Completion API.</span>
                            </small>
                        </form>
                        <form id="scale_form" data-source="scale" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <div id="normal_scale_form">
                                <h4 data-i18n="Scale API Key">Scale API Key</h4>
                                <div class="flex-container">
                                    <input id="api_key_scale" name="api_key_scale" class="text_pole flex1" value="" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_scale" tabindex="0"></div>
                                </div>
                                <div data-for="api_key_scale" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                    For privacy reasons, your API key will be hidden after you reload the page.
                                </div>
                                <h4>Scale API URL</h4>
                                <input id="api_url_scale" name="api_url_scale" class="text_pole" value="" autocomplete="off" placeholder="https://dashboard.scale.com/spellbook/api/v2/deploy/xxxxxxx">
                            </div>
                            <div id="alt_scale_form">
                                <h4>Scale Cookie (_jwt)</h4>
                                <div class="flex-container">
                                    <input id="scale_cookie" name="scale_cookie" class="text_pole flex1" value="" autocomplete="off" placeholder="❌ Missing key">
                                    <div title="Clear your cookie" data-i18n="[title]Clear your cookie" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="scale_cookie" tabindex="0"></div>
                                </div>
                                <div data-for="scale_cookie" class="neutral_warning">
                                    For privacy reasons, your cookie will be hidden after you reload the page.
                                </div>
                            </div>
                            <!-- Its only purpose is to trigger max context size check -->
                            <select id="model_scale_select" class="displayNone"></select>
                            <label for="scale-alt" class="checkbox_label">
                                <input id="scale-alt" type="checkbox" checked="">
                                <span data-i18n="Alt Method">Alt Method</span>
                            </label>
                        </form>
                        <form id="ai21_form" data-source="ai21" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <h4 data-i18n="AI21 API Key">AI21 API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_ai21" name="api_key_ai21" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_ai21" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_ai21" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="AI21 Model">AI21 Model</h4>
                                <select id="model_ai21_select">
                                    <optgroup label="Jamba 1.5">
                                        <option value="jamba-1.5-mini">jamba-1.5-mini</option>
                                        <option value="jamba-1.5-large" selected="selected">jamba-1.5-large</option>
                                    </optgroup>
                                    <optgroup label="Jamba-Instruct (Deprecated)">
                                        <option value="jamba-instruct-preview">jamba-instruct-preview</option>
                                    </optgroup>
                                </select>
                            </div>
                        </form>
                        <form id="makersuite_form" data-source="makersuite" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <h4 data-i18n="Google AI Studio API Key">Google AI Studio API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_makersuite" name="api_key_makersuite" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_makersuite" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_makersuite" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="Google Model">Google Model</h4>
                                <select id="model_google_select">
                                    <optgroup label="Primary">
                                        <option value="gemini-1.5-pro" selected="selected">Gemini 1.5 Pro</option>
                                        <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
                                        <option value="gemini-1.0-pro">Gemini 1.0 Pro (Deprecated)</option>
                                        <option value="gemini-pro">Gemini Pro (1.0) (Deprecated)</option>
                                        <option value="gemini-ultra">Gemini Ultra (1.0)</option>
                                        <option value="gemini-1.0-ultra-latest">Gemini 1.0 Ultra</option>
                                    </optgroup>
                                    <optgroup label="Subversions">
                                        <option value="gemini-2.0-flash-thinking-exp-1219">Gemini 2.0 Flash Thinking Experimental</option>
                                        <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash Experimental</option>
                                        <option value="gemini-exp-1114">Gemini Experimental 2024-11-14</option>
                                        <option value="gemini-exp-1121">Gemini Experimental 2024-11-21</option>
                                        <option value="gemini-exp-1206">Gemini Experimental 2024-12-06</option>
                                        <option value="gemini-1.5-pro-exp-0801">Gemini 1.5 Pro Experimental 2024-08-01</option>
                                        <option value="gemini-1.5-pro-exp-0827">Gemini 1.5 Pro Experimental 2024-08-27</option>
                                        <option value="gemini-1.5-pro-latest">Gemini 1.5 Pro [latest]</option>
                                        <option value="gemini-1.5-pro-001">Gemini 1.5 Pro [001]</option>
                                        <option value="gemini-1.5-pro-002">Gemini 1.5 Pro [002]</option>
                                        <option value="gemini-1.5-flash-8b">Gemini 1.5 Flash 8B</option>
                                        <option value="gemini-1.5-flash-exp-0827">Gemini 1.5 Flash Experimental 2024-08-27</option>
                                        <option value="gemini-1.5-flash-8b-exp-0827">Gemini 1.5 Flash 8B Experimental 2024-08-27</option>
                                        <option value="gemini-1.5-flash-8b-exp-0924">Gemini 1.5 Flash 8B Experimental 2024-09-24</option>
                                        <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash [latest]</option>
                                        <option value="gemini-1.5-flash-001">Gemini 1.5 Flash [001]</option>
                                        <option value="gemini-1.5-flash-002">Gemini 1.5 Flash [002]</option>
                                        <option value="gemini-1.0-pro-latest">Gemini 1.0 Pro [latest] (Deprecated)</option>
                                        <option value="gemini-1.0-pro-001">Gemini 1.0 Pro (Tuning) [001] (Deprecated)</option>
                                    </optgroup>
                                </select>
                            </div>
                        </form>
                        <form id="mistralai_form" data-source="mistralai" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <h4 data-i18n="MistralAI API Key">MistralAI API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_mistralai" name="api_key_mistralai" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_mistralai" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_mistralai" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="MistralAI Model">MistralAI Model</h4>
                                <select id="model_mistralai_select">
                                    <optgroup label="Latest">
                                        <option value="open-mistral-nemo">open-mistral-nemo</option>
                                        <option value="open-mistral-7b">open-mistral-7b</option>
                                        <option value="open-mixtral-8x7b">open-mixtral-8x7b</option>
                                        <option value="open-mixtral-8x22b">open-mixtral-8x22b</option>
                                        <option value="open-codestral-mamba">open-codestral-mamba</option>
                                        <option value="ministral-3b-latest">ministral-3b-latest</option>
                                        <option value="ministral-8b-latest">ministral-8b-latest</option>
                                        <option value="mistral-tiny-latest">mistral-tiny-latest</option>
                                        <option value="mistral-small-latest">mistral-small-latest</option>
                                        <option value="mistral-medium-latest">mistral-medium-latest</option>
                                        <option value="mistral-large-latest" selected="selected">mistral-large-latest</option>
                                        <option value="codestral-latest">codestral-latest</option>
                                        <option value="codestral-mamba-latest">codestral-mamba-latest</option>
                                        <option value="pixtral-12b-latest">pixtral-12b-latest</option>
                                        <option value="pixtral-large-latest">pixtral-large-latest</option>
                                    </optgroup>
                                    <optgroup label="Sub-versions">
                                        <option value="open-mistral-nemo-2407">open-mistral-nemo-2407</option>
                                        <option value="open-mixtral-8x22b-2404">open-mixtral-8x22b-2404</option>
                                        <option value="ministral-3b-2410">ministral-3b-2410</option>
                                        <option value="ministral-8b-2410">ministral-8b-2410</option>
                                        <option value="mistral-tiny-2312">mistral-tiny-2312</option>
                                        <option value="mistral-tiny-2407">mistral-tiny-2407</option>
                                        <option value="mistral-small-2312">mistral-small-2312</option>
                                        <option value="mistral-small-2402">mistral-small-2402</option>
                                        <option value="mistral-small-2409">mistral-small-2409</option>
                                        <option value="mistral-medium-2312">mistral-medium-2312</option>
                                        <option value="mistral-large-2402">mistral-large-2402</option>
                                        <option value="mistral-large-2407">mistral-large-2407</option>
                                        <option value="mistral-large-2411">mistral-large-2411</option>
                                        <option value="codestral-2405">codestral-2405</option>
                                        <option value="codestral-2405-blue">codestral-2405-blue</option>
                                        <option value="codestral-mamba-2407">codestral-mamba-2407</option>
                                        <option value="pixtral-12b-2409">pixtral-12b-2409</option>
                                        <option value="pixtral-large-2411">pixtral-large-2411</option>
                                    </optgroup>
                                    <optgroup id="mistralai_other_models" label="Other"></optgroup>
                                </select>
                            </div>
                        </form>
                        <div id="groq_form" data-source="groq" style="display: none;">
                            <h4 data-i18n="Groq API Key">Groq API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_groq" name="api_key_groq" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_groq" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_groq" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <h4 data-i18n="Groq Model">Groq Model</h4>
                            <select id="model_groq_select">
                                <optgroup label="Llama 3.3">
                                    <option value="llama-3.3-70b-versatile">llama-3.3-70b-versatile</option>
                                </optgroup>
                                <optgroup label="Llama 3.2">
                                    <option value="llama-3.2-1b-preview">llama-3.2-1b-preview</option>
                                    <option value="llama-3.2-3b-preview">llama-3.2-3b-preview</option>
                                    <option value="llama-3.2-11b-vision-preview">llama-3.2-11b-vision-preview</option>
                                    <option value="llama-3.2-90b-vision-preview">llama-3.2-90b-vision-preview</option>
                                </optgroup>
                                <optgroup label="Llama 3.1">
                                    <option value="llama-3.1-8b-instant">llama-3.1-8b-instant</option>
                                    <option value="llama-3.1-70b-versatile" selected="selected">llama-3.1-70b-versatile</option>
                                    <option value="llama-3.1-405b-reasoning">llama-3.1-405b-reasoning</option>
                                </optgroup>
                                <optgroup label="Llama 3">
                                    <option value="llama3-groq-8b-8192-tool-use-preview">llama3-groq-8b-8192-tool-use-preview</option>
                                    <option value="llama3-groq-70b-8192-tool-use-preview">llama3-groq-70b-8192-tool-use-preview</option>
                                    <option value="llama3-8b-8192">llama3-8b-8192</option>
                                    <option value="llama3-70b-8192">llama3-70b-8192</option>
                                </optgroup>
                                <optgroup label="Gemma">
                                    <option value="gemma-7b-it">gemma-7b-it</option>
                                    <option value="gemma2-9b-it">gemma2-9b-it</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="mixtral-8x7b-32768">mixtral-8x7b-32768</option>
                                    <option value="llava-v1.5-7b-4096-preview">llava-v1.5-7b-4096-preview</option>
                                </optgroup>
                            </select>
                        </div>
                        <div id="nanogpt_form" data-source="nanogpt" style="display: none;">
                            <h4 data-i18n="NanoGPT API Key">NanoGPT API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_nanogpt" name="api_key_nanogpt" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_nanogpt" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_nanogpt" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="NanoGPT Model">NanoGPT Model</h4>
                                <select id="model_nanogpt_select">
                                    <option value="" data-i18n="-- Connect to the API --">-- Connect to the API --</option>
                                </select>
                            </div>
                        </div>
                        <div id="perplexity_form" data-source="perplexity" style="display: none;">
                            <h4 data-i18n="Perplexity API Key">Perplexity API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_perplexity" name="api_key_perplexity" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_perplexity" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_perplexity" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <h4 data-i18n="Perplexity Model">Perplexity Model</h4>
                            <select id="model_perplexity_select">
                                <optgroup label="Perplexity Sonar Models">
                                    <option value="llama-3.1-sonar-small-128k-online">llama-3.1-sonar-small-128k-online</option>
                                    <option value="llama-3.1-sonar-large-128k-online">llama-3.1-sonar-large-128k-online</option>
                                    <option value="llama-3.1-sonar-huge-128k-online">llama-3.1-sonar-huge-128k-online</option>
                                </optgroup>
                                <optgroup label="Perplexity Chat Models">
                                    <option value="llama-3.1-sonar-small-128k-chat">llama-3.1-sonar-small-128k-chat</option>
                                    <option value="llama-3.1-sonar-large-128k-chat">llama-3.1-sonar-large-128k-chat</option>
                                </optgroup>
                                <optgroup label="Open-Source Models">
                                    <option value="llama-3.1-8b-instruct">llama-3.1-8b-instruct</option>
                                    <option value="llama-3.1-70b-instruct" selected="selected">llama-3.1-70b-instruct</option>
                                </optgroup>
                                <optgroup label="Deprecated Models">
                                    <option value="llama-3-sonar-small-32k-chat">llama-3-sonar-small-32k-chat</option>
                                    <option value="llama-3-sonar-small-32k-online">llama-3-sonar-small-32k-online</option>
                                    <option value="llama-3-sonar-large-32k-chat">llama-3-sonar-large-32k-chat</option>
                                    <option value="llama-3-sonar-large-32k-online">llama-3-sonar-large-32k-online</option>
                                    <option value="sonar-small-chat">sonar-small-chat</option>
                                    <option value="sonar-small-online">sonar-small-online</option>
                                    <option value="sonar-medium-chat">sonar-medium-chat</option>
                                    <option value="sonar-medium-online">sonar-medium-online</option>
                                    <option value="llama-3-8b-instruct">llama-3-8b-instruct</option>
                                    <option value="llama-3-70b-instruct">llama-3-70b-instruct</option>
                                    <option value="mistral-7b-instruct">mistral-7b-instruct (v0.2)</option>
                                    <option value="mixtral-8x7b-instruct">mixtral-8x7b-instruct</option>
                                </optgroup>
                            </select>
                        </div>
                        <form id="cohere_form" data-source="cohere" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <h4 data-i18n="Cohere API Key">Cohere API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_cohere" name="api_key_cohere" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_cohere" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_cohere" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <div>
                                <h4 data-i18n="Cohere Model">Cohere Model</h4>
                                <select id="model_cohere_select">
                                    <optgroup label="Stable">
                                        <option value="c4ai-aya-23-8b">c4ai-aya-23-8b</option>
                                        <option value="c4ai-aya-23">c4ai-aya-23</option>
                                        <option value="c4ai-aya-expanse-8b">c4ai-aya-expanse-8b</option>
                                        <option value="c4ai-aya-expanse-32b">c4ai-aya-expanse-32b</option>
                                        <option value="command-light">command-light</option>
                                        <option value="command">command</option>
                                        <option value="command-r">command-r</option>
                                        <option value="command-r-plus" selected="selected">command-r-plus</option>
                                        <option value="command-r-08-2024">command-r-08-2024</option>
                                        <option value="command-r-plus-08-2024">command-r-plus-08-2024</option>
                                        <option value="command-r7b-12-2024">command-r7b-12-2024</option>
                                    </optgroup>
                                    <optgroup label="Nightly">
                                        <option value="command-light-nightly">command-light-nightly</option>
                                        <option value="command-nightly">command-nightly</option>
                                    </optgroup>
                                </select>
                            </div>
                        </form>
                        <form id="blockentropy_form" data-source="blockentropy" style="display: none;">
                            <h4 data-i18n="Block Entropy API Key">Block Entropy API Key</h4>
                            <div class="flex-container">
                                <input id="api_key_blockentropy" name="api_key_blockentropy" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_blockentropy" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_blockentropy" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <h4 data-i18n="Select a Model">Select a Model</h4>
                            <div class="flex-container">
                                <select id="model_blockentropy_select" class="text_pole"></select>
                            </div>
                        </form>
                        <form id="custom_form" data-source="custom" style="display: none;">
                            <h4 data-i18n="Custom Endpoint (Base URL)">Custom Endpoint (Base URL)</h4>
                            <div class="flex-container">
                                <input id="custom_api_url_text" class="text_pole wide100p" value="" autocomplete="off" data-i18n="[placeholder]Example: http://localhost:1234/v1" placeholder="Example: http://localhost:1234/v1">
                            </div>
                            <div>
                                <small>
                                    <span data-i18n="Doesn't work? Try adding">Doesn't work? Try adding</span> <code>/v1</code> <span data-i18n="at the end of the URL!">at the end of the URL!</span>
                                </small>
                            </div>
                            <h4>
                                <span data-i18n="Custom API Key">Custom API Key</span>
                                <small data-i18n="(Optional)">(Optional)</small>
                            </h4>
                            <div class="flex-container">
                                <input id="api_key_custom" name="api_key_custom" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_custom" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_custom" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <h4 data-i18n="Enter a Model ID">Enter a Model ID</h4>
                            <div class="flex-container">
                                <input list="model_custom_select_fill" id="custom_model_id" class="text_pole wide100p" value="" autocomplete="off" data-i18n="[placeholder]Example: gpt-3.5-turbo" placeholder="Example: gpt-3.5-turbo">
                                <datalist id="model_custom_select_fill" class="text_pole model_custom_select"></datalist>
                            </div>
                            <h4 data-i18n="Available Models">Available Models</h4>
                            <div class="flex-container">
                                <select id="model_custom_select" class="text_pole model_custom_select"></select>
                            </div>
                            <h4 data-i18n="Prompt Post-Processing">Prompt Post-Processing</h4>
                            <select id="custom_prompt_post_processing" class="text_pole" title="Applies additional processing to the prompt before sending it to the API." data-i18n="[title]Applies additional processing to the prompt before sending it to the API.">
                                <option data-i18n="prompt_post_processing_none" value="" selected="selected">None</option>
                                <option value="merge">Merge consecutive roles</option>
                                <option value="strict">Strict (user first, alternating roles)</option>
                            </select>
                        </form>
                        <div id="01ai_form" data-source="01ai" style="display: none;">
                            <h4>
                                <a data-i18n="01.AI API Key" href="https://platform.01.ai/" target="_blank" rel="noopener noreferrer">
                                    01.AI API Key
                                </a>
                            </h4>
                            <div class="flex-container">
                                <input id="api_key_01ai" name="api_key_01ai" class="text_pole flex1" value="" type="text" autocomplete="off" placeholder="❌ Missing key">
                                <div title="Clear your API key" data-i18n="[title]Clear your API key" class="menu_button fa-solid fa-circle-xmark clear-api-key interactable" data-key="api_key_01ai" tabindex="0"></div>
                            </div>
                            <div data-for="api_key_01ai" class="neutral_warning" data-i18n="For privacy reasons, your API key will be hidden after you reload the page.">
                                For privacy reasons, your API key will be hidden after you reload the page.
                            </div>
                            <h4 data-i18n="01.AI Model">01.AI Model</h4>
                            <select id="model_01ai_select">
                            </select>
                        </div>
                        <div class="flex-container flex">
                            <div id="api_button_openai" class="api_button menu_button menu_button_icon interactable" type="submit" data-i18n="Connect" tabindex="0">Connect</div>
                            <div class="api_loading menu_button menu_button_icon interactable" data-i18n="Cancel" style="display: none;" tabindex="0">Cancel</div>
                            <div data-source="custom" id="customize_additional_parameters" class="menu_button menu_button_icon interactable" data-i18n="Additional Parameters" style="display: none;" tabindex="0">Additional Parameters</div>
                            <div data-source="openrouter" class="menu_button menu_button_icon openrouter_authorize interactable" title="Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai" data-i18n="Authorize;[title]Get your OpenRouter API token using OAuth flow. You will be redirected to openrouter.ai" style="display: none;" tabindex="0">Authorize</div>
                            <div id="test_api_button" class="menu_button menu_button_icon interactable" title="Verifies your API connection by sending a short test message. Be aware that you'll be credited for it!" data-i18n="[title]Verifies your API connection by sending a short test message. Be aware that you'll be credited for it!" tabindex="0"><span data-i18n="Test Message">Test Message</span></div>
                        </div>
                        <div class="online_status">
                            <div class="online_status_indicator"></div>
                            <div class="online_status_text" data-i18n="No connection...">No connection...</div>
                        </div>
                    </div>
                </div>
                <div class="flex-container alignitemscenter spaceBetween wide100p">
                    <label for="auto-connect-checkbox" class="checkbox_label"><input id="auto-connect-checkbox" type="checkbox">
                        <span data-i18n="Auto-connect to Last Server">Auto-connect to Last Server</span>
                    </label>
                    <a id="viewSecrets" href="javascript:void(0);" data-i18n="[missing_key_text]Missing key;[key_saved_text]Key saved" missing_key_text="❌ Missing key" key_saved_text="✔️ Key saved"><span data-i18n="View hidden API keys">View hidden API keys</span></a>
                </div>
            </div>
        </div>
        <div id="advanced-formatting-button" class="drawer">
            <div class="drawer-toggle">
                <div class="drawer-icon fa-solid fa-font fa-fw closedIcon interactable" title="AI Response Formatting" data-i18n="[title]AI Response Formatting" tabindex="0"></div>
            </div>
            <div id="AdvancedFormatting" class="drawer-content">
                <div class="flex-container alignItemsBaseline">
                    <h3 class="margin0 flex1 flex-container alignItemsBaseline">
                        <span data-i18n="Advanced Formatting">
                            Advanced Formatting
                        </span>

                        <a href="https://docs.sillytavern.app/usage/core-concepts/advancedformatting/" class="notes-link" target="_blank">
                            <span class="fa-solid fa-circle-question note-link-span"></span>
                        </a>
                    </h3>
                    <div class="flex-container">
                        <input id="af_master_import_file" type="file" hidden="" accept=".json" class="displayNone">
                        <div id="af_master_import" class="menu_button menu_button_icon interactable" title="Import Advanced Formatting settings

You can also provide legacy files for Instruct and Context templates." data-i18n="[title]Import Advanced Formatting settings" tabindex="0">
                            <i class="fa-solid fa-file-import"></i>
                            <span data-i18n="Master Import">Master Import</span>
                        </div>
                        <div id="af_master_export" class="menu_button menu_button_icon interactable" title="Export Advanced Formatting settings" data-i18n="[title]Export Advanced Formatting settings" tabindex="0">
                            <i class="fa-solid fa-file-export"></i>
                            <span data-i18n="Master Export">Master Export</span>
                        </div>
                    </div>
                </div>
                <div class="flex-container spaceEvenly">
                    <div id="ContextSettings" class="flex-container flexNoGap flexFlowColumn flex1">
                        <div>
                            <h4 class="standoutHeader title_restorable">
                                <div>
                                    <span data-i18n="Context Template">Context Template</span>
                                </div>
                                <div class="flex-container">
                                    <label for="context_derived" class="checkbox_label flex1" title="Derive from Model Metadata, if possible." data-i18n="[title]context_derived">
                                        <input id="context_derived" type="checkbox" style="display:none;">
                                        <small><i class="fa-solid fa-bolt menu_button margin0 interactable" tabindex="0"></i></small>
                                    </label>
                                </div>
                            </h4>
                            <div class="flex-container" title="Select your current Context Template" data-i18n="[title]Select your current Context Template">
                                <select id="context_presets" data-preset-manager-for="context" class="flex1 text_pole"><option value="Adventure">Adventure</option><option value="Alpaca-Single-Turn">Alpaca-Single-Turn</option><option value="Alpaca">Alpaca</option><option value="ChatML-Names">ChatML-Names</option><option value="ChatML">ChatML</option><option value="Command R">Command R</option><option value="Default">Default</option><option value="DreamGen Role-Play V1 ChatML">DreamGen Role-Play V1 ChatML</option><option value="DreamGen Role-Play V1 Llama3">DreamGen Role-Play V1 Llama3</option><option value="Gemma 2">Gemma 2</option><option value="Libra-32B">Libra-32B</option><option value="Lightning 1.1">Lightning 1.1</option><option value="Llama 2 Chat">Llama 2 Chat</option><option value="Llama 3 Instruct">Llama 3 Instruct</option><option value="Llama-3-Instruct-Names">Llama-3-Instruct-Names</option><option value="Minimalist">Minimalist</option><option value="Mistral V1">Mistral V1</option><option value="Mistral V2 &amp; V3">Mistral V2 &amp; V3</option><option value="Mistral V3-Tekken">Mistral V3-Tekken</option><option value="Mistral V7">Mistral V7</option><option value="NovelAI">NovelAI</option><option value="OldDefault">OldDefault</option><option value="Phi">Phi</option><option value="Pygmalion">Pygmalion</option><option value="Story">Story</option><option value="Synthia">Synthia</option><option value="Tulu">Tulu</option><option value="simple-proxy-for-tavern">simple-proxy-for-tavern</option></select>
                                <div class="flex-container justifyCenter gap3px">
                                    <input type="file" hidden="" data-preset-manager-file="context" accept=".json, .settings">
                                    <i data-preset-manager-update="context" class="menu_button fa-solid fa-save interactable" title="Update current template" data-i18n="[title]Update current template" tabindex="0"></i>
                                    <i data-preset-manager-rename="context" class="menu_button fa-pencil fa-solid interactable" title="Rename current template" data-i18n="[title]Rename current template" tabindex="0"></i>
                                    <i data-preset-manager-new="context" class="menu_button fa-solid fa-file-circle-plus interactable" title="Save template as" data-i18n="[title]Save template as" tabindex="0"></i>
                                    <i data-preset-manager-import="context" class="displayNone menu_button fa-solid fa-file-import interactable" title="Import template" data-i18n="[title]Import template" tabindex="0"></i>
                                    <i data-preset-manager-export="context" class="displayNone menu_button fa-solid fa-file-export interactable" title="Export template" data-i18n="[title]Export template" tabindex="0"></i>
                                    <i data-preset-manager-restore="context" class="menu_button fa-solid fa-recycle interactable" title="Restore current template" data-i18n="[title]Restore current template" tabindex="0"></i>
                                    <i id="context_delete_preset" data-preset-manager-delete="context" class="menu_button fa-solid fa-trash-can interactable" title="Delete the template" data-i18n="[title]Delete the template" tabindex="0"></i>
                                </div>
                            </div>
                            <div>
                                <label for="context_story_string" class="flex-container">
                                    <small data-i18n="Story String">Story String</small>
                                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="context_story_string" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                </label>
                                <textarea id="context_story_string" class="text_pole textarea_compact autoSetHeight"></textarea>
                                <div class="flex-container">
                                    <div class="flex1">
                                        <label for="context_example_separator">
                                            <small data-i18n="Example Separator">Example Separator</small>
                                        </label>
                                        <div>
                                            <textarea id="context_example_separator" class="text_pole textarea_compact autoSetHeight"></textarea>
                                        </div>
                                    </div>
                                    <div class="flex1">
                                        <label for="context_chat_start">
                                            <small data-i18n="Chat Start">Chat Start</small>
                                        </label>
                                        <div>
                                            <textarea id="context_chat_start" class="text_pole textarea_compact autoSetHeight"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="standoutHeader">
                                        <span data-i18n="Context Formatting">
                                            Context Formatting
                                        </span>
                                    </h4>

                                    <label class="checkbox_label" for="always-force-name2-checkbox">
                                        <input id="always-force-name2-checkbox" type="checkbox">
                                        <small data-i18n="Always add character's name to prompt">
                                            Always add character's name to prompt
                                        </small>
                                    </label>
                                    <label class="checkbox_label" for="single_line">
                                        <input id="single_line" type="checkbox">
                                        <small data-i18n="Generate only one line per request">
                                            Generate only one line per request
                                        </small>
                                    </label>
                                    <label class="checkbox_label" for="collapse-newlines-checkbox">
                                        <input id="collapse-newlines-checkbox" type="checkbox">
                                        <small data-i18n="Collapse Consecutive Newlines">
                                            Collapse Consecutive Newlines
                                        </small>
                                    </label>
                                    <label class="checkbox_label" for="trim_spaces">
                                        <input id="trim_spaces" type="checkbox">
                                        <small data-i18n="Trim spaces">Trim spaces</small>
                                        <i class="fa-sm fa-solid fa-exclamation-triangle warning" title="Disabling is not recommended." data-i18n="[title]Disabling is not recommended."></i>
                                    </label>
                                    <label class="checkbox_label" for="trim_sentences_checkbox">
                                        <input id="trim_sentences_checkbox" type="checkbox">
                                        <small data-i18n="Trim Incomplete Sentences">
                                            Trim Incomplete Sentences
                                        </small>
                                    </label>
                                    <label class="checkbox_label" title="Add Chat Start and Example Separator to a list of stopping strings." data-i18n="[title]Add Chat Start and Example Separator to a list of stopping strings.">
                                        <input id="context_use_stop_strings" type="checkbox">
                                        <small data-i18n="Separators as Stop Strings">Separators as Stop Strings</small>
                                    </label>
                                    <label class="checkbox_label" title="Add Character and User names to a list of stopping strings." data-i18n="[title]Add Character and User names to a list of stopping strings.">
                                        <input id="context_names_as_stop_strings" type="checkbox">
                                        <small data-i18n="Names as Stop Strings">Names as Stop Strings</small>
                                    </label>
                                </div>

                                <label class="checkbox_label" title="Includes Post-History Instructions at the end of the prompt, if defined in the character card AND ''Prefer Char. Instructions'' is enabled.
THIS IS NOT RECOMMENDED FOR TEXT COMPLETION MODELS, CAN LEAD TO BAD OUTPUT." data-i18n="[title]context_allow_post_history_instructions">
                                    <input id="context_allow_jailbreak" type="checkbox">
                                    <small data-i18n="Allow Post-History Instructions">Allow Post-History Instructions</small>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div id="InstructSettingsColumn" class="flex-container flexNoGap flexFlowColumn flex1">
                        <h4 class="standoutHeader title_restorable justifySpaceBetween">
                            <div class="flex-container">
                                <span data-i18n="Instruct Template">Instruct Template</span>
                            </div>
                            <div class="flex-container">
                                <label for="instruct_derived" class="checkbox_label flex1" title="Derive from Model Metadata, if possible." data-i18n="[title]instruct_derived">
                                    <input id="instruct_derived" type="checkbox" style="display:none;">
                                    <small><i class="fa-solid fa-bolt menu_button margin0 interactable" tabindex="0"></i></small>
                                </label>
                                <label for="instruct_bind_to_context" class="checkbox_label flex1" title="Bind to Context
If enabled, Context templates will be automatically selected based on selected Instruct template name or by preference." data-i18n="[title]instruct_bind_to_context">
                                    <input id="instruct_bind_to_context" type="checkbox" style="display:none;">
                                    <small><i class="fa-solid fa-link menu_button margin0 interactable" tabindex="0"></i></small>
                                </label>
                                <label id="instruct_enabled_label" for="instruct_enabled" class="checkbox_label flex1" title="Enable Instruct Mode" data-i18n="[title]instruct_enabled">
                                    <input id="instruct_enabled" type="checkbox" style="display:none;">
                                    <small><i class="fa-solid fa-power-off menu_button margin0 interactable" tabindex="0"></i></small>
                                </label>
                            </div>
                        </h4>
                        <div id="instructSettingsBlock" class="disabled">


                            <div class="flex-container" title="Select your current Instruct Template" data-i18n="[title]Select your current Instruct Template">
                                <select id="instruct_presets" data-preset-manager-for="instruct" class="flex1 text_pole"><option value="Adventure">Adventure</option><option value="Alpaca-Single-Turn">Alpaca-Single-Turn</option><option value="Alpaca">Alpaca</option><option value="ChatML-Names">ChatML-Names</option><option value="ChatML">ChatML</option><option value="Command R">Command R</option><option value="DreamGen Role-Play V1 ChatML">DreamGen Role-Play V1 ChatML</option><option value="DreamGen Role-Play V1 Llama3">DreamGen Role-Play V1 Llama3</option><option value="Gemma 2">Gemma 2</option><option value="Koala">Koala</option><option value="Libra-32B">Libra-32B</option><option value="Lightning 1.1">Lightning 1.1</option><option value="Llama 2 Chat">Llama 2 Chat</option><option value="Llama 3 Instruct">Llama 3 Instruct</option><option value="Llama-3-Instruct-Names">Llama-3-Instruct-Names</option><option value="Metharme">Metharme</option><option value="Mistral V1">Mistral V1</option><option value="Mistral V2 &amp; V3">Mistral V2 &amp; V3</option><option value="Mistral V3-Tekken">Mistral V3-Tekken</option><option value="Mistral V7">Mistral V7</option><option value="OpenOrca-OpenChat">OpenOrca-OpenChat</option><option value="Phi">Phi</option><option value="Pygmalion">Pygmalion</option><option value="Story">Story</option><option value="Synthia">Synthia</option><option value="Tulu">Tulu</option><option value="Vicuna 1.0">Vicuna 1.0</option><option value="Vicuna 1.1">Vicuna 1.1</option><option value="WizardLM-13B">WizardLM-13B</option><option value="WizardLM">WizardLM</option><option value="simple-proxy-for-tavern">simple-proxy-for-tavern</option></select>
                                <div class="flex-container margin0 justifyCenter gap3px">
                                    <input type="file" hidden="" data-preset-manager-file="instruct" accept=".json, .settings">
                                    <i data-preset-manager-update="instruct" class="menu_button fa-solid fa-save interactable" title="Update current template" data-i18n="[title]Update current template" data-original-tabindex="null"></i>
                                    <i data-preset-manager-rename="instruct" class="menu_button fa-pencil fa-solid interactable" title="Rename current template" data-i18n="[title]Rename current template" data-original-tabindex="null"></i>
                                    <i data-preset-manager-new="instruct" class="menu_button fa-solid fa-file-circle-plus interactable" title="Save template as" data-i18n="[title]Save template as" data-original-tabindex="null"></i>
                                    <i data-preset-manager-import="instruct" class="displayNone menu_button fa-solid fa-file-import interactable" title="Import template" data-i18n="[title]Import template" data-original-tabindex="null"></i>
                                    <i data-preset-manager-export="instruct" class="displayNone menu_button fa-solid fa-file-export interactable" title="Export template" data-i18n="[title]Export template" data-original-tabindex="null"></i>
                                    <i data-preset-manager-restore="instruct" class="menu_button fa-solid fa-recycle interactable" title="Restore current template" data-i18n="[title]Restore current template" data-original-tabindex="null"></i>
                                    <i data-preset-manager-delete="instruct" class="menu_button fa-solid fa-trash-can interactable" title="Delete template" data-i18n="[title]Delete template" data-original-tabindex="null"></i>
                                </div>
                            </div>
                            <label>
                                <small>
                                    <span data-i18n="Activation Regex">Activation Regex</span>
                                    <span class="fa-solid fa-circle-question" data-i18n="[title]instruct_template_activation_regex_desc" title="When connecting to an API or choosing a model, automatically activate this Instruct Template if the model name matches the provided regular expression."></span>
                                </small>
                            </label>
                            <div>
                                <input type="text" id="instruct_activation_regex" class="text_pole textarea_compact" placeholder="e.g. /llama(-)?[3|3.1]/i">
                            </div>
                            <div>
                                <label for="instruct_wrap" class="checkbox_label">
                                    <input id="instruct_wrap" type="checkbox">
                                    <small data-i18n="Wrap Sequences with Newline">Wrap Sequences with Newline</small>
                                </label>
                                <label for="instruct_macro" class="checkbox_label">
                                    <input id="instruct_macro" type="checkbox">
                                    <small data-i18n="Replace Macro in Sequences">Replace Macro in Sequences</small>
                                </label>
                                <label for="instruct_skip_examples" class="checkbox_label">
                                    <input id="instruct_skip_examples" type="checkbox">
                                    <small data-i18n="Skip Example Dialogues Formatting">Skip Example Dialogues Formatting</small>
                                </label>
                                <div>
                                    <small data-i18n="Include Names">
                                        Include Names
                                    </small>
                                    <select id="instruct_names_behavior">
                                        <option value="none" data-i18n="Never">Never</option>
                                        <option value="force" data-i18n="Groups and Past Personas">Groups and Past Personas</option>
                                        <option value="always" data-i18n="Always">Always</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="InstructSequencesColumn" class="wide100p flexFlowColumn disabled">
                            <h4 class="standoutHeader title_restorable">
                                <b>
                                    <span data-i18n="Instruct Sequences">
                                        Instruct Sequences
                                    </span>
                                </b>
                            </h4>
                            <!-- We keep one auto-open so the user would know what is going on in the picked template -->
                            <details open="">
                                <summary data-i18n="User Message Sequences">User Message Sequences</summary>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Inserted before a User message and as a last prompt line when impersonating." data-i18n="[title]Inserted before a User message and as a last prompt line when impersonating.">
                                        <small data-i18n="User Prefix">User Message Prefix</small>
                                        <textarea id="instruct_input_sequence" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <div class="flexAuto" title="Inserted after a User message." data-i18n="[title]Inserted after a User message.">
                                        <small data-i18n="User Suffix">User Message Suffix</small>
                                        <textarea id="instruct_input_suffix" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                            </details>
                            <details open="">
                                <summary data-i18n="Assistant Message Sequences">Assistant Message Sequences</summary>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Inserted before an Assistant message and as a last prompt line when generating an AI reply." data-i18n="[title]Inserted before an Assistant message and as a last prompt line when generating an AI reply.">
                                        <small data-i18n="Assistant Prefix">Assistant Message Prefix</small>
                                        <textarea id="instruct_output_sequence" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <div class="flexAuto" title="Inserted after an Assistant message." data-i18n="[title]Inserted after an Assistant message.">
                                        <small data-i18n="Assistant Suffix">Assistant Message Suffix</small>
                                        <textarea id="instruct_output_suffix" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                            </details>
                            <details>
                                <summary data-i18n="System Message Sequences">System Message Sequences</summary>
                                <div class="flex-container">
                                    <div class="flexAuto" id="instruct_system_sequence_block" title="Inserted before a System (added by slash commands or extensions) message." data-i18n="[title]Inserted before a System (added by slash commands or extensions) message.">
                                        <small data-i18n="System Prefix">System Message Prefix</small>
                                        <textarea id="instruct_system_sequence" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <div class="flexAuto" id="instruct_system_suffix_block" title="Inserted after a System message." data-i18n="[title]Inserted after a System message.">
                                        <small data-i18n="System Suffix">System Message Suffix</small>
                                        <textarea id="instruct_system_suffix" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                                <div class="flexBasis100p" title="If enabled, System Sequences will be the same as User Sequences." data-i18n="[title]If enabled, System Sequences will be the same as User Sequences.">
                                    <label class="checkbox_label" for="instruct_system_same_as_user">
                                        <input id="instruct_system_same_as_user" type="checkbox">
                                        <small data-i18n="System same as User">System same as User</small>
                                    </label>
                                </div>
                            </details>
                            <details>
                                <summary data-i18n="System Prompt Sequences">System Prompt Sequences</summary>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Inserted before a System prompt." data-i18n="[title]Inserted before a System prompt.">
                                        <label for="instruct_system_sequence_prefix">
                                            <small data-i18n="System Prompt Prefix">System Prompt Prefix</small>
                                        </label>
                                        <div>
                                            <textarea id="instruct_system_sequence_prefix" class="text_pole textarea_compact autoSetHeight"></textarea>
                                        </div>
                                    </div>
                                    <div class="flexAuto" title="Inserted after a System prompt." data-i18n="[title]Inserted after a System prompt.">
                                        <label for="instruct_system_sequence_suffix">
                                            <small data-i18n="System Prompt Suffix">System Prompt Suffix</small>
                                        </label>
                                        <div>
                                            <textarea id="instruct_system_sequence_suffix" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </details>
                            <details>
                                <summary data-i18n="Misc. Sequences">Misc. Sequences</summary>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Inserted before the first Assistant's message." data-i18n="[title]Inserted before the first Assistant's message.">
                                        <small data-i18n="First Assistant Prefix">First Assistant Prefix</small>
                                        <textarea id="instruct_first_output_sequence" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <div class="flexAuto" title="Inserted before the last Assistant's message or as a last prompt line when generating an AI reply (except a neutral/system role)." data-i18n="[title]instruct_last_output_sequence">
                                        <small data-i18n="Last Assistant Prefix">Last Assistant Prefix</small>
                                        <textarea id="instruct_last_output_sequence" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Inserted before the first User's message." data-i18n="[title]Inserted before the first User's message.">
                                        <small data-i18n="First User Prefix">First User Prefix</small>
                                        <textarea id="instruct_first_input_sequence" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <div class="flexAuto" title="Inserted before the last User's message." data-i18n="[title]instruct_last_input_sequence">
                                        <small data-i18n="Last User Prefix">Last User Prefix</small>
                                        <textarea id="instruct_last_input_sequence" class="text_pole wide100p textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Will be inserted as a last prompt line when using system/neutral generation." data-i18n="[title]Will be inserted as a last prompt line when using system/neutral generation.">
                                        <small data-i18n="System Instruction Prefix">System Instruction Prefix</small>
                                        <textarea id="instruct_last_system_sequence" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <div class="flexAuto" title="If a stop sequence is generated, everything past it will be removed from the output (inclusive)." data-i18n="[title]If a stop sequence is generated, everything past it will be removed from the output (inclusive).">
                                        <small data-i18n="Stop Sequence">Stop Sequence</small>
                                        <textarea id="instruct_stop_sequence" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                                <div class="flex-container">
                                    <div class="flexAuto" title="Will be inserted at the start of the chat history if it doesn't start with a User message." data-i18n="[title]Will be inserted at the start of the chat history if it doesn't start with a User message.">
                                        <small data-i18n="User Filler Message">User Filler Message</small>
                                        <textarea id="instruct_user_alignment_message" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>
                    <div id="SystemPromptColumn" class="flex-container flexNoGap flexFlowColumn flex1">
                        <h4 class="standoutHeader title_restorable justifySpaceBetween">
                            <div class="flex-container">
                                <span data-i18n="System Prompt">System Prompt</span>
                            </div>
                            <div class="flex-container">
                                <label id="sysprompt_enabled_label" for="sysprompt_enabled" class="checkbox_label flex1" title="Enable System Prompt" data-i18n="[title]sysprompt_enabled">
                                    <input id="sysprompt_enabled" type="checkbox" style="display:none;">
                                    <small><i class="fa-solid fa-power-off menu_button margin0 toggleEnabled interactable" tabindex="0"></i></small>
                                </label>
                            </div>
                        </h4>
                        <div id="SystemPromptBlock">


                            <div class="flex-container" title="Select your current System Prompt" data-i18n="[title]Select your current System Prompt">
                                <select id="sysprompt_select" data-preset-manager-for="sysprompt" class="flex1 text_pole"><option value="Actor">Actor</option><option value="Assistant - Expert">Assistant - Expert</option><option value="Assistant - Simple">Assistant - Simple</option><option value="Blank">Blank</option><option value="Chain of Thought">Chain of Thought</option><option value="Neutral - Chat">Neutral - Chat</option><option value="Roleplay - Detailed">Roleplay - Detailed</option><option value="Roleplay - Immersive">Roleplay - Immersive</option><option value="Roleplay - Simple">Roleplay - Simple</option><option value="Text Adventure">Text Adventure</option><option value="Writer - Creative">Writer - Creative</option><option value="Writer - Realistic">Writer - Realistic</option></select>
                                <div class="flex-container margin0 justifyCenter gap3px">
                                    <input type="file" hidden="" data-preset-manager-file="sysprompt" accept=".json, .settings">
                                    <i data-preset-manager-update="sysprompt" class="menu_button fa-solid fa-save interactable" title="Update current prompt" data-i18n="[title]Update current prompt" tabindex="0"></i>
                                    <i data-preset-manager-rename="sysprompt" class="menu_button fa-pencil fa-solid interactable" title="Rename current prompt" data-i18n="[title]Rename current prompt" tabindex="0"></i>
                                    <i data-preset-manager-new="sysprompt" class="menu_button fa-solid fa-file-circle-plus interactable" title="Save prompt as" data-i18n="[title]Save prompt as" tabindex="0"></i>
                                    <i data-preset-manager-import="sysprompt" class="displayNone menu_button fa-solid fa-file-import interactable" title="Import template" data-i18n="[title]Import template" tabindex="0"></i>
                                    <i data-preset-manager-export="sysprompt" class="displayNone menu_button fa-solid fa-file-export interactable" title="Export template" data-i18n="[title]Export template" tabindex="0"></i>
                                    <i data-preset-manager-restore="sysprompt" class="menu_button fa-solid fa-recycle interactable" title="Restore current prompt" data-i18n="[title]Restore current prompt" tabindex="0"></i>
                                    <i data-preset-manager-delete="sysprompt" class="menu_button fa-solid fa-trash-can interactable" title="Delete prompt" data-i18n="[title]Delete prompt" tabindex="0"></i>
                                </div>
                            </div>

                            <div>
                                <label for="sysprompt_content" class="flex-container">
                                    <small data-i18n="Prompt Content">Prompt Content</small>
                                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="sysprompt_content" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                </label>
                                <textarea id="sysprompt_content" class="text_pole textarea_compact autoSetHeight" style="height: 3px;"></textarea>
                            </div>
                        </div>

                        <div>
                            &nbsp;
                        </div>

                        <div>
                            <h4 class="range-block-title justifyLeft standoutHeader">
                                <span data-i18n="Custom Stopping Strings">
                                    Custom Stopping Strings
                                </span>
                                <a href="https://docs.sillytavern.app/usage/core-concepts/advancedformatting/#custom-stopping-strings" class="notes-link" target="_blank">
                                    <span class="fa-solid fa-circle-question note-link-span"></span>
                                </a>
                            </h4>
                            <div>
                                <small>
                                    <span data-i18n="JSON serialized array of strings">JSON serialized array of strings</span>
                                    <i class="fa-solid fa-question-circle opacity50p" title="e.g: [&quot;Ford&quot;, &quot;BMW&quot;, &quot;Fiat&quot;]"></i>
                                </small>
                            </div>
                            <div>
                                <textarea id="custom_stopping_strings" class="text_pole textarea_compact monospace autoSetHeight"></textarea>
                            </div>
                            <label class="checkbox_label" for="custom_stopping_strings_macro">
                                <input id="custom_stopping_strings_macro" type="checkbox" checked="">
                                <small data-i18n="Replace Macro in Custom Stopping Strings">
                                    Replace Macro in Custom Stopping Strings
                                </small>
                            </label>
                        </div>

                        <div name="tokenizerSettingsBlock">
                            <div name="tokenizerSelectorBlock">
                                <h4 class="standoutHeader"><span data-i18n="Tokenizer">Tokenizer</span>
                                    <a href="https://docs.sillytavern.app/usage/prompts/tokenizer/" class="notes-link" target="_blank">
                                        <span class="fa-solid fa-circle-question note-link-span"></span>
                                    </a>
                                </h4>
                                <select id="tokenizer">
                                    <option value="99" selected="selected">Best match (recommended)</option>
                                    <option value="0">None / Estimated</option>
                                    <option value="1">GPT-2</option>
                                    <!-- Option #2 was a legacy GPT-2/3 tokenizer -->
                                    <option value="3">Llama 1/2</option>
                                    <option value="12">Llama 3</option>
                                    <option value="13">Gemma / Gemini</option>
                                    <option value="14">Jamba</option>
                                    <option value="15">Qwen2</option>
                                    <option value="16">Command-R</option>
                                    <option value="4">NerdStash (NovelAI Clio)</option>
                                    <option value="5">NerdStash v2 (NovelAI Kayra)</option>
                                    <option value="7">Mistral V1</option>
                                    <option value="17">Mistral Nemo</option>
                                    <option value="8">Yi</option>
                                    <option value="11">Claude 1/2</option>
                                    <option value="6">API (WebUI / koboldcpp)</option>
                                </select>
                            </div>
                            <div class="range-block flex-container flexnowrap" name="tokenPaddingBlock">
                                <div class="range-block-title justifyLeft">
                                    <small data-i18n="Token Padding">
                                        Token Padding
                                    </small>
                                </div>
                                <input id="token_padding" class="text_pole textarea_compact" type="number" min="-2048" max="2048">
                            </div>
                        </div>
                        <div>
                            <h4 class="standoutHeader" data-i18n="Miscellaneous">Miscellaneous</h4>
                            <div>
                                <small>
                                    <span data-i18n="Non-markdown strings">
                                        Non-markdown strings
                                    </span>
                                </small>
                                <div>
                                    <input id="markdown_escape_strings" class="text_pole textarea_compact" type="text" data-i18n="[placeholder]comma delimited,no spaces between" placeholder="comma delimited,no spaces between">
                                </div>
                            </div>

                            <div name="startReplyWithBlock">
                                <div>
                                    <small>
                                        <span data-i18n="Start Reply With">
                                            Start Reply With
                                        </span>
                                    </small>
                                    <div>
                                        <textarea id="start_reply_with" class="text_pole textarea_compact autoSetHeight"></textarea>
                                    </div>
                                    <label class="checkbox_label" for="chat-show-reply-prefix-checkbox">
                                        <input id="chat-show-reply-prefix-checkbox" type="checkbox">
                                        <small data-i18n="Show reply prefix in chat">
                                            Show reply prefix in chat
                                        </small>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="WI-SP-button" class="drawer">
            <div class="drawer-toggle drawer-header">
                <div id="WIDrawerIcon" class="drawer-icon fa-solid fa-book-atlas fa-fw closedIcon interactable" title="World Info" data-i18n="[title]World Info" tabindex="0"></div>
            </div>
            <div id="WorldInfo" class="drawer-content closedDrawer">
                <div id="WorldInfoheader" class="fa-solid fa-grip drag-grabber"></div>
                <div class="flex-container alignitemscenter gap10px">
                    <div id="WI_panel_pin_div" title="Locked = World Editor will stay open" data-i18n="[title]Locked = World Editor will stay open">
                        <input type="checkbox" id="WI_panel_pin">
                        <label for="WI_panel_pin">
                            <div class="unchecked fa-solid fa-unlock "></div>
                            <div class="checked fa-solid fa-lock "></div>
                        </label>
                    </div>
                    <h3 class="margin0">
                        <span data-i18n="Worlds/Lorebooks">Worlds/Lorebooks</span>
                        <a href="https://docs.sillytavern.app/usage/core-concepts/worldinfo/" class="notes-link" target="_blank">
                            <span class="fa-solid fa-circle-question note-link-span"></span>
                        </a>
                    </h3>
                </div>
                <div id="wi-holder" class="margin5">
                    <div id="wiTopBlock" class="flex-container">
                        <div id="WIMultiSelector" class="flex1 flex alignSelfStart range-block">
                            <div class="range-block-title justifyLeft">
                                <span>
                                    <small data-i18n="Active World(s) for all chats">
                                        Active World(s) for all chats
                                    </small>
                                </span>
                            </div>
                            <div class="range-block-range">
                                <select id="world_info" class="select2_multi_sameline select2-hidden-accessible select2_choice_clickable select2_choice_clickable_buttonstyle" multiple="" data-select2-id="select2-data-world_info" tabindex="-1" aria-hidden="true"><option value="0">Eldoria</option></select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="select2-data-1-fnnf" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--multiple" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="-1" aria-disabled="false"><ul class="select2-selection__rendered" id="select2-world_info-container"></ul><span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="0" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" autocomplete="off" aria-label="Search" aria-describedby="select2-world_info-container" placeholder="No Worlds active. Click here to select." style="width: 100%;"></textarea></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                        </div>
                        <div class="flex1 flex alignSelfStart range-block">
                            <div class="range-block-title justifyLeft">
                                <small data-i18n="Global World Info/Lorebook activation settings">
                                    Global World Info/Lorebook activation settings
                                </small>
                            </div>
                            <div class="inline-drawer wide100p flexFlowColumn">
                                <div class="standoutHeader inline-drawer-toggle inline-drawer-header">
                                    <b><span data-i18n="Click to expand">Click to expand</span></b>
                                    <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                </div>
                                <div class="inline-drawer-content">
                                    <div id="wiActivationSettings" class="flex-container">
                                        <div id="wiSliders" class="flex2 flex-container">
                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                                                <small>
                                                    <span data-i18n="Scan Depth">Scan Depth</span>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="world_info_depth" name="world_info_depth" min="0" max="100" step="1">
                                                <input class="neo-range-input" type="number" min="0" max="100" step="1" data-for="world_info_depth" id="world_info_depth_counter">
                                            </div>

                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                                                <small>
                                                    <span data-i18n="Context %">Context %</span>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="world_info_budget" name="world_info_budget" min="1" max="100" step="1">
                                                <input class="neo-range-input" type="number" min="1" max="100" step="1" data-for="world_info_budget" id="world_info_budget_counter">
                                            </div>

                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                                                <small>
                                                    <span data-i18n="Budget Cap">Budget Cap</span>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title](0 = disabled)" title="(0 = disabled)"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="world_info_budget_cap" name="world_info_budget_cap" min="0" max="8192" step="1">
                                                <input class="neo-range-input" type="number" min="0" max="8192" step="1" data-for="world_info_budget_cap" id="world_info_budget_cap_counter">
                                            </div>

                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p" title="Scan chronologically until reached min entries or token budget." data-i18n="[title]Scan chronologically until reached min entries or token budget.">
                                                <small>
                                                    <span data-i18n="Min Activations">Min Activations</span>
                                                    <div class="fa-solid fa-triangle-exclamation opacity50p" data-i18n="[title](disabled when max recursion steps are used)" title="(disabled when max recursion steps are used)"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="world_info_min_activations" name="world_info_min_activations" min="0" max="100" step="1">
                                                <input class="neo-range-input" type="number" min="0" max="100" step="1" data-for="world_info_min_activations" id="world_info_min_activations_counter">
                                            </div>

                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p" title="Scan chronologically until reached min entries or token budget." data-i18n="[title]Scan chronologically until reached min entries or token budget.">
                                                <small>
                                                    <span data-i18n="Max Depth">Max Depth</span>
                                                    <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title](0 = unlimited, use budget)" title="(0 = unlimited, use budget)"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="world_info_min_activations_depth_max" name="volume" min="0" max="100" step="1">
                                                <input class="neo-range-input" type="number" min="0" max="100" step="1" data-for="world_info_min_activations_depth_max" id="world_info_min_activations_depth_max_counter">
                                            </div>
                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p" title="Cap the number of entry activation recursions" data-i18n="[title]Cap the number of entry activation recursions">
                                                <small>
                                                    <span data-i18n="Max Recursion Steps">Max Recursion Steps</span>
                                                    <div class="fa-solid fa-triangle-exclamation opacity50p" data-i18n="[title]0 = unlimited, 1 = scans once and doesn't recurse, 2 = scans once and recurses once, etc\n(disabled when min activations are used)" title="0 = unlimited, 1 = scans once and doesn't recurse, 2 = scans once and recurses once, etc
(disabled when min activations are used)"></div>
                                                </small>
                                                <input class="neo-range-slider" type="range" id="world_info_max_recursion_steps" name="world_info_max_recursion_steps" min="0" max="10" step="1">
                                                <input class="neo-range-input" type="number" min="0" max="10" step="1" data-for="world_info_max_recursion_steps" id="world_info_max_recursion_steps_counter">
                                            </div>

                                            <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink flexBasis48p">
                                                <small data-i18n="Insertion Strategy">
                                                    Insertion Strategy
                                                </small>
                                                <select id="world_info_character_strategy" class="flexGrow margin0">
                                                    <option value="0" data-i18n="Sorted Evenly">Sorted Evenly</option>
                                                    <option value="1" data-i18n="Character Lore First">Character Lore First</option>
                                                    <option value="2" data-i18n="Global Lore First">Global Lore First</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div id="wiCheckboxes" class="flex1 flex-container flexFlowColumn">
                                            <label title="Include names with each message into the context for scanning" data-i18n="[title]Include names with each message into the context for scanning" class="checkbox_label flex1">
                                                <input id="world_info_include_names" type="checkbox">
                                                <small data-i18n="Include Names" class="whitespacenowrap flex1">
                                                    Include Names
                                                </small>
                                            </label>
                                            <label title="Entries can activate other entries by mentioning their keywords" data-i18n="[title]Entries can activate other entries by mentioning their keywords" class="checkbox_label flex1">
                                                <input id="world_info_recursive" type="checkbox">
                                                <small data-i18n="Recursive Scan" class="whitespacenowrap flex1">
                                                    Recursive Scan
                                                </small>
                                            </label>
                                            <label title="Lookup for the entry keys in the context will respect the case" data-i18n="[title]Lookup for the entry keys in the context will respect the case" class="checkbox_label flex1">
                                                <input id="world_info_case_sensitive" type="checkbox">
                                                <small data-i18n="Case Sensitive" class="whitespacenowrap flex1">
                                                    Case-sensitive
                                                </small>
                                            </label>
                                            <label title="If the entry key consists of only one word, it would not be matched as part of other words" data-i18n="[title]If the entry key consists of only one word, it would not be matched as part of other words" class="checkbox_label flex1">
                                                <input id="world_info_match_whole_words" type="checkbox">
                                                <small data-i18n="Match Whole Words" class="whitespacenowrap flex1">
                                                    Match Whole Words
                                                </small>
                                            </label>
                                            <label title="Only the entries with the most number of key matches will be selected for Inclusion Group filtering" data-i18n="[title]Only the entries with the most number of key matches will be selected for Inclusion Group filtering" class="checkbox_label flex1">
                                                <input id="world_info_use_group_scoring" type="checkbox">
                                                <small data-i18n="Use Group Scoring" class="whitespacenowrap flex1">
                                                    Use Group Scoring
                                                </small>
                                            </label>
                                            <label title="Alert if your world info is greater than the allocated budget." data-i18n="[title]Alert if your world info is greater than the allocated budget." class="checkbox_label flex1">
                                                <input id="world_info_overflow_alert" type="checkbox">
                                                <small data-i18n="Alert On Overflow" class="whitespacenowrap flex1">
                                                    Alert On Overflow
                                                </small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="world_popup">
                        <hr>
                        <div class="flex-container alignitemscenter gap3px">
                            <input type="file" id="world_import_file" accept=".json,.lorebook,.png" name="avatar" hidden="">
                            <div id="world_create_button" class="menu_button menu_button_icon interactable" tabindex="0">
                                <i class="fa-solid fa-globe"></i>
                                <span data-i18n="New">New</span>
                            </div>
                            <small data-i18n="or">or</small>
                            <select id="world_editor_select" class="margin0">
                                <option value="" data-i18n="--- Pick to Edit ---">--- Pick to Edit ---</option>
                            <option value="0">Eldoria</option></select>
                            <div id="world_popup_name_button" class="menu_button fa-pencil fa-solid interactable" title="Rename World Info" data-i18n="[title]Rename World Info" tabindex="0"></div>
                            <div id="OpenAllWIEntries" class="menu_button fa-solid fa-expand interactable" title="Open all Entries" data-i18n="[title]Open all Entries" tabindex="0"></div>
                            <div id="CloseAllWIEntries" class="menu_button fa-solid fa-compress interactable" title="Close all Entries" data-i18n="[title]Close all Entries" tabindex="0"></div>
                            <div id="world_popup_new" class="menu_button fa-solid fa-plus interactable" title="New Entry" data-i18n="[title]New Entry" tabindex="0"></div>
                            <div id="world_backfill_memos" class="menu_button fa-solid fa-notes-medical interactable" title="Fill empty Memo/Titles with Keywords" data-i18n="[title]Fill empty Memo/Titles with Keywords" tabindex="0"></div>
                            <div id="world_apply_current_sorting" class="menu_button fa-solid fa-arrow-down-9-1 interactable" title="Apply current sorting as Order" data-i18n="[title]Apply current sorting as Order" tabindex="0"></div>
                            <div id="world_import_button" class="menu_button fa-solid fa-file-import interactable" title="Import World Info" data-i18n="[title]Import World Info" tabindex="0"></div>
                            <div id="world_popup_export" class="menu_button fa-solid fa-file-export interactable" title="Export World Info" data-i18n="[title]Export World Info" tabindex="0"></div>
                            <div id="world_duplicate" class="menu_button fa-solid fa-paste interactable" title="Duplicate World Info" data-i18n="[title]Duplicate World Info" tabindex="0"></div>
                            <div id="world_popup_delete" class="menu_button fa-solid fa-trash-can redWarningBG interactable" title="Delete World Info" data-i18n="[title]Delete World Info" tabindex="0"></div>
                            <input type="search" class="text_pole textarea_compact" data-i18n="[placeholder]Search..." id="world_info_search" placeholder="Search...">
                            <select id="world_info_sort_order" class="margin0">
                                <option data-rule="search" value="14" data-i18n="Search" hidden="">Search</option>
                                <option data-rule="priority" value="0" data-i18n="Priority">Priority</option>
                                <option data-rule="custom" value="13" data-i18n="Custom">Custom</option>
                                <option data-order="asc" data-field="comment" value="1" data-i18n="Title A-Z">Title A-Z</option>
                                <option data-order="desc" data-field="comment" value="2" data-i18n="Title Z-A">Title Z-A</option>
                                <option data-order="asc" data-field="content" data-rule="length" value="3" data-i18n="Tokens ↗">Tokens ↗</option>
                                <option data-order="desc" data-field="content" data-rule="length" value="4" data-i18n="Tokens ↘">Tokens ↘</option>
                                <option data-order="asc" data-field="depth" value="5" data-i18n="Depth ↗">Depth ↗</option>
                                <option data-order="desc" data-field="depth" value="6" data-i18n="Depth ↘">Depth ↘</option>
                                <option data-order="asc" data-field="order" value="7" data-i18n="Order ↗">Order ↗</option>
                                <option data-order="desc" data-field="order" value="8" data-i18n="Order ↘">Order ↘</option>
                                <option data-order="asc" data-field="uid" value="9" data-i18n="UID ↗">UID ↗</option>
                                <option data-order="desc" data-field="uid" value="10" data-i18n="UID ↘">UID ↘</option>
                                <option data-order="asc" data-field="probability" value="11" data-i18n="Trigger% ↗">Trigger% ↗</option>
                                <option data-order="desc" data-field="probability" value="12" data-i18n="Trigger% ↘">Trigger% ↘</option>
                            </select>
                            <div id="world_refresh" class="menu_button fa-solid fa-arrows-rotate interactable" title="Refresh" data-i18n="[title]Refresh" tabindex="0"></div>
                            <div id="world_info_pagination"></div>
                        </div>
                        <div id="world_popup_entries_list" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="user-settings-button" class="drawer">
            <div class="drawer-toggle">
                <div class="drawer-icon fa-solid fa-user-cog fa-fw closedIcon interactable" title="User Settings" data-i18n="[title]User Settings" tabindex="0"></div>
            </div>
            <div id="user-settings-block" class="drawer-content closedDrawer">
                <div class="flex-container flexFlowColumn">
                    <div name="userSettingsRowOne" class="flex-container flexFlowRow alignitemscenter spaceBetween">
                        <div class="flex-container">
                            <div class="flex-container flexnowrap alignItemsBaseline">
                                <h3 class="margin0">
                                    <span data-i18n="User Settings">User Settings</span>

                                    <a href="https://docs.sillytavern.app/usage/user_settings/" class="notes-link" target="_blank">
                                        <span class="fa-solid fa-circle-question note-link-span"></span>
                                    </a>
                                </h3>
                            </div>
                        </div>
                        <div id="UI-language-block" class="flex-container alignItemsBaseline">
                            <span data-i18n="UI Language">Language:</span>
                            <select id="ui_language_select" class="flex1 margin0">
                                <option value="" data-i18n="Default">Default</option>
                                <option value="en">English</option>
                            <option value="ar-sa">عربي (Arabic)</option><option value="zh-cn">简体中文 (Chinese) (Simplified)</option><option value="zh-tw">繁體中文 (Chinese) (Taiwan)</option><option value="nl-nl">Nederlands (Dutch)</option><option value="de-de">Deutsch (German)</option><option value="fr-fr">Français (French)</option><option value="is-is">íslenska (Icelandic)</option><option value="it-it">Italiano (Italian)</option><option value="ja-jp">日本語 (Japanese)</option><option value="ko-kr">한국어 (Korean)</option><option value="pt-pt">Português (Portuguese brazil)</option><option value="ru-ru">Русский (Russian)</option><option value="es-es">Español (Spanish)</option><option value="uk-ua">Yкраїнська (Ukrainian)</option><option value="vi-vn">Tiếng Việt (Vietnamese)</option></select>
                        </div>
                        <small id="version_display">SillyTavern 1.12.9 'staging' (57a7d549c)</small>
                    </div>
                    <div name="UserSettingsRowTwo" class="flex-container flexFlowRow">
                        <div id="account_controls" class="flex-container">
                            <div id="account_button" class="margin0 menu_button_icon menu_button interactable" tabindex="0">
                                <i class="fa-fw fa-solid fa-user-shield"></i>
                                <span data-i18n="Account">Account</span>
                            </div>
                            <div id="admin_button" class="margin0 menu_button_icon menu_button interactable" style="display: none;" tabindex="0">
                                <i class="fa-fw fa-solid fa-user-tie"></i>
                                <span data-i18n="Admin Panel">Admin Panel</span>
                            </div>
                            <div id="logout_button" class="margin0 menu_button_icon menu_button interactable" style="display: none;" tabindex="0">
                                <i class="fa-fw fa-solid fa-right-from-bracket"></i>
                                <span data-i18n="Logout">Logout</span>
                            </div>
                        </div>
                        <textarea id="settingsSearch" class="textarea_compact flex1" rows="1" placeholder="Search Settings" data-i18n="[placeholder]Search Settings"></textarea>
                    </div>
                </div>
                <div id="user-settings-block-content" class="flex-container spaceEvenly">
                    <div name="UserSettingsFirstColumn" id="UI-Theme-Block" class="flex-container flexFlowColumn wide100p flex1">
                        <div id="UI-presets-block" class="flex-container flexFlowColumn">
                            <h4 class="title_restorable">
                                <span data-i18n="UI Theme">UI Theme</span>
                                <div class="flex-container">
                                    <div id="ui_preset_import_button" class="menu_button menu_button_icon margin0 interactable" title="Import a theme file" data-i18n="[title]Import a theme file" tabindex="0">
                                        <i class="fa-solid fa-file-import"></i>
                                    </div>
                                    <div id="ui_preset_export_button" class="menu_button menu_button_icon margin0 interactable" title="Export a theme file" data-i18n="[title]Export a theme file" tabindex="0">
                                        <i class="fa-solid fa-file-export"></i>
                                    </div>
                                    <div id="ui-preset-delete-button" class="menu_button menu_button_icon margin0 interactable" title="Delete a theme" data-i18n="[title]Delete a theme" tabindex="0">
                                        <i class="fa-solid fa-trash-can"></i>
                                    </div>
                                </div>
                                <input type="file" id="ui_preset_import_file" accept=".json" hidden="">
                            </h4>
                            <div class="flex-container flexnowrap alignitemscenter">
                                <select id="themes" class="margin0">
                                <option value="Azure">Azure</option><option value="Cappuccino">Cappuccino</option><option value="Celestial Macaron">Celestial Macaron</option><option value="Dark Lite">Dark Lite</option><option value="Dark V 1.0">Dark V 1.0</option></select>
                                <div id="ui-preset-update-button" title="Update a theme file" data-i18n="[title]Update a theme file" class="menu_button margin0 interactable" tabindex="0">
                                    <i class="fa-solid fa-save"></i>
                                </div>
                                <div id="ui-preset-save-button" title="Save as a new theme" data-i18n="[title]Save as a new theme" class="menu_button margin0 interactable" tabindex="0">
                                    <i class="fa-solid fa-file-circle-plus"></i>
                                </div>
                            </div>
                        </div>
                        <div name="themeElements" class="flex-container flexFlowColumn flexNoGap">
                            <!-- <h4><span data-i18n="UI Colors">Theme Settings</span></h4> -->
                            <div name="AvatarAndChatDisplay" class="flex-container flexFlowColumn">
                                <div class="flex-container alignItemsBaseline">
                                    <span data-i18n="Avatar Style">Avatars:</span>
                                    <select id="avatar_style" class="widthNatural flex1 margin0">
                                        <option value="0" data-i18n="Circle">Circle</option>
                                        <option value="2" data-i18n="Square">Square</option>
                                        <option value="1" data-i18n="Rectangle">Rectangle</option>
                                    </select>
                                </div>
                                <div class="flex-container alignItemsBaseline">
                                    <span data-i18n="Chat Style:">Chat Style:</span><br>
                                    <select id="chat_display" class="widthNatural flex1 margin0">
                                        <option value="0" data-i18n="Flat" selected="selected">Flat</option>
                                        <option value="1" data-i18n="Bubbles">Bubbles</option>
                                        <option value="2" data-i18n="Document">Document</option>
                                    </select>
                                </div>
                            </div>
                            <div class="inline-drawer wide100p flexFlowColumn">
                                <div class="inline-drawer-toggle inline-drawer-header userSettingsInnerExpandable" title="Specify colors for your theme." data-i18n="[title]Specify colors for your theme.">
                                    <b><span data-i18n="Theme Colors">Theme Colors</span></b>
                                    <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                </div>
                                <div class="inline-drawer-content">
                                    <div id="color-picker-block" class="flex-container flexFlowColumn flexNoGap">
                                        <div class="flex-container">
                                            <toolcool-color-picker id="main-text-color-picker" color="rgba(220, 220, 210, 1)"></toolcool-color-picker>
                                            <span data-i18n="Main Text">Main Text</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="italics-color-picker" color="rgba(145, 145, 145, 1)"></toolcool-color-picker>
                                            <span data-i18n="Italics Text">Italics Text</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="underline-color-picker" color="rgba(188, 231, 207, 1)"></toolcool-color-picker>
                                            <span data-i18n="Underlined Text">Underlined Text</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="quote-color-picker" color="rgba(225, 138, 36, 1)"></toolcool-color-picker>
                                            <span data-i18n="Quote Text">Quote Text</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="shadow-color-picker" color="rgba(0, 0, 0, 1)"></toolcool-color-picker>
                                            <span data-i18n="Shadow Color">Text Shadow</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="chat-tint-color-picker" color="rgba(23, 23, 23, 1)"></toolcool-color-picker>
                                            <span data-i18n="Chat Background">Chat Background</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="blur-tint-color-picker" color="rgba(23, 23, 23, 1)"></toolcool-color-picker>
                                            <span data-i18n="UI Background">UI Background</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="border-color-picker" color="rgba(0, 0, 0, 0.5)"></toolcool-color-picker>
                                            <span data-i18n="UI Border">UI Border</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="user-mes-blur-tint-color-picker" color="rgba(30, 30, 30, 0.9)"></toolcool-color-picker>
                                            <span data-i18n="User Message Blur Tint">User Message</span>
                                        </div>
                                        <div class="flex-container">
                                            <toolcool-color-picker id="bot-mes-blur-tint-color-picker" color="rgba(30, 30, 30, 0.9)"></toolcool-color-picker>
                                            <span data-i18n="AI Message Blur Tint">AI Message</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div name="FontBlurChatWidthBlock" class="flex-container">

                                <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                    <small>
                                        <span>
                                            <span data-i18n="Chat Width">Chat Width</span>
                                            <i class="fa-solid fa-desktop"></i>
                                        </span>
                                        <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Width of the main chat window in % of screen width" title="Width of the main chat window in % of screen width"></div>
                                    </small>
                                    <input class="neo-range-slider" type="range" id="chat_width_slider" name="chat_width_slider" min="25" max="100" step="1">
                                    <input class="neo-range-input" type="number" min="25" max="100" step="1" data-for="chat_width_slider" id="chat_width_slider_counter">
                                </div>

                                <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                    <small>
                                        <span data-i18n="Font Scale">Font Scale</span>
                                        <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Font size" title="Font size"></div>
                                    </small>
                                    <input class="neo-range-slider" type="range" id="font_scale" name="font_scale" min="0.5" max="1.5" step="0.01">
                                    <input class="neo-range-input" type="number" min="0.5" max="1.5" step="0.01" data-for="font_scale" id="font_scale_counter">
                                </div>

                                <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                    <small>
                                        <span data-i18n="Blur Strength">Blur Strength</span>
                                        <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Blur strength on UI panels." title="Blur strength on UI panels."></div>
                                    </small>
                                    <input class="neo-range-slider" type="range" id="blur_strength" name="blur_strength" min="0" max="30" step="1" disabled="">
                                    <input class="neo-range-input" type="number" min="0" max="30" step="1" data-for="blur_strength" id="blur_strength_counter">
                                </div>

                                <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                    <small>
                                        <span data-i18n="Text Shadow Width">Shadow Width</span>
                                        <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Strength of the text shadows" title="Strength of the text shadows"></div>
                                    </small>
                                    <input class="neo-range-slider" type="range" id="shadow_width" name="shadow_width" min="0" max="5" step="1" disabled="">
                                    <input class="neo-range-input" type="number" min="0" max="5" step="1" data-for="shadow_width" id="shadow_width_counter">
                                </div>
                            </div>
                            <hr>
                            <div name="themeToggles">
                                <!-- <h4 data-i18n="Theme Toggles">Theme Toggles</h4> -->

                                <label for="reduced_motion" class="checkbox_label" title="Disable animations and transitions" data-i18n="[title]Disables animations and transitions">
                                    <input id="reduced_motion" type="checkbox">
                                    <small data-i18n="Reduced Motion">Reduced Motion</small>
                                </label>
                                <label for="fast_ui_mode" class="checkbox_label" title="Remove blur from window backgrounds, for faster rendering." data-i18n="[title]removes blur from window backgrounds">
                                    <input id="fast_ui_mode" type="checkbox">
                                    <small data-i18n="No Blur Effect">No Blur Effect</small>
                                </label>
                                <label for="noShadowsmode" class="checkbox_label" title="Remove text shadow effect." data-i18n="[title]Remove text shadow effect">
                                    <input id="noShadowsmode" type="checkbox">
                                    <small data-i18n="No Text Shadows">No Text Shadows</small>
                                </label>
                                <label for="waifuMode" class="checkbox_label" title="Reduce chat height, and put a static sprite behind the chat window." data-i18n="[title]Reduce chat height, and put a static sprite behind the chat window">
                                    <input id="waifuMode" type="checkbox">
                                    <small data-i18n="Waifu Mode">Visual Novel Mode</small>
                                </label>
                                <label for="expandMessageActions" class="checkbox_label" title="Always show the full list of the Message Actions context items for chat messages, instead of hiding them behind '...'." data-i18n="[title]Always show the full list of the Message Actions context items for chat messages, instead of hiding them behind '...'">
                                    <input id="expandMessageActions" type="checkbox">
                                    <small data-i18n="Auto-Expand Message Actions">Expand Message Actions</small>
                                </label>
                                <label for="enableZenSliders" class="checkbox_label" title="Alternative UI for numeric sampling parameters with fewer steps." data-i18n="[title]Alternative UI for numeric sampling parameters with fewer steps">
                                    <input id="enableZenSliders" type="checkbox">
                                    <small data-i18n="Zen Sliders">Zen Sliders</small>
                                </label>
                                <label for="enableLabMode" class="checkbox_label" title="Entirely unrestrict all numeric sampling parameters." data-i18n="[title]Entirely unrestrict all numeric sampling parameters">
                                    <input id="enableLabMode" type="checkbox">
                                    <small data-i18n="Mad Lab Mode">Mad Lab Mode</small>
                                </label>
                                <label for="messageTimerEnabled" class="checkbox_label" title="Time the AI's message generation, and show the duration in the chat log." data-i18n="[title]Time the AI's message generation, and show the duration in the chat log">
                                    <input id="messageTimerEnabled" type="checkbox">
                                    <small data-i18n="Message Timer">Message Timer</small>
                                </label>
                                <label for="messageTimestampsEnabled" class="checkbox_label" title="Show a timestamp for each message in the chat log." data-i18n="[title]Show a timestamp for each message in the chat log">
                                    <input id="messageTimestampsEnabled" type="checkbox">
                                    <small data-i18n="Chat Timestamps">Chat Timestamps</small>
                                </label>
                                <label for="messageModelIconEnabled" class="checkbox_label" title="Show an icon for the API that generated the message." data-i18n="[title]Show an icon for the API that generated the message">
                                    <input id="messageModelIconEnabled" type="checkbox">
                                    <small data-i18n="Model Icon">Model Icons</small>
                                </label>
                                <label for="mesIDDisplayEnabled" class="checkbox_label" title="Show sequential message numbers in the chat log." data-i18n="[title]Show sequential message numbers in the chat log">
                                    <input id="mesIDDisplayEnabled" type="checkbox">
                                    <small data-i18n="Message IDs">Message IDs</small>
                                </label>
                                <label for="hideChatAvatarsEnabled" class="checkbox_label" title="Hide avatars in chat messages." data-i18n="[title]Hide avatars in chat messages.">
                                    <input id="hideChatAvatarsEnabled" type="checkbox">
                                    <small data-i18n="Hide Chat Avatars">Hide Chat Avatars</small>
                                </label>
                                <label for="messageTokensEnabled" class="checkbox_label" title="Show the number of tokens for each message in the chat log." data-i18n="[title]Show the number of tokens in each message in the chat log">
                                    <input id="messageTokensEnabled" type="checkbox">
                                    <small data-i18n="Show Message Token Count">Message Token Count</small>
                                </label>
                                <label for="compact_input_area" class="checkbox_label" title="Single-row message input area. Mobile only, no effect on PC." data-i18n="[title]Single-row message input area. Mobile only, no effect on PC">
                                    <input id="compact_input_area" type="checkbox">
                                    <small data-i18n="Compact Input Area (Mobile)">Compact Input Area</small><i class="fa-solid fa-mobile-screen-button"></i>
                                </label>
                                <label for="show_swipe_num_all_messages" class="checkbox_label" title="Display swipe numbers for all messages, not just the last." data-i18n="[title]Display swipe numbers for all messages, not just the last.">
                                    <input id="show_swipe_num_all_messages" type="checkbox">
                                    <small data-i18n="Swipe # for All Messages">Swipe # for All Messages</small>
                                </label>
                                <label for="hotswapEnabled" class="checkbox_label" title="In the Character Management panel, show quick selection buttons for favorited characters." data-i18n="[title]In the Character Management panel, show quick selection buttons for favorited characters">
                                    <input id="hotswapEnabled" type="checkbox">
                                    <small data-i18n="Characters Hotswap">Characters Hotswap</small>
                                </label>
                                <label for="zoomed_avatar_magnification" class="checkbox_label" title="Enable magnification for zoomed avatar display." data-i18n="[title]Enable magnification for zoomed avatar display.">
                                    <input id="zoomed_avatar_magnification" type="checkbox">
                                    <small data-i18n="Avatar Hover Magnification">Avatar Hover Magnification</small>
                                    <i title="Enables a magnification effect on hover when you display the zoomed avatar after clicking an avatar's image in chat." data-i18n="[title]Enables a magnification effect on hover when you display the zoomed avatar after clicking an avatar's image in chat." class="right_menu_button fa-solid fa-circle-exclamation interactable" tabindex="0"></i>
                                </label>
                                <label for="bogus_folders" class="checkbox_label" title="Show tagged character folders in the character list." data-i18n="[title]Show tagged character folders in the character list">
                                    <input id="bogus_folders" type="checkbox">
                                    <small data-i18n="Tags as Folders">Tags as Folders</small>
                                    <i title="Recent change: Tags must be marked as folders in the Tag Management menu to appear as such. Click here to bring it up." data-i18n="[title]Tags_as_Folders_desc" class="tags_view right_menu_button fa-solid fa-circle-exclamation interactable" tabindex="0"></i>
                                </label>

                            </div>


                        </div>
                    </div>
                    <div name="UserSettingsSecondColumn" id="UI-Customization" class="flex-container flexFlowColumn wide100p flexNoGap flex1">
                        <div name="CharacterHandlingToggles">
                            <h4 data-i18n="Character Handling">
                                Character Handling
                            </h4>
                            <div class="flex-container alignitemscenter" title="If set in the advanced character definitions, this field will be displayed in the characters list." data-i18n="[title]If set in the advanced character definitions, this field will be displayed in the characters list.">
                                <label for="aux_field"><small data-i18n="Char List Subheader">Char List Subheader</small></label>
                                <select id="aux_field" class="widthNatural flex1 margin0">
                                    <option data-i18n="Character Version" value="character_version">Character Version</option>
                                    <option data-i18n="Created by" value="creator">Created by</option>
                                </select>
                            </div>
                            <div class="flex-container alignitemscenter" title="Defines on importing cards which action should be chosen for importing its listed tags. 'Ask' will always display the dialog." data-i18n="[title]Defines on importing cards which action should be chosen for importing its listed tags. 'Ask' will always display the dialog.">
                                <label for="tag_import_setting"><small data-i18n="Import Card Tags">Import Card Tags</small></label>
                                <select id="tag_import_setting" class="widthNatural flex1 margin0">
                                    <option data-i18n="Ask" value="1">Ask</option>
                                    <option data-i18n="tag_import_none" value="2">None</option>
                                    <option data-i18n="tag_import_all" value="3">All</option>
                                    <option data-i18n="Existing" value="4">Existing</option>
                                </select>
                            </div>
                            <label class="checkbox_label" for="fuzzy_search_checkbox" title="Use fuzzy matching, and search characters in the list by all data fields, not just by a name substring." data-i18n="[title]Use fuzzy matching, and search characters in the list by all data fields, not just by a name substring">
                                <input id="fuzzy_search_checkbox" type="checkbox">
                                <small data-i18n="Advanced Character Search">Advanced Character Search</small>
                            </label>
                            <label for="prefer_character_prompt" title="If checked and the character card contains a prompt override (System Prompt), use that instead." data-i18n="[title]If checked and the character card contains a prompt override (System Prompt), use that instead" class="checkbox_label">
                                <input id="prefer_character_prompt" type="checkbox">
                                <small data-i18n="Prefer Character Card Prompt">Prefer Char. Prompt</small>
                            </label>
                            <label for="prefer_character_jailbreak" title="If checked and the character card contains a Post-History Instructions override, use that instead." data-i18n="[title]If checked and the character card contains a Post-History Instructions override, use that instead" class="checkbox_label">
                                <input id="prefer_character_jailbreak" type="checkbox">
                                <small data-i18n="Prefer Character Card Instructions">Prefer Char. Instructions</small>
                            </label>
                            <label class="checkbox_label" for="never_resize_avatars" title="Avoid cropping and resizing imported character images. When off, crop/resize to 512x768." data-i18n="[title]Avoid cropping and resizing imported character images. When off, crop/resize to 512x768">
                                <input id="never_resize_avatars" type="checkbox">
                                <small data-i18n="Never resize avatars">Never resize avatars</small>
                            </label>
                            <label class="checkbox_label" for="show_card_avatar_urls" title="Show actual file names on the disk, in the characters list display only." data-i18n="[title]Show actual file names on the disk, in the characters list display only">
                                <input id="show_card_avatar_urls" type="checkbox">
                                <small data-i18n="Show avatar filenames">Show avatar filenames</small>
                            </label>
                            <label class="checkbox_label" for="spoiler_free_mode" title="Hide character definitions from the editor panel behind a spoiler button." data-i18n="[title]Hide character definitions from the editor panel behind a spoiler button">
                                <input id="spoiler_free_mode" type="checkbox">
                                <small data-i18n="Spoiler Free Mode">Spoiler Free Mode</small>
                            </label>

                        </div>

                        <div name="MiscellaneousToggles">
                            <h4><span data-i18n="Miscellaneous">Miscellaneous</span></h4>
                            <div class="flex-container">
                                <div id="reload_chat" class="menu_button whitespacenowrap interactable" data-i18n="[title]Reload and redraw the currently open chat" title="Reload and redraw the currently open chat." tabindex="0">
                                    <small data-i18n="Reload Chat">Reload Chat</small>
                                </div>
                                <div id="debug_menu" class="menu_button whitespacenowrap interactable" tabindex="0">
                                    <small data-i18n="Debug Menu">Debug Menu</small>
                                </div>
                            </div>
                            <label class="checkbox_label flexWrap" for="smooth_streaming">
                                <input id="smooth_streaming" type="checkbox">
                                <div class="flex-container alignItemsBaseline">
                                    <small data-i18n="Smooth Streaming">
                                        Smooth Streaming
                                    </small>
                                    <i class="fa-solid fa-flask" data-i18n="[title]Experimental feature. May not work for all backends." title="Experimental feature. May not work for all backends."></i>
                                </div>
                                <div id="smooth_streaming_speed_control" class="flexBasis100p wide100p">
                                    <input type="range" id="smooth_streaming_speed" name="smooth_streaming_speed" min="0" max="100" step="10" value="50">
                                    <div class="slider_hint">
                                        <span data-i18n="Slow">Slow</span>
                                        <span></span>
                                        <span data-i18n="Fast">Fast</span>
                                    </div>
                                </div>
                            </label>

                            <label for="play_message_sound" class="checkbox_label" title="Play a sound when a message generation finishes." data-i18n="[title]Play a sound when a message generation finishes">
                                <input id="play_message_sound" type="checkbox">
                                <audio id="audio_message_sound" src="sounds/message.mp3" hidden=""></audio>
                                <span>
                                    <small data-i18n="Message Sound">Message Sound</small>
                                </span>
                            </label>
                            <label for="play_sound_unfocused" class="checkbox_label" title="Only play a sound when ST's browser tab is unfocused." data-i18n="[title]Only play a sound when ST's browser tab is unfocused">
                                <input id="play_sound_unfocused" type="checkbox">
                                <small data-i18n="Background Sound Only">Background Sound Only</small>
                            </label>
                            <label class="checkbox_label" for="relaxed_api_urls" title="Reduce the formatting requirements on API URLs." data-i18n="[title]Reduce the formatting requirements on API URLs">
                                <input id="relaxed_api_urls" type="checkbox">
                                <small data-i18n="Relaxed API URLS">Relaxed API URLs</small>
                            </label>
                            <label class="checkbox_label" for="world_import_dialog" title="Ask to import the World Info/Lorebook for every new character with embedded lorebook. If unchecked, a brief message will be shown instead." data-i18n="[title]Ask to import the World Info/Lorebook for every new character with embedded lorebook. If unchecked, a brief message will be shown instead">
                                <input id="world_import_dialog" type="checkbox">
                                <small data-i18n="Lorebook Import Dialog">Lorebook Import Dialog</small>
                            </label>
                            <label class="checkbox_label" for=" enable_auto_select_input" title="Enable auto-select of input text in some text fields when clicking/selecting them. Applies to popup input textboxes, and possible other custom input fields." data-i18n="[title]Enable auto-select of input text in some text fields when clicking/selecting them. Applies to popup input textboxes, and possible other custom input fields.">
                                <input id="enable_auto_select_input" type="checkbox">
                                <small data-i18n="Auto-select Input Text">Auto-select Input Text</small>
                            </label>
                            <label class="checkbox_label alignItemsCenter" for="enable_md_hotkeys" data-i18n="[title]markdown_hotkeys_desc" title="Enable hotkeys for inserting markdown format characters in certain text input boxes. See '/help hotkeys'.">
                                <input id="enable_md_hotkeys" type="checkbox">
                                <small>
                                    <span data-i18n="Markdown Hotkeys">Markdown Hotkeys</span>
                                    <i class="fa-brands fa-markdown"></i>
                                </small>
                            </label>
                            <label class="checkbox_label" for="restore_user_input" title="Restore unsaved user input on page refresh." data-i18n="[title]Restore unsaved user input on page refresh">
                                <input id="restore_user_input" type="checkbox">
                                <small data-i18n="Restore User Input">Restore User Input</small>
                            </label>
                            <div class="flex-container alignItemsCenter">
                                <label id="movingUIModeCheckBlock" for="movingUImode" class="checkbox_label" title="Allow repositioning certain UI elements by dragging them. PC only, no effect on mobile." data-i18n="[title]Allow repositioning certain UI elements by dragging them. PC only, no effect on mobile">
                                    <input id="movingUImode" type="checkbox">
                                    <small>
                                        <span data-i18n="Movable UI Panels">MovingUI</span>
                                        <i class="fa-solid fa-desktop"></i>
                                    </small>
                                </label>
                                <div id="movingUIreset" title="Reset MovingUI panel sizes/locations." class="menu_button margin0 interactable" data-i18n="[title]Reset MovingUI panel sizes/locations." tabindex="0">
                                    <i class=" fa-solid fa-recycle margin-r5"></i>
                                    <span data-i18n="mui_reset">Reset</span>
                                </div>
                            </div>
                            <div id="MovingUI-presets-block" class="flex-container alignitemscenter">
                                <div class="flex-container alignItemsFlexEnd">
                                    <label for="movingUIPresets" title="MovingUI preset. Predefined/saved draggable positions." data-i18n="[title]MovingUI preset. Predefined/saved draggable positions">
                                        <small data-i18n="MUI Preset">MovingUI Preset:</small>
                                        <div class="flex-container flexnowrap">
                                            <select id="movingUIPresets" class="widthNatural flex1 margin0">
                                            <option value="Black Magic Time">Black Magic Time</option><option value="Default">Default</option></select>
                                        </div>
                                    </label>
                                    <div id="movingui-preset-save-button" title="Save changes to a new MovingUI preset file." data-i18n="[title]Save movingUI changes to a new file" class="menu_button margin0 fa-solid fa-save interactable" tabindex="0"></div>
                                </div>
                            </div>
                            <div id="CustomCSS-block" class="flex-container flexFlowColumn">
                                <h4 class="title_restorable" title="Apply a custom CSS style to all of the ST GUI." data-i18n="[title]Apply a custom CSS style to all of the ST GUI">
                                    <span data-i18n="Custom CSS">Custom CSS</span>
                                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="customCSS" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                </h4>
                                <div id="CustomCSS-textAreaBlock" class="flex-container flexnowrap alignitemscenter">
                                    <textarea id="customCSS" class="text_pole margin0 margin-r5 textarea_compact monospace" rows="8"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div name="UserSettingsThirdColumn" id="power-user-options-block" class="flex-container wide100p flex1">
                        <div id="power-user-option-checkboxes">

                            <div name="ChatMessageHandlingToggles">
                                <h4 data-i18n="Chat/Message Handling">Chat/Message Handling</h4>
                                <div class="flex-container">
                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="# Messages to Load"># Msg. to Load</span>

                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]The number of chat history messages to load before pagination." title="The number of chat history messages to load before pagination."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="chat_truncation" name="chat_truncation" min="0" max="1000" step="5">
                                        <input class="neo-range-input" type="number" min="0" max="1000" step="5" data-for="chat_truncation" id="chat_truncation_counter">
                                        <small data-i18n="(0 = All)">(0 = All)</small>
                                    </div>

                                    <div class="alignitemscenter flex-container flexFlowColumn flexBasis48p flexGrow flexShrink gap0">
                                        <small>
                                            <span data-i18n="Streaming FPS">Streaming FPS</span>
                                            <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]Update speed of streamed text." title="Update speed of streamed text."></div>
                                        </small>
                                        <input class="neo-range-slider" type="range" id="streaming_fps" name="streaming_fps" min="5" max="100" step="5">
                                        <input class="neo-range-input" type="number" min="5" max="100" step="5" data-for="streaming_fps" id="streaming_fps_counter">
                                    </div>
                                </div>
                                <div id="examples-behavior-block">
                                    <label>
                                        <small data-i18n="Example Messages Behavior">
                                            Example Messages Behavior:
                                        </small>
                                    </label>
                                    <select id="example_messages_behavior">
                                        <option value="normal" data-i18n="Gradual push-out">Gradual push-out</option>
                                        <option value="keep" data-i18n="Always include examples">Always include examples</option>
                                        <option value="strip" data-i18n="Never include examples">Never include examples</option>
                                    </select>
                                </div>
                                <div class="flex-container alignitemscenter">
                                    <small data-i18n="Send on Enter">
                                        Enter to Send:
                                    </small>
                                    <select id="send_on_enter" class="widthNatural flex1 margin0">
                                        <option value="-1" data-i18n="Disabled">Disabled</option>
                                        <option value="0" data-i18n="Automatic (PC)" selected="selected">Automatic (PC)</option>
                                        <option value="1" data-i18n="Enabled">Enabled</option>
                                    </select>
                                </div>
                                <label class="checkbox_label" for="continue_on_send">
                                    <input id="continue_on_send" type="checkbox">
                                    <small data-i18n="Press Send to continue">
                                        "Send" to Continue
                                    </small>
                                </label>
                                <label class="checkbox_label" for="quick_continue" title="Show a button in the input area to ask the AI to continue (extend) its last message." data-i18n="[title]Show a button in the input area to ask the AI to continue (extend) its last message">
                                    <input id="quick_continue" type="checkbox">
                                    <small data-i18n="Quick 'Continue' button">
                                        Quick "Continue" button
                                    </small>
                                </label>
                                <label class="checkbox_label" for="quick_impersonate" title="Show a button in the input area to ask the AI to impersonate your character for a single message." data-i18n="[title]Show a button in the input area to ask the AI to impersonate your character for a single message">
                                    <input id="quick_impersonate" type="checkbox">
                                    <small data-i18n="Quick 'Impersonate' button">
                                        Quick "Impersonate" button
                                    </small>
                                </label>
                                <div class="checkbox-container flex-container">
                                    <label class="checkbox_label" for="swipes-checkbox" title="Show arrow buttons on the last in-chat message to generate alternative AI responses. Both PC and mobile." data-i18n="[title]Show arrow buttons on the last in-chat message to generate alternative AI responses. Both PC and mobile">
                                        <input id="swipes-checkbox" type="checkbox">
                                        <small data-i18n="Swipes">Swipes</small><i class="fa-solid fa-desktop"></i><i class="fa-solid fa-mobile-screen-button"></i>
                                    </label>
                                    <label class="checkbox_label" for="gestures-checkbox" title="Allow using swiping gestures on the last in-chat message to trigger swipe generation. Mobile only, no effect on PC." ,="" data-i18n="[title]Allow using swiping gestures on the last in-chat message to trigger swipe generation. Mobile only, no effect on PC">
                                        <input id="gestures-checkbox" type="checkbox">
                                        <small data-i18n="Gestures">Gestures</small>
                                        <i class="fa-solid fa-mobile-screen-button"></i>
                                    </label>
                                </div>
                                <label class="checkbox_label" for="auto-load-chat-checkbox">
                                    <input id="auto-load-chat-checkbox" type="checkbox">
                                    <small data-i18n="Auto-load Last Chat">Auto-load Last Chat</small>
                                </label>
                                <label for="auto_scroll_chat_to_bottom" class="checkbox_label">
                                    <input id="auto_scroll_chat_to_bottom" type="checkbox">
                                    <small data-i18n="Auto-scroll Chat">Auto-scroll Chat</small>
                                </label>
                                <label class="checkbox_label" for="auto_save_msg_edits" title="Save edits to messages without confirmation as you type." data-i18n="[title]Save edits to messages without confirmation as you type">
                                    <input id="auto_save_msg_edits" type="checkbox">
                                    <small data-i18n="Auto-save Message Edits">Auto-save Message Edits</small>
                                </label>
                                <label class="checkbox_label" for="confirm_message_delete">
                                    <input id="confirm_message_delete" type="checkbox">
                                    <small data-i18n="Confirm message deletion">Confirm message deletion</small>
                                </label>
                                <label class="checkbox_label" for="auto_fix_generated_markdown">
                                    <input id="auto_fix_generated_markdown" type="checkbox">
                                    <small data-i18n="Auto-fix Markdown">Auto-fix Markdown</small>
                                </label>
                                <label class="checkbox_label" for="forbid_external_media" title="Disallow embedded media from other domains in chat messages." data-i18n="[title]Disallow embedded media from other domains in chat messages">
                                    <input id="forbid_external_media" type="checkbox">
                                    <small data-i18n="Forbid External Media">Forbid External Media</small>
                                </label>
                                <label class="checkbox_label" for="allow_name2_display">
                                    <input id="allow_name2_display" type="checkbox">
                                    <small data-i18n="Allow {{char}}: in bot messages">Show {{char}}: in responses</small>
                                </label>
                                <label class="checkbox_label" for="allow_name1_display">
                                    <input id="allow_name1_display" type="checkbox">
                                    <small data-i18n="Allow {{user}}: in bot messages">Show {{user}}: in responses</small>
                                </label>
                                <label class="checkbox_label" for="encode_tags" title="Skip encoding < and > characters in message text, allowing a subset of HTML markup as well as Markdown." data-i18n="[title]Skip encoding  and  characters in message text, allowing a subset of HTML markup as well as Markdown">
                                    <input id="encode_tags" type="checkbox">
                                    <small data-i18n="Show tags in responses">Show &lt;tags&gt; in responses</small>
                                </label>
                                <label class="checkbox_label" for="disable_group_trimming" title="Allow AI messages in groups to contain lines spoken by other group members." data-i18n="[title]Allow AI messages in groups to contain lines spoken by other group members">
                                    <input id="disable_group_trimming" type="checkbox">
                                    <small data-i18n="Relax message trim in Groups">Relax message trim in Groups</small>
                                </label>
                                <label class="checkbox_label" for="console_log_prompts">
                                    <input id="console_log_prompts" type="checkbox">
                                    <small data-i18n="Log prompts to console">Log prompts to console</small>
                                </label>
                                <label class="checkbox_label" for="request_token_probabilities" title="Requests logprobs from the API for the Token Probabilities feature." data-i18n="[title]Requests logprobs from the API for the Token Probabilities feature">
                                    <input id="request_token_probabilities" type="checkbox">
                                    <small data-i18n="Request token probabilities">Request token probabilities</small>
                                </label>
                                <label class="checkbox_label" for="show_group_chat_queue" title="In group chat, highlight the character(s) that are currently queued to generate responses and the order in which they will respond." data-i18n="[title]In group chat, highlight the character(s) that are currently queued to generate responses and the order in which they will respond.">
                                    <input id="show_group_chat_queue" type="checkbox">
                                    <small data-i18n="Show group chat queue">Show group chat queue</small>
                                </label>
                                <div class="inline-drawer wide100p flexFlowColumn">
                                    <div class="inline-drawer-toggle inline-drawer-header userSettingsInnerExpandable" title="Automatically reject and re-generate AI message based on configurable criteria." data-i18n="[title]Automatically reject and re-generate AI message based on configurable criteria">
                                        <b><span data-i18n="Auto-swipe">Auto-swipe</span></b>
                                        <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                    </div>
                                    <div class="inline-drawer-content">
                                        <label class="checkbox_label" for="auto_swipe" title="Enable the auto-swipe function. Settings in this section only have an effect when auto-swipe is enabled." data-i18n="[title]Enable the auto-swipe function. Settings in this section only have an effect when auto-swipe is enabled">
                                            <input id="auto_swipe" type="checkbox">
                                            <small data-i18n="Enabled">Enabled</small>
                                        </label>
                                        <small data-i18n="Minimum generated message length">Minimum generated message length</small>
                                        <input id="auto_swipe_minimum_length" name="auto_swipe_minimum_length" type="number" min="0" step="1" value="0" class="text_pole" title="If the generated message is shorter than this, trigger an auto-swipe." data-i18n="[title]If the generated message is shorter than this, trigger an auto-swipe">
                                        <small data-i18n="Blacklisted words">Blacklisted words</small>
                                        <div class="auto_swipe">
                                            <textarea id="auto_swipe_blacklist" name="auto_swipe_blacklist" data-i18n="[placeholder]words you dont want generated separated by comma ','" placeholder="words you don't want generated separated by comma ','" class="text_pole textarea_compact" value="" autocomplete="off" rows="3"></textarea>
                                            <small data-i18n="Blacklisted word count to swipe">Blacklisted word count to swipe</small>
                                            <input id="auto_swipe_blacklist_threshold" name="auto_swipe_blacklist_threshold" type="number" min="0" step="1" value="1" class="text_pole" title="Minimum number of blacklisted words detected to trigger an auto-swipe." data-i18n="[title]Minimum number of blacklisted words detected to trigger an auto-swipe">
                                        </div>
                                    </div>
                                </div>
                                <div nane="AutoContiueBlock" class="inline-drawer wide100p flexFlowColumn">
                                    <div class="inline-drawer-toggle inline-drawer-header userSettingsInnerExpandable" title="Automatically 'continue' a response if the model stopped before reaching a certain amount of tokens.">
                                        <b><span data-i18n="Auto-Continue">Auto-Continue</span></b>
                                        <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                    </div>
                                    <div class="inline-drawer-content">
                                        <div class="flex-container">
                                            <label class="checkbox_label" for="auto_continue_enabled">
                                                <input id="auto_continue_enabled" type="checkbox">
                                                <small data-i18n="Enabled">
                                                    Enabled
                                                </small>
                                            </label>
                                            <label class="checkbox_label" for="auto_continue_allow_chat_completions">
                                                <input id="auto_continue_allow_chat_completions" type="checkbox">
                                                <small data-i18n="Allow for Chat Completion APIs">
                                                    Allow for Chat Completion APIs
                                                </small>
                                            </label>
                                        </div>
                                        <div class="auto_continue_settings_block">
                                            <label for="auto_continue_target_length">
                                                <small data-i18n="Target length (tokens)">Target length (tokens)</small>
                                                <input id="auto_continue_target_length" type="number" class="text_pole textarea_compact" min="0" max="1024">
                                            </label>
                                        </div>
                                    </div>


                                </div>
                            </div>
                            <div name="AutoCompleteToggle" class="inline-drawer wide100p flexFlowColumn">
                                <div class="inline-drawer-toggle inline-drawer-header userSettingsInnerExpandable" title="Options for the various autocomplete input boxes.">
                                    <b><span data-i18n="AutoComplete Settings">AutoComplete Settings</span></b>
                                    <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                </div>
                                <div class="inline-drawer-content">
                                    <label class="checkbox_label" for="stscript_autocomplete_autoHide">
                                        <input id="stscript_autocomplete_autoHide" type="checkbox">
                                        <small data-i18n="Automatically hide details">
                                            Automatically hide details
                                        </small>
                                    </label>
                                    <div class="flex-container">
                                        <div class="flex1" title="Determines how entries are found for autocomplete." data-i18n="[title]Determines how entries are found for autocomplete.">
                                            <label for="stscript_matching">
                                                <small data-i18n="Autocomplete Matching">Matching</small>
                                            </label>
                                            <select id="stscript_matching">
                                                <option data-i18n="Starts with" value="strict">Starts with</option>
                                                <option data-i18n="Includes" value="includes">Includes</option>
                                                <option data-i18n="Fuzzy" value="fuzzy">Fuzzy</option>
                                            </select>
                                        </div>
                                        <div class="flex1" title="Sets the style of the autocomplete." data-i18n="[title]Sets the style of the autocomplete.">
                                            <label for="stscript_autocomplete_style">
                                                <small data-i18n="Autocomplete Style">Style</small>
                                            </label>
                                            <div class="flex-container flexFlowRow alignItemsBaseline">
                                                <select id="stscript_autocomplete_style">
                                                    <option data-i18n="Follow Theme" value="theme">Follow Theme</option>
                                                    <option data-i18n="Dark" value="dark">Dark</option>
                                                    <option data-i18n="Light" value="light">Light</option>
                                                </select>
                                                <!-- <div class="menu_button fa-solid fa-pen-to-square" title="Customize colors"></div> -->
                                            </div>
                                        </div>
                                    </div>
                                    <div title="Determines which keys select an item from the AutoComplete suggestions">
                                        <label>
                                            <small data-i18n="Keyboard">Keyboard:</small>
                                        </label>
                                        <select id="stscript_autocomplete_select">
                                            <option value="3" data-i18n="Select with Tab or Enter">Select with Tab or Enter</option>
                                            <option value="1" data-i18n="Select with Tab">Select with Tab</option>
                                            <option value="2" data-i18n="Select with Enter">Select with Enter</option>
                                        </select>
                                    </div>
                                    <div class="flex-container flexFlowColumn gap0" title="Sets the font size of the autocomplete." data-i18n="[title]Sets the font size of the autocomplete.">
                                        <label for="stscript_autocomplete_font_scale"><small>Font Scale</small></label>
                                        <input class="neo-range-slider" type="range" id="stscript_autocomplete_font_scale" min="0.5" max="2" step="0.01">
                                        <input class="neo-range-input" type="number" min="0.5" max="2" step="0.01" data-for="stscript_autocomplete_font_scale" id="stscript_autocomplete_font_scale_counter">
                                    </div>
                                    <div title="Sets the width of the autocomplete." data-i18n="[title]Sets the width of the autocomplete.">
                                        <label for="stscript_autocomplete_width">
                                            <small data-i18n="Autocomplete Width">Width</small>
                                        </label>
                                        <div class="doubleRangeContainer">
                                            <div class="doubleRangeInputContainer" style="--value: 1;">
                                                <input type="range" id="stscript_autocomplete_width_left" min="0" max="2" step="1">
                                                <datalist id="stscript_autocomplete_width_left_values">
                                                    <option value="0" label="input" title="chat input box" data-i18n="[title]chat input box"></option>
                                                    <option value="1" label="chat" title="entire chat width" data-i18n="[title]entire chat width"></option>
                                                    <option value="2" label="full" title="full window width" data-i18n="[title]full window width"></option>
                                                </datalist>
                                            </div>
                                            <div class="doubleRangeInputContainer" style="--value: 1;">
                                                <input type="range" id="stscript_autocomplete_width_right" min="0" max="2" step="1">
                                                <datalist id="stscript_autocomplete_width_right_values">
                                                    <option value="0" label="input" title="chat input box" data-i18n="[title]chat input box"></option>
                                                    <option value="1" label="chat" title="entire chat width" data-i18n="[title]entire chat width"></option>
                                                    <option value="2" label="full" title="full window width" data-i18n="[title]full window width"></option>
                                                </datalist>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div name="STscriptToggles">
                                <h4 data-i18n="STscript Settings">STscript Settings</h4>
                                <div title="Sets default flags for the STscript parser." data-i18n="[title]Sets default flags for the STscript parser.">
                                    <label><small data-i18n="Parser Flags">Parser Flags</small></label>
                                    <label class="checkbox_label" title="Switch to stricter escaping, allowing all delimiting characters to be escaped with a backslash, and backslashes to be escaped as well." data-i18n="[title]Switch to stricter escaping, allowing all delimiting characters to be escaped with a backslash, and backslashes to be escaped as well.">
                                        <input id="stscript_parser_flag_strict_escaping" type="checkbox">
                                        <span>
                                            <small data-i18n="STRICT_ESCAPING">STRICT_ESCAPING</small>
                                        </span>
                                        <a href="https://docs.sillytavern.app/usage/st-script/#strict-escaping" target="_blank" class="notes-link">
                                            <span class="fa-solid fa-circle-question note-link-span"></span>
                                        </a>
                                    </label>
                                    <label class="checkbox_label" title="Prevents {{getvar::}} {{getglobalvar::}} macros from having literal macro-like values auto-evaluated.
e.g. &quot;{{newline}}&quot; remains as literal string &quot;{{newline}}&quot;

(This is done by internally replacing {{getvar::}} {{getglobalvar::}} macros with scoped variables.)" data-i18n="[title]stscript_parser_flag_replace_getvar_label">
                                        <input id="stscript_parser_flag_replace_getvar" type="checkbox">
                                        <span>
                                            <small data-i18n="REPLACE_GETVAR">REPLACE_GETVAR</small>
                                        </span>
                                        <a href="https://docs.sillytavern.app/usage/st-script/#replace-variable-macros" target="_blank" class="notes-link">
                                            <span class="fa-solid fa-circle-question note-link-span"></span>
                                        </a>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="logo_block" class="drawer">
            <div id="site_logo" class="drawer-toggle drawer-header" title="Change Background Image" data-i18n="[title]Change Background Image">
                <div class="drawer-icon fa-solid fa-panorama fa-fw interactable closedIcon" tabindex="0"></div>
            </div>
            <div id="Backgrounds" class="drawer-content closedDrawer" data-slide-toggle="hidden" style="display: none;">
                <div class="flex-container">
                    <div class="flex-container alignItemsBaseline wide100p">
                        <h3 class="margin0 flex2" data-i18n="Background Image">
                            Background Image
                        </h3>
                        <input id="bg-filter" data-i18n="[placeholder]Filter" placeholder="Filter" class="text_pole flex1" type="search">
                        <select id="background_fitting" class="text_pole" data-i18n="[title]Background Fitting" title="Background Fitting">
                            <option value="classic" data-i18n="Classic">Classic</option>
                            <option value="cover" data-i18n="Cover">Cover</option>
                            <option value="contain" data-i18n="Contain">Contain</option>
                            <option value="stretch" data-i18n="Stretch">Stretch</option>
                            <option value="center" data-i18n="Center">Center</option>
                        </select>
                        <div id="auto_background" class="menu_button menu_button_icon interactable" data-i18n="[title]Automatically select a background based on the chat context" title="Automatically select a background based on the chat context." tabindex="0">
                            <i class="fa-solid fa-wand-magic"></i>
                            <span data-i18n="Auto-select">Auto-select</span>
                        </div>
                    </div>
                    <h3 data-i18n="System Backgrounds" class="wide100p textAlignCenter">
                        System Backgrounds
                    </h3>
                    <div id="bg_menu_content" class="bg_list">
                        <form id="form_bg_download" class="bg_example no-border no-shadow interactable" action="javascript:void(null);" method="post" enctype="multipart/form-data" tabindex="0">
                            <label class="input-file">
                                <input type="file" id="add_bg_button" name="avatar" accept="image/png, image/jpeg, image/jpg, image/gif, image/bmp">
                                <div class="bg_example no-border no-shadow add_bg_but interactable" style="background-image: url('/img/addbg3.png');" tabindex="0"></div>
                            </label>
                        </form>
                    <div class="bg_example flex-container interactable" bgfile="__transparent.png" title="__transparent.png" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=__transparent.png&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">__transparent</div>
            </div><div class="bg_example flex-container interactable" bgfile="_black.jpg" title="_black.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=_black.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">_black</div>
            </div><div class="bg_example flex-container interactable" bgfile="_white.jpg" title="_white.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=_white.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">_white</div>
            </div><div class="bg_example flex-container interactable" bgfile="bedroom clean.jpg" title="bedroom clean.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=bedroom%20clean.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">bedroom clean</div>
            </div><div class="bg_example flex-container interactable" bgfile="bedroom cyberpunk.jpg" title="bedroom cyberpunk.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=bedroom%20cyberpunk.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">bedroom cyberpunk</div>
            </div><div class="bg_example flex-container interactable" bgfile="bedroom red.jpg" title="bedroom red.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=bedroom%20red.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">bedroom red</div>
            </div><div class="bg_example flex-container interactable" bgfile="bedroom tatami.jpg" title="bedroom tatami.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=bedroom%20tatami.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">bedroom tatami</div>
            </div><div class="bg_example flex-container interactable" bgfile="cityscape medieval market.jpg" title="cityscape medieval market.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=cityscape%20medieval%20market.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">cityscape medieval market</div>
            </div><div class="bg_example flex-container interactable" bgfile="cityscape medieval night.jpg" title="cityscape medieval night.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=cityscape%20medieval%20night.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">cityscape medieval night</div>
            </div><div class="bg_example flex-container interactable" bgfile="cityscape postapoc.jpg" title="cityscape postapoc.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=cityscape%20postapoc.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">cityscape postapoc</div>
            </div><div class="bg_example flex-container interactable" bgfile="forest treehouse fireworks air baloons (by kallmeflocc).jpg" title="forest treehouse fireworks air baloons (by kallmeflocc).jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=forest%20treehouse%20fireworks%20air%20baloons%20(by%20kallmeflocc).jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">forest treehouse fireworks air baloons (by kallmeflocc)</div>
            </div><div class="bg_example flex-container interactable" bgfile="japan classroom side.jpg" title="japan classroom side.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=japan%20classroom%20side.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">japan classroom side</div>
            </div><div class="bg_example flex-container interactable" bgfile="japan classroom.jpg" title="japan classroom.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=japan%20classroom.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">japan classroom</div>
            </div><div class="bg_example flex-container interactable" bgfile="japan path cherry blossom.jpg" title="japan path cherry blossom.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=japan%20path%20cherry%20blossom.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">japan path cherry blossom</div>
            </div><div class="bg_example flex-container interactable" bgfile="japan university.jpg" title="japan university.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=japan%20university.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">japan university</div>
            </div><div class="bg_example flex-container interactable" bgfile="landscape autumn great tree.jpg" title="landscape autumn great tree.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=landscape%20autumn%20great%20tree.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">landscape autumn great tree</div>
            </div><div class="bg_example flex-container interactable" bgfile="landscape beach day.png" title="landscape beach day.png" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=landscape%20beach%20day.png&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">landscape beach day</div>
            </div><div class="bg_example flex-container interactable" bgfile="landscape beach night.jpg" title="landscape beach night.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=landscape%20beach%20night.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">landscape beach night</div>
            </div><div class="bg_example flex-container interactable" bgfile="landscape mountain lake.jpg" title="landscape mountain lake.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=landscape%20mountain%20lake.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">landscape mountain lake</div>
            </div><div class="bg_example flex-container interactable" bgfile="landscape postapoc.jpg" title="landscape postapoc.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=landscape%20postapoc.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">landscape postapoc</div>
            </div><div class="bg_example flex-container interactable" bgfile="landscape winter lake house.jpg" title="landscape winter lake house.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=landscape%20winter%20lake%20house.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">landscape winter lake house</div>
            </div><div class="bg_example flex-container interactable" bgfile="royal.jpg" title="royal.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=royal.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">royal</div>
            </div><div class="bg_example flex-container interactable" bgfile="tavern day.jpg" title="tavern day.jpg" tabindex="0" custom="false" style="background-image: url(&quot;/thumbnail?type=bg&amp;file=tavern%20day.jpg&quot;);">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">tavern day</div>
            </div></div>
                    <h3 data-i18n="Chat Backgrounds" class="wide100p textAlignCenter">
                        Chat Backgrounds
                    </h3>
                    <div id="bg_chat_hint" class="wide100p textAlignCenter">
                        <span data-i18n="bg_chat_hint_1">Chat backgrounds generated with the</span> <code><i class="fa-solid fa-paintbrush"></i>&nbsp;Image Generation</code> <span data-i18n="bg_chat_hint_2">extension will appear here.</span>
                    </div>
                    <div id="bg_custom_content" class="bg_list">
                    </div>
                </div>
            </div>
        </div>
        <div id="extensions-settings-button" class="drawer">
            <div class="drawer-toggle">
                <div class="drawer-icon fa-solid fa-cubes fa-fw interactable closedIcon" title="Extensions" data-i18n="[title]Extensions" tabindex="0"></div>
            </div>
            <div id="rm_extensions_block" class="drawer-content closedDrawer" data-slide-toggle="hidden" style="display: none;">
                <div class="extensions_block flex-container">
                    <div class="alignitemscenter flex-container wide100p">
                        <h3 class="margin0 flex1" data-i18n="Extensions">
                            Extensions
                        </h3>
                        <label for="extensions_notify_updates" class="checkbox_label flexNoGap">
                            <input id="extensions_notify_updates" type="checkbox">
                            <span data-i18n="Notify on extension updates">Notify on extension updates</span>
                        </label>
                        <div id="extensions_details" class="menu_button_icon menu_button interactable" tabindex="0">
                            <i class="fa-solid fa-cubes"></i>
                            <span data-i18n="Manage extensions">Manage extensions</span>
                        </div>
                        <div id="third_party_extension_button" title="Import Extension From Git Repo" data-i18n="[title]Import Extension From Git Repo" class="menu_button menu_button_icon interactable" tabindex="0">
                            <i class="fa-solid fa-cloud-arrow-down"></i>
                            <span data-i18n="Install extension">Install extension</span>
                        </div>
                    </div>
                    <div id="extensions_settings" class="flex1 wide50p">
                        <div id="assets_container" class="extension_container"><div id="assets_ui">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="Download Extensions &amp; Assets">Download Extensions &amp; Assets</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <small>
                <span data-i18n="Load a custom asset list or select">
                    Load a custom asset list or select
                </span>
                <a data-i18n="Install extension" class="assets-install-hint-link" target="_blank" rel="noopener">Install&nbsp;Extension</a>
                <span data-i18n="to install 3rd party extensions.">
                    to install 3rd party extensions.
                </span>
            </small>
            <div class="assets-url-block m-b-1 m-t-1">
                <label data-i18n="Assets URL" for="assets-json-url-field">Assets URL</label>
                <small title="Load a list of extensions &amp; assets based on an asset list file.

The default Asset URL in this field points to the list of offical first party extensions and assets.
If you have a custom asset list, you can insert it here.

To install a single 3rd party extension, use the &quot;Install Extensions&quot; button on the top right." data-i18n="[title]load_asset_list_desc">
                    <span data-i18n="Load an asset list">Load an asset list</span>
                    <div class="fa-solid fa-circle-info opacity50p"></div>
                </small>
                <div class="assets-connect-div">
                    <input class="text_pole widthUnset flex1" id="assets-json-url-field">
                    <i data-i18n="[title]Load Asset List" title="Load Asset List" class="menu_button fa-solid fa-plug-circle-exclamation fa-xl redOverlayGlow interactable" id="assets-connect-button" tabindex="0"></i>
                </div>
            </div>
            <div class="flex-container" id="assets_filters" style="display: none;">
                <select class="text_pole flex1" id="assets_type_select">
                </select>
                <input type="search" placeholder="Search" class="text_pole flex1" id="assets_search">
                <div class="menu_button menu_button_icon interactable" id="assets-characters-button" tabindex="0">
                    <i class="fa-solid fa-image-portrait"></i>
                    <span data-i18n="Characters">Characters</span>
                </div>
            </div>
            <div id="assets_menu" class="inline-drawer-content">
            </div>
        </div>
    </div>
</div></div>
                        <div id="expressions_container" class="extension_container"><div class="expression_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="Character Expressions">Character Expressions</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>

        <div class="inline-drawer-content">
            <label title="Use the selected API from Chat Translation extension settings." for="expression_translate" class="checkbox_label">
                <input type="checkbox" id="expression_translate">
                <span data-i18n="Translate text to English before classification">Translate text to English before classification</span>
            </label>
            <label for="expressions_show_default" class="checkbox_label">
                <input type="checkbox" id="expressions_show_default">
                <span data-i18n="Show default images (emojis) if sprite missing">Show default images (emojis) if sprite missing</span>
            </label>
            <label for="image_type_toggle" class="checkbox_label" id="image_type_block">
                <input type="checkbox" id="image_type_toggle">
                <span data-i18n="Image Type - talkinghead (extras)">Image Type - talkinghead (extras)</span>
            </label>
            <div class="expression_api_block m-b-1 m-t-1">
                <label data-i18n="Classifier API" for="expression_api">Classifier API</label>
                <small data-i18n="Select the API for classifying expressions.">Select the API for classifying expressions.</small>
                <select class="flex1 margin0" id="expression_api">
                    <option data-i18n="Local" value="0">Local</option>
                    <option data-i18n="Extras" value="1">Extras</option>
                    <option data-i18n="Main API" value="2">Main API</option>
                    <option data-i18n="WebLLM Extension" value="3">WebLLM Extension</option>
                </select>
            </div>
            <div class="expression_llm_prompt_block m-b-1 m-t-1" style="display: none;">
                <label class="title_restorable" for="expression_llm_prompt">
                    <span data-i18n="LLM Prompt">LLM Prompt</span>
                    <div class="right_menu_button interactable" title="Restore default value" id="expression_llm_prompt_restore" tabindex="0">
                        <i class="fa-solid fa-clock-rotate-left fa-sm"></i>
                    </div>
                </label>
                <small data-i18n="Will be used if the API doesn't support JSON schemas or function calling.">Will be used if the API doesn't support JSON schemas or function calling.</small>
                <textarea placeholder="Use {{labels}} special macro." rows="2" class="text_pole textarea_compact" type="text" id="expression_llm_prompt"></textarea>
            </div>
            <div class="expression_fallback_block m-b-1 m-t-1">
                <label data-i18n="Default / Fallback Expression" for="expression_fallback">Default / Fallback Expression</label>
                <small data-i18n="Set the default and fallback expression being used when no matching expression is found.">Set the default and fallback expression being used when no matching expression is found.</small>
                <select class="flex1 margin0" id="expression_fallback"><option value="admiration">admiration</option><option value="amusement">amusement</option><option value="anger">anger</option><option value="annoyance">annoyance</option><option value="approval">approval</option><option value="caring">caring</option><option value="confusion">confusion</option><option value="curiosity">curiosity</option><option value="desire">desire</option><option value="disappointment">disappointment</option><option value="disapproval">disapproval</option><option value="disgust">disgust</option><option value="embarrassment">embarrassment</option><option value="excitement">excitement</option><option value="fear">fear</option><option value="gratitude">gratitude</option><option value="grief">grief</option><option value="joy">joy</option><option value="love">love</option><option value="nervousness">nervousness</option><option value="optimism">optimism</option><option value="pride">pride</option><option value="realization">realization</option><option value="relief">relief</option><option value="remorse">remorse</option><option value="sadness">sadness</option><option value="surprise">surprise</option><option value="neutral">neutral</option></select>
            </div>
            <div class="expression_custom_block m-b-1 m-t-1">
                <label data-i18n="Custom Expressions" for="expression_custom">Custom Expressions</label>
                <small><span data-i18n="Can be set manually or with an _space">Can be set manually or with an </span><tt>/emote</tt><span data-i18n="space_ slash command."> slash command.</span></small>
                <div class="flex-container">
                    <select class="flex1 margin0" id="expression_custom"><option value="" disabled="" selected="">[ No custom expressions ]</option></select>
                    <i title="Add" class="menu_button fa-solid fa-plus margin0 interactable" id="expression_custom_add" tabindex="0"></i>
                    <i title="Remove" class="menu_button fa-solid fa-xmark margin0 interactable" id="expression_custom_remove" tabindex="0"></i>
                </div>
            </div>
            <div data-i18n="Open a chat to see the character expressions." id="no_chat_expressions">
                Open a chat to see the character expressions.
            </div>
            <div id="open_chat_expressions" style="display: none;">
                <div class="offline_mode">
                    <small data-i18n="You are in offline mode. Click on the image below to set the expression.">You are in offline mode. Click on the image below to set the expression.</small>
                </div>
                <label data-i18n="Sprite Folder Override" for="expression_override">Sprite Folder Override</label>
                <small><span data-i18n="Use a forward slash to specify a subfolder. Example: _space">Use a forward slash to specify a subfolder. Example: </span><tt>Bob/formal</tt></small>
                <div class="flex-container flexnowrap">
                    <input placeholder="Override folder name" class="text_pole" type="text" id="expression_override">
                    <input value="Submit" type="submit" class="menu_button interactable" id="expression_override_button" tabindex="0">
                </div>
                <div class="expression_buttons flex-container spaceEvenly">
                    <div class="menu_button interactable" id="expression_upload_pack_button" tabindex="0">
                        <i class="fa-solid fa-file-zipper"></i>
                        <span data-i18n="Upload sprite pack (ZIP)">Upload sprite pack (ZIP)</span>
                    </div>
                    <div class="menu_button interactable" id="expression_override_cleanup_button" tabindex="0">
                        <i class="fa-solid fa-trash-can"></i>
                        <span data-i18n="Remove all image overrides">Remove all image overrides</span>
                    </div>
                </div>
                <p class="hint"><b data-i18n="Hint:">Hint:</b> <i><span data-i18n="Create new folder in the _space">Create new folder in the </span><b>/characters/</b> <span data-i18n="folder of your user data directory and name it as the name of the character.">folder of your user data directory and name it as the name of the character.</span>
                <span data-i18n="Put images with expressions there. File names should follow the pattern:">Put images with expressions there. File names should follow the pattern: </span><tt data-i18n="expression_label_pattern">[expression_label].[image_format]</tt></i></p>
                <h3 id="image_list_header">
                    <strong data-i18n="Sprite set:">Sprite set:</strong>&nbsp;<span id="image_list_header_name"></span>
                </h3>
                <div id="image_list"></div>

            </div>
        </div>
    </div>
    <form target="_blank" rel="noopener">
        <input hidden="" accept="application/zip" name="expression_upload_pack" id="expression_upload_pack" type="file">
        <input hidden="" accept="image/*" name="expression_upload" id="expression_upload" type="file">
    </form>
</div>
</div>
                        <div id="sd_container" class="extension_container"><div class="sd_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>
                <span data-i18n="Image Generation">Image Generation</span>
                <a class="notes-link" href="https://docs.sillytavern.app/extensions/stable-diffusion/" target="_blank" rel="noopener">
                    <span class="note-link-span">?</span>
                </a>
            </b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <label title="Allow to edit prompts manually before sending them to generation API" data-i18n="[title]sd_refine_mode" class="checkbox_label" for="sd_refine_mode">
                <input type="checkbox" id="sd_refine_mode">
                <span data-i18n="sd_refine_mode_txt">Edit prompts before generation</span>
            </label>
            <label title="Use the function tool to automatically detect intents to generate images." data-i18n="[title]sd_function_tool" class="checkbox_label" for="sd_function_tool">
                <input type="checkbox" id="sd_function_tool">
                <span data-i18n="sd_function_tool_txt">Use function tool</span>
            </label>
            <label title="Automatically generate images when sending messages like 'send me a picture of cat'." data-i18n="[title]sd_interactive_mode" class="checkbox_label" for="sd_interactive_mode">
                <input type="checkbox" id="sd_interactive_mode">
                <span data-i18n="sd_interactive_mode_txt">Use interactive mode</span>
            </label>
            <label title="Use multimodal captioning to generate prompts for user and character portraits based on their avatars." data-i18n="[title]sd_multimodal_captioning" class="checkbox_label" for="sd_multimodal_captioning">
                <input type="checkbox" id="sd_multimodal_captioning">
                <span data-i18n="sd_multimodal_captioning_txt">Use multimodal captioning for portraits</span>
            </label>
            <label title="Automatically extend free mode subject prompts (not portraits or backgrounds) using a currently selected LLM." data-i18n="[title]sd_free_extend" class="checkbox_label" for="sd_free_extend">
                <input type="checkbox" id="sd_free_extend">
                <span data-i18n="sd_free_extend_txt">Extend free mode prompts</span>
                <small data-i18n="sd_free_extend_small">(interactive/commands)</small>
            </label>
            <label title="Snap generation requests with a forced aspect ratio (portraits, backgrounds) to the nearest known resolution, while trying to preserve the absolute pixel counts (recommended for SDXL)." data-i18n="[title]sd_snap" class="checkbox_label" for="sd_snap">
                <input type="checkbox" id="sd_snap">
                <span data-i18n="sd_snap_txt">Snap auto-adjusted resolutions</span>
            </label>
            <label data-i18n="Source" for="sd_source">Source</label>
            <select id="sd_source">
                <option value="bfl">BFL (Black Forest Labs)</option>
                <option value="blockentropy">Block Entropy</option>
                <option value="comfy">ComfyUI</option>
                <option value="drawthings">DrawThings HTTP API</option>
                <option value="extras">Extras API (local / remote)</option>
                <option value="huggingface">HuggingFace Inference API (serverless)</option>
                <option value="nanogpt">NanoGPT</option>
                <option value="novel">NovelAI Diffusion</option>
                <option value="openai">OpenAI (DALL-E)</option>
                <option value="pollinations">Pollinations</option>
                <option value="vlad">SD.Next (vladmandic)</option>
                <option value="stability">Stability AI</option>
                <option value="auto">Stable Diffusion Web UI (AUTOMATIC1111)</option>
                <option value="horde">Stable Horde</option>
                <option value="togetherai">TogetherAI</option>
            </select>
            <div data-sd-source="auto" style="display: none;">
                <label for="sd_auto_url">SD Web UI URL</label>
                <div class="flex-container flexnowrap">
                    <input value="http://localhost:7860" placeholder="Example: http://localhost:7860" data-i18n="[placeholder]sd_auto_url" class="text_pole" type="text" id="sd_auto_url">
                    <div class="menu_button menu_button_icon interactable" id="sd_auto_validate" tabindex="0">
                        <i class="fa-solid fa-check"></i>
                        <span data-i18n="Connect">
                            Connect
                        </span>
                    </div>
                </div>
                <label data-i18n="Authentication (optional)" for="sd_auto_auth">Authentication (optional)</label>
                <input value="" placeholder="Example: username:password" data-i18n="[placeholder]Example: username:password" class="text_pole" type="text" id="sd_auto_auth">
                
                <i><b data-i18n="Important:">Important:</b></i><i data-i18n="sd_auto_auth_warning_1"> run SD Web UI with the </i><i><tt>--api</tt></i><i data-i18n="sd_auto_auth_warning_2"> flag! The server must be accessible from the SillyTavern host machine.</i>
            </div>
            <div data-sd-source="drawthings" style="display: none;">
                <label for="sd_drawthings_url">DrawThings API URL</label>
                <div class="flex-container flexnowrap">
                    <input value="http://localhost:7860" placeholder="Example: http://localhost:7860" data-i18n="[placeholder]sd_drawthings_url" class="text_pole" type="text" id="sd_drawthings_url">
                    <div class="menu_button menu_button_icon interactable" id="sd_drawthings_validate" tabindex="0">
                        <i class="fa-solid fa-check"></i>
                        <span data-i18n="Connect">
                            Connect
                        </span>
                    </div>
                </div>
                <label data-i18n="Authentication (optional)" for="sd_drawthings_auth">Authentication (optional)</label>
                <input value="" placeholder="Example: username:password" data-i18n="[placeholder]Example: username:password" class="text_pole" type="text" id="sd_drawthings_auth">
                
                <i><b data-i18n="Important:">Important:</b></i><i data-i18n="sd_drawthings_auth_txt"> run DrawThings app with HTTP API switch enabled in the UI! The server must be accessible from the SillyTavern host machine.</i>
            </div>
            <div data-sd-source="huggingface" style="display: none;">
                <i>Hint: Save an API key in the Hugging Face (Text Completion) API settings to use it here.</i>
                <label data-i18n="Model ID" for="sd_huggingface_model_id">Model ID</label>
                <input value="" placeholder="e.g. black-forest-labs/FLUX.1-dev" data-i18n="[placeholder]e.g. black-forest-labs/FLUX.1-dev" class="text_pole" type="text" id="sd_huggingface_model_id">
            </div>
            <div data-sd-source="nanogpt" style="display: none;">
                <i>Hint: Save an API key in the NanoGPT (Chat Completion) API settings to use it here.</i>
            </div>
            <div data-sd-source="vlad" style="display: none;">
                <label for="sd_vlad_url">SD.Next API URL</label>
                <div class="flex-container flexnowrap">
                    <input value="http://localhost:7860" placeholder="Example: http://localhost:7860" data-i18n="[placeholder]sd_vlad_url" class="text_pole" type="text" id="sd_vlad_url">
                    <div class="menu_button menu_button_icon interactable" id="sd_vlad_validate" tabindex="0">
                        <i class="fa-solid fa-check"></i>
                        <span data-i18n="Connect">
                            Connect
                        </span>
                    </div>
                </div>
                <label data-i18n="Authentication (optional)" for="sd_vlad_auth">Authentication (optional)</label>
                <input value="" placeholder="Example: username:password" data-i18n="[placeholder]Example: username:password" class="text_pole" type="text" id="sd_vlad_auth">
                <i data-i18n="The server must be accessible from the SillyTavern host machine.">The server must be accessible from the SillyTavern host machine.</i>
            </div>
            <div data-sd-source="horde" style="display: none;">
                <i data-i18n="Hint: Save an API key in AI Horde API settings to use it here.">Hint: Save an API key in AI Horde API settings to use it here.</i>
                <label class="checkbox_label" for="sd_horde_nsfw">
                    <input type="checkbox" id="sd_horde_nsfw">
                    <span data-i18n="Allow NSFW images from Horde">
                        Allow NSFW images from Horde
                    </span>
                </label>
                <label class="checkbox_label" for="sd_horde_sanitize">
                    <input type="checkbox" id="sd_horde_sanitize">
                    <span data-i18n="Sanitize prompts (recommended)">
                        Sanitize prompts (recommended)
                    </span>
                </label>
            </div>
            <div data-sd-source="novel" style="display: none;">
                <div class="flex-container flexFlowColumn">
                    <label title="Automatically adjust generation parameters to ensure free image generations." data-i18n="[title]Automatically adjust generation parameters to ensure free image generations." class="checkbox_label flex1" for="sd_novel_anlas_guard">
                        <input type="checkbox" id="sd_novel_anlas_guard">
                        <span data-i18n="Avoid spending Anlas">
                            Avoid spending Anlas
                        </span>
                        <span class="toggle-description" data-i18n="Opus tier">(Opus tier)</span>
                    </label>
                    <div data-i18n="View my Anlas" class="menu_button menu_button_icon interactable" id="sd_novel_view_anlas" tabindex="0">
                        View my Anlas
                    </div>
                </div>
                <i>Hint: Save an API key in the NovelAI API settings to use it here.</i>
            </div>
            <div data-sd-source="openai" style="display: none;">
                <small data-i18n="These settings only apply to DALL-E 3">These settings only apply to DALL-E 3</small>
                <div class="flex-container">
                    <div class="flex1">
                        <label data-i18n="Image Style" for="sd_openai_style">Image Style</label>
                        <select id="sd_openai_style">
                            <option value="vivid">Vivid</option>
                            <option value="natural">Natural</option>
                        </select>
                    </div>
                    <div class="flex1">
                        <label data-i18n="Image Quality" for="sd_openai_quality">Image Quality</label>
                        <select id="sd_openai_quality">
                            <option data-i18n="Standard" value="standard">Standard</option>
                            <option data-i18n="HD" value="hd">HD</option>
                        </select>
                    </div>
                </div>
            </div>
            <div data-sd-source="comfy" style="display: none;">
                <label for="sd_comfy_url">ComfyUI URL</label>
                <div class="flex-container flexnowrap">
                    <input value="http://127.0.0.1:8188" placeholder="Example: http://127.0.0.1:8188" data-i18n="[placeholder]sd_comfy_url" class="text_pole" type="text" id="sd_comfy_url">
                    <div class="menu_button menu_button_icon interactable" id="sd_comfy_validate" tabindex="0">
                        <i class="fa-solid fa-check"></i>
                        <span data-i18n="Connect">
                            Connect
                        </span>
                    </div>
                </div>
                <p><i><b data-i18n="Important:">Important:</b></i><i data-i18n="The server must be accessible from the SillyTavern host machine."> The server must be accessible from the SillyTavern host machine.</i></p>
                <label for="sd_comfy_workflow">ComfyUI Workflow</label>
                <div class="flex-container flexnowrap">
                    <select class="flex1 text_pole" id="sd_comfy_workflow"><option value="Char_Avatar_Comfy_Workflow.json">Char_Avatar_Comfy_Workflow.json</option><option value="Default_Comfy_Workflow.json">Default_Comfy_Workflow.json</option></select>
                    <div title="Open workflow editor" data-i18n="[title]Open workflow editor" class="menu_button menu_button_icon interactable" id="sd_comfy_open_workflow_editor" tabindex="0">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </div>
                    <div title="Create new workflow" data-i18n="[title]Create new workflow" class="menu_button menu_button_icon interactable" id="sd_comfy_new_workflow" tabindex="0">
                        <i class="fa-solid fa-plus"></i>
                    </div>
                    <div title="Delete workflow" data-i18n="[title]Delete workflow" class="menu_button menu_button_icon interactable" id="sd_comfy_delete_workflow" tabindex="0">
                        <i class="fa-solid fa-trash-can"></i>
                    </div>
                </div>
            </div>
            <div data-sd-source="pollinations" style="display: none;">
                <p>
                    <a href="https://pollinations.ai" target="_blank" rel="noopener">Pollinations.ai</a>
                </p>
                <div class="flex-container">
                    <label title="Enables prompt enhancing (passes prompts through an LLM to add detail)." for="sd_pollinations_enhance" class="flex1 checkbox_label">
                        <input type="checkbox" id="sd_pollinations_enhance">
                        <span data-i18n="Enhance">
                            Enhance
                        </span>
                    </label>
                </div>
            </div>
            <div data-sd-source="stability" style="display: none;">
                <div class="flex-container flexnowrap alignItemsBaseline marginBot5">
                    <strong data-i18n="API Key" class="flex1">API Key</strong>
                    <div class="menu_button menu_button_icon interactable" id="sd_stability_key" tabindex="0">
                        <i class="fa-fw fa-solid fa-key"></i>
                        <span data-i18n="Click to set">Click to set</span>
                    </div>
                </div>
                <div class="marginBot5">
                    <i data-i18n="You can find your API key in the Stability AI dashboard.">
                        You can find your API key in the Stability AI dashboard.
                    </i>
                </div>

                <div class="flex-container">
                    <div class="flex1">
                        <label data-i18n="Style Preset" for="sd_stability_style_preset">Style Preset</label>
                        <select id="sd_stability_style_preset">
                            <option value="anime">Anime</option>
                            <option value="3d-model">3D Model</option>
                            <option value="analog-film">Analog Film</option>
                            <option value="cinematic">Cinematic</option>
                            <option value="comic-book">Comic Book</option>
                            <option value="digital-art">Digital Art</option>
                            <option value="enhance">Enhance</option>
                            <option value="fantasy-art">Fantasy Art</option>
                            <option value="isometric">Isometric</option>
                            <option value="line-art">Line Art</option>
                            <option value="low-poly">Low Poly</option>
                            <option value="modeling-compound">Modeling Compound</option>
                            <option value="neon-punk">Neon Punk</option>
                            <option value="origami">Origami</option>
                            <option value="photographic">Photographic</option>
                            <option value="pixel-art">Pixel Art</option>
                            <option value="tile-texture">Tile Texture</option>
                        </select>
                    </div>
                </div>
            </div>

            <div data-sd-source="bfl" style="display: none;">
                <div class="flex-container flexnowrap alignItemsBaseline marginBot5">
                    <a rel="noopener" href="https://api.bfl.ml/" target="_blank">
                        <strong data-i18n="API Key">API Key</strong>
                        <i class="fa-solid fa-share-from-square"></i>
                    </a>
                    <span class="expander"></span>
                    <div class="menu_button menu_button_icon interactable" id="sd_bfl_key" tabindex="0">
                        <i class="fa-fw fa-solid fa-key"></i>
                        <span data-i18n="Click to set">Click to set</span>
                    </div>
                </div>
                <label title="Whether to perform upsampling on the prompt. If active, automatically modifies the prompt for more creative generation." for="sd_bfl_upsampling" class="checkbox_label marginBot5">
                    <input type="checkbox" id="sd_bfl_upsampling">
                    <span data-i18n="Prompt Upsampling">
                        Prompt Upsampling
                    </span>
                </label>
            </div>

            <div class="flex-container">
                <div class="flex1">
                    <label data-i18n="Model" for="sd_model">Model</label>
                    <select id="sd_model"></select>
                </div>

                <div data-sd-source="comfy,auto" class="flex1" style="display: none;">
                    <label for="sd_vae">VAE</label>
                    <select id="sd_vae"><option value="N/A">N/A</option></select>
                </div>
            </div>

            <div class="flex-container">
                <div data-sd-source="extras,horde,auto,drawthings,novel,vlad,comfy" class="flex1">
                    <label data-i18n="Sampling method" for="sd_sampler">Sampling method</label>
                    <select id="sd_sampler"></select>
                </div>

                <div data-sd-source="comfy,auto,novel" class="flex1" style="display: none;">
                    <label data-i18n="Scheduler" for="sd_scheduler">Scheduler</label>
                    <select id="sd_scheduler"><option value="N/A">N/A</option></select>
                </div>
            </div>

            <div class="flex-container">
                <div class="flex1">
                    <label data-i18n="Resolution" for="sd_resolution">Resolution</label>
                    <select id="sd_resolution"><option value="sd_res_512x512">512x512 (1:1, icons, profile pictures)</option><option value="sd_res_600x600">600x600 (1:1, icons, profile pictures)</option><option value="sd_res_512x768">512x768 (2:3, vertical character card)</option><option value="sd_res_768x512">768x512 (3:2, horizontal 35-mm movie film)</option><option value="sd_res_960x540">960x540 (16:9, horizontal wallpaper)</option><option value="sd_res_540x960">540x960 (9:16, vertical wallpaper)</option><option value="sd_res_1920x1088">1920x1088 (16:9, 1080p, horizontal wallpaper)</option><option value="sd_res_1088x1920">1088x1920 (9:16, 1080p, vertical wallpaper)</option><option value="sd_res_1280x720">1280x720 (16:9, 720p, horizontal wallpaper)</option><option value="sd_res_720x1280">720x1280 (9:16, 720p, vertical wallpaper)</option><option value="sd_res_1024x1024">1024x1024 (1:1, SDXL)</option><option value="sd_res_1152x896">1152x896 (9:7, SDXL)</option><option value="sd_res_896x1152">896x1152 (7:9, SDXL)</option><option value="sd_res_1216x832">1216x832 (19:13, SDXL)</option><option value="sd_res_832x1216">832x1216 (13:19, SDXL)</option><option value="sd_res_1344x768">1344x768 (4:3, SDXL)</option><option value="sd_res_768x1344">768x1344 (3:4, SDXL)</option><option value="sd_res_1536x640">1536x640 (24:10, SDXL)</option><option value="sd_res_640x1536">640x1536 (10:24, SDXL)</option></select>
                </div>

                <div data-sd-source="auto,vlad,drawthings" class="flex1" style="display: none;">
                    <label data-i18n="Upscaler" for="sd_hr_upscaler">Upscaler</label>
                    <select id="sd_hr_upscaler"></select>
                </div>
            </div>

            <div class="flex-container">
                <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                    <small>
                        <span data-i18n="Sampling steps">Sampling steps</span>
                    </small>
                    <input value="20" step="1" max="150" min="1" name="sd_steps" id="sd_steps" type="range" class="neo-range-slider">
                    <input value="20" step="1" max="150" min="1" data-for="sd_steps" id="sd_steps_value" type="number" class="neo-range-input">
                </div>

                <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                    <small>
                        <span data-i18n="CFG Scale">CFG Scale</span>
                    </small>
                    <input value="7" step="0.1" max="30" min="1" name="sd_scale" id="sd_scale" type="range" class="neo-range-slider">
                    <input value="7" step="0.1" max="30" min="1" data-for="sd_scale" id="sd_scale_value" type="number" class="neo-range-input">
                </div>
            </div>

            <div class="flex-container" id="sd_dimensions_block">
                <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                    <small>
                        <span data-i18n="Width">Width</span>
                    </small>
                    <input value="512" step="64" min="64" max="2048" name="sd_width" id="sd_width" type="range" class="neo-range-slider">
                    <input value="512" step="64" min="64" max="2048" data-for="sd_width" id="sd_width_value" type="number" class="neo-range-input">
                </div>

                <div class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                    <small>
                        <span data-i18n="Height">Height</span>
                    </small>
                    <input value="512" step="64" min="64" max="2048" name="sd_height" id="sd_height" type="range" class="neo-range-slider">
                    <input value="512" step="64" min="64" max="2048" data-for="sd_height" id="sd_height_value" type="number" class="neo-range-input">
                </div>

                <div data-i18n="[title]Swap width and height" title="Swap width and height" class="right_menu_button interactable" id="sd_swap_dimensions" tabindex="0">
                    <i class="fa-solid fa-arrow-right-arrow-left"></i>
                </div>
            </div>

            <div class="flex-container">
                <div data-sd-source="auto,vlad,drawthings,novel" class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p" style="display: none;">
                    <small>
                        <span data-i18n="Upscale by">Upscale by</span>
                    </small>
                    <input value="1" step="0.1" max="4" min="1" name="sd_hr_scale" id="sd_hr_scale" type="range" class="neo-range-slider">
                    <input value="1" step="0.1" max="4" min="1" data-for="sd_hr_scale" id="sd_hr_scale_value" type="number" class="neo-range-input">
                </div>

                <div data-sd-source="auto,vlad,comfy" class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p" style="display: none;">
                    <small>
                        <span data-i18n="Denoising strength">Denoising strength</span>
                    </small>
                    <input value="0.7" step="0.01" max="1" min="0" name="sd_denoising_strength" id="sd_denoising_strength" type="range" class="neo-range-slider">
                    <input value="0.7" step="0.01" max="1" min="0" data-for="sd_denoising_strength" id="sd_denoising_strength_value" type="number" class="neo-range-input">
                </div>

                <div data-sd-source="auto,vlad" class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p" style="display: none;">
                    <small>
                        <span data-i18n="Hires steps (2nd pass)">Hires steps (2nd pass)</span>
                    </small>
                    <input value="0" step="1" max="150" name="sd_hr_second_pass_steps" id="sd_hr_second_pass_steps" type="range" class="neo-range-slider">
                    <input value="0" step="1" max="150" data-for="sd_hr_second_pass_steps" id="sd_hr_second_pass_steps_value" type="number" class="neo-range-input">
                </div>

                <div data-sd-source="auto,vlad,comfy,horde,drawthings,extras" class="alignitemscenter flex-container flexFlowColumn flexGrow flexShrink gap0 flexBasis48p">
                    <small>
                        <span data-i18n="CLIP Skip">CLIP Skip</span>
                    </small>
                    <input value="1" step="1" max="12" min="1" name="sd_clip_skip" id="sd_clip_skip" type="range" class="neo-range-slider">
                    <input value="1" step="1" max="12" min="1" data-for="sd_clip_skip" id="sd_clip_skip_value" type="number" class="neo-range-input">
                </div>
            </div>

            <div data-sd-source="auto,vlad,extras,horde,drawthings" class="flex-container marginTopBot5">
                <label class="flex1 checkbox_label">
                    <input type="checkbox" id="sd_restore_faces">
                    <small data-i18n="Restore Faces">Restore Faces</small>
                </label>
                <label class="flex1 checkbox_label">
                    <input type="checkbox" id="sd_enable_hr">
                    <small data-i18n="Hires. Fix">Hires. Fix</small>
                </label>
                <label class="flex1 checkbox_label" for="sd_horde_karras" data-sd-source="horde" style="display: none;">
                    <input type="checkbox" id="sd_horde_karras">
                    <small data-i18n="Karras">Karras</small>
                    <i title="Not all samplers supported." data-i18n="[title]Not all samplers supported." class="fa-solid fa-info-circle fa-sm opacity50p"></i>
                </label>
            </div>

            <div data-sd-source="auto,vlad" class="flex-container marginTopBot5" style="display: none;">
                <label title="Use ADetailer with face model during the generation. The ADetailer extension must be installed on the backend." data-i18n="[title]sd_adetailer_face" class="flex1 checkbox_label" for="sd_adetailer_face">
                    <input type="checkbox" id="sd_adetailer_face">
                    <small data-i18n="Use ADetailer (Face)">Use ADetailer (Face)</small>
                </label>
                <div class="flex1">
                    
                </div>
            </div>

            <div data-sd-source="novel" class="flex-container marginTopBot5" style="display: none;">
                <label title="SMEA versions of samplers are modified to perform better at high resolution." data-i18n="[title]SMEA versions of samplers are modified to perform better at high resolution." class="flex1 checkbox_label">
                    <input type="checkbox" id="sd_novel_sm">
                    <small data-i18n="SMEA">SMEA</small>
                </label>
                <label title="DYN variants of SMEA samplers often lead to more varied output, but may fail at very high resolutions." data-i18n="[title]DYN variants of SMEA samplers often lead to more varied output, but may fail at very high resolutions." class="flex1 checkbox_label">
                    <input type="checkbox" id="sd_novel_sm_dyn" disabled="">
                    <small data-i18n="DYN">DYN</small>
                </label>
                <label title="Reduce artifacts caused by high guidance values." for="sd_novel_decrisper" class="flex1 checkbox_label">
                    <input type="checkbox" id="sd_novel_decrisper">
                    <small data-i18n="Decrisper">Decrisper</small>
                </label>
            </div>

            <div class="marginTop5" data-sd-source="novel,togetherai,pollinations,comfy,drawthings,vlad,auto,horde,extras,stability,blockentropy,bfl">
                <label for="sd_seed">
                    <span data-i18n="Seed">Seed</span>
                    <small data-i18n="(-1 for random)">(-1 for random)</small>
                </label>
                <input step="1" max="9999999999" min="-1" class="text_pole" type="number" id="sd_seed">
            </div>

            <hr>
            <h4 title="Preset for prompt prefix and negative prompt" data-i18n="[title]Preset for prompt prefix and negative prompt">
                <span data-i18n="Style">Style</span>
            </h4>
            <div class="flex-container">
                <select class="flex1 text_pole" id="sd_style"><option value="Default">Default</option></select>
                <div class="menu_button interactable" title="Save style" data-i18n="[title]Save style" id="sd_save_style" tabindex="0">
                    <i class="fa-solid fa-save"></i>
                </div>
                <div class="menu_button interactable" title="Delete style" data-i18n="[title]Delete style" id="sd_delete_style" tabindex="0">
                    <i class="fa-solid fa-trash-can"></i>
                </div>
            </div>
            <label data-i18n="Common prompt prefix" for="sd_prompt_prefix">Common prompt prefix</label>
            <textarea placeholder="Use {prompt} to specify where the generated prompt will be inserted" data-i18n="[placeholder]sd_prompt_prefix_placeholder" class="text_pole textarea_compact autoSetHeight" id="sd_prompt_prefix" style="height: 3px;"></textarea>
            <label data-i18n="Negative common prompt prefix" for="sd_negative_prompt">Negative common prompt prefix</label>
            <textarea class="text_pole textarea_compact autoSetHeight" id="sd_negative_prompt" style="height: 3px;"></textarea>
            <div id="sd_character_prompt_block" style="display: none;">
                <label data-i18n="Character-specific prompt prefix" for="sd_character_prompt">Character-specific prompt prefix</label>
                <small data-i18n="Won't be used in groups.">Won't be used in groups.</small>
                <textarea placeholder="Any characteristics that describe the currently selected character. Will be added after a common prompt prefix.
Example: female, green eyes, brown hair, pink shirt" data-i18n="[placeholder]sd_character_prompt_placeholder" class="text_pole textarea_compact autoSetHeight" id="sd_character_prompt" style="height: 3px;"></textarea>
                <label data-i18n="Character-specific negative prompt prefix" for="sd_character_negative_prompt">Character-specific negative prompt prefix</label>
                <small data-i18n="Won't be used in groups.">Won't be used in groups.</small>
                <textarea placeholder="Any characteristics that should not appear for the selected character. Will be added after a negative common prompt prefix.
Example: jewellery, shoes, glasses" data-i18n="[placeholder]sd_character_negative_prompt_placeholder" class="text_pole textarea_compact autoSetHeight" id="sd_character_negative_prompt" style="height: 3px;"></textarea>
                <label class="checkbox_label flexWrap marginTop5" for="sd_character_prompt_share">
                    <input type="checkbox" id="sd_character_prompt_share">
                    <span data-i18n="Shareable">
                        Shareable
                    </span>
                    <small class="flexBasis100p">
                        When checked, character-specific prompts will be saved with the character card data.
                    </small>
                </label>
            </div>
            <hr>
            <h4 data-i18n="Chat Message Visibility (by source)">
                Chat Message Visibility (by source)
            </h4>
            <small data-i18n="Uncheck to hide the extension's messages in chat prompts.">
                Uncheck to hide the extension's messages in chat prompts.
            </small>
            <div class="flex-container flexFlowColumn marginTopBot5 flexGap10">
                <label class="checkbox_label" for="sd_wand_visible">
                    <span class="flex1 flex-container alignItemsCenter">
                        <i class="fa-solid fa-wand-magic-sparkles fa-fw"></i>
                        <span data-i18n="Extensions Menu">Extensions Menu</span>
                    </span>
                    <input type="checkbox" id="sd_wand_visible">
                </label>
                <label class="checkbox_label" for="sd_command_visible">
                    <span class="flex1 flex-container alignItemsCenter">
                        <i class="fa-solid fa-terminal fa-fw"></i>
                        <span data-i18n="Slash Command">Slash Command</span>
                    </span>
                    <input type="checkbox" id="sd_command_visible">
                </label>
                <label class="checkbox_label" for="sd_interactive_visible">
                    <span class="flex1 flex-container alignItemsCenter">
                        <i class="fa-solid fa-message fa-fw"></i>
                        <span data-i18n="Interactive Mode">Interactive Mode</span>
                    </span>
                    <input type="checkbox" id="sd_interactive_visible">
                </label>
                <label class="checkbox_label" for="sd_tool_visible">
                    <span class="flex1 flex-container alignItemsCenter">
                        <i class="fa-solid fa-wrench fa-fw"></i>
                        <span data-i18n="Function Tool">Function Tool</span>
                    </span>
                    <input type="checkbox" id="sd_tool_visible">
                </label>
            </div>
        </div>
    </div>
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="Image Prompt Templates">Image Prompt Templates</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content" id="sd_prompt_templates"><div class="title_restorable"><label for="sd_prompt_-2" data-i18n="sd_prompt_-2">Function Tool Prompt Description</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_-2" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_-1" data-i18n="sd_prompt_-1">Chat Message Template</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_-1" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_0" data-i18n="sd_prompt_0">Character ("Yourself")</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_0" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_1" data-i18n="sd_prompt_1">User ("Me")</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_1" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_2" data-i18n="sd_prompt_2">Scenario ("The Whole Story")</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_2" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_3" data-i18n="sd_prompt_3">Raw Last Message</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_3" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_4" data-i18n="sd_prompt_4">Last Message</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_4" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_5" data-i18n="sd_prompt_5">Portrait ("Your Face")</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_5" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_7" data-i18n="sd_prompt_7">Background</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_7" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_8" data-i18n="sd_prompt_8">Character (Multimodal Mode)</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_8" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_9" data-i18n="sd_prompt_9">User (Multimodal Mode)</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_9" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_10" data-i18n="sd_prompt_10">Portrait (Multimodal Mode)</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_10" rows="3"></textarea><div class="title_restorable"><label for="sd_prompt_11" data-i18n="sd_prompt_11">Free Mode (LLM-Extended)</label><button class="menu_button fa-solid fa-undo interactable" title="Restore default" data-i18n="Restore default" tabindex="0"></button></div><textarea class="textarea_compact text_pole" id="sd_prompt_11" rows="3"></textarea></div>
    </div>
</div>
</div>
                        <div id="tts_container" class="extension_container"><div id="tts_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>TTS</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <div id="tts_status">
            </div>
            <span data-i18n="Select TTS Provider">Select TTS Provider</span> <br>
            <div class="tts_block">
                <select class="flex1" id="tts_provider">
                <option value="AllTalk">AllTalk</option><option value="Azure">Azure</option><option value="Coqui">Coqui</option><option value="CosyVoice (Unofficial)">CosyVoice (Unofficial)</option><option value="Edge">Edge</option><option value="ElevenLabs">ElevenLabs</option><option value="Google Translate">Google Translate</option><option value="GSVI">GSVI</option><option value="GPT-SoVITS-V2 (Unofficial)">GPT-SoVITS-V2 (Unofficial)</option><option value="Novel">Novel</option><option value="OpenAI">OpenAI</option><option value="OpenAI Compatible">OpenAI Compatible</option><option value="SBVits2">SBVits2</option><option value="Silero">Silero</option><option value="SpeechT5">SpeechT5</option><option value="System">System</option><option value="VITS">VITS</option><option value="XTTSv2">XTTSv2</option></select>
                <input value="Reload" type="submit" class="menu_button interactable" id="tts_refresh" tabindex="0">
            </div>
            <div>
                <label for="tts_enabled" class="checkbox_label">
                    <input name="tts_enabled" id="tts_enabled" type="checkbox">
                    <small data-i18n="tts_enabled">Enabled</small>
                </label>
                <label for="tts_narrate_user" class="checkbox_label">
                    <input id="tts_narrate_user" type="checkbox">
                    <small data-i18n="Narrate user messages">Narrate user messages</small>
                </label>
                <label for="tts_auto_generation" class="checkbox_label">
                    <input id="tts_auto_generation" type="checkbox">
                    <small data-i18n="Auto Generation">Auto Generation</small>
                </label>
                <label title="Requires auto generation to be enabled." data-i18n="[title]Requires auto generation to be enabled." for="tts_periodic_auto_generation" class="checkbox_label">
                    <input id="tts_periodic_auto_generation" type="checkbox">
                    <small data-i18n="Narrate by paragraphs (when streaming)">Narrate by paragraphs (when streaming)</small>
                </label>
                <label for="tts_narrate_quoted" class="checkbox_label">
                    <input id="tts_narrate_quoted" type="checkbox">
                    <small data-i18n="Only narrate quotes">Only narrate "quotes"</small>
                </label>
                <label for="tts_narrate_dialogues" class="checkbox_label">
                    <input id="tts_narrate_dialogues" type="checkbox">
                    <small data-i18n="Ignore text, even quotes, inside asterisk">Ignore *text, even "quotes", inside asterisks*</small>
                </label>
                <label for="tts_narrate_translated_only" class="checkbox_label">
                    <input id="tts_narrate_translated_only" type="checkbox">
                    <small data-i18n="Narrate only the translated text">Narrate only the translated text</small>
                </label>
                <label for="tts_skip_codeblocks" class="checkbox_label">
                    <input id="tts_skip_codeblocks" type="checkbox">
                    <small data-i18n="Skip codeblocks">Skip codeblocks</small>
                </label>
                <label for="tts_skip_tags" class="checkbox_label">
                    <input id="tts_skip_tags" type="checkbox">
                    <small data-i18n="Skip tagged blocks">Skip &lt;tagged&gt; blocks</small>
                </label>
                <label for="tts_pass_asterisks" class="checkbox_label">
                <input id="tts_pass_asterisks" type="checkbox">
                <small data-i18n="Pass Asterisks to TTS Engine">Pass Asterisks to TTS Engine</small>
                </label>
            </div>
            <div class="range-block" id="playback_rate_block" style="display: none;">
                <hr>
                <div class="range-block-title justifyLeft">
                    <small data-i18n="Audio Playback Speed">Audio Playback Speed</small>
                </div>
                <div class="range-block-range-and-counter">
                    <div class="range-block-range">
                        <input step="0.05" max="3" min="0" name="volume" id="playback_rate" type="range">
                    </div>
                    <div class="range-block-counter">
                        <input id="playback_rate_counter" data-for="playback_rate" step="0.05" max="3" min="0" type="number">
                    </div>
                </div>
            </div>
            <div id="tts_voicemap_block">
            </div>
            <hr>
            <form class="inline-drawer-content" id="tts_provider_settings" target="_blank" rel="noopener"><p>Uses the voices provided by your operating system</p>
        <label for="system_tts_rate">Rate: <span id="system_tts_rate_output">1</span></label>
        <input id="system_tts_rate" type="range" value="1" min="0.1" max="2" step="0.01">
        <label for="system_tts_pitch">Pitch: <span id="system_tts_pitch_output">1</span></label>
        <input id="system_tts_pitch" type="range" value="1" min="0" max="2" step="0.01"></form>
            <div class="tts_buttons">
                <input value="Available voices" type="submit" class="menu_button interactable" id="tts_voices" tabindex="0">
            </div>
            </div>
        </div>
    </div></div>
                        <div id="rvc_container" class="extension_container"></div>
                        <div id="stt_container" class="extension_container"></div>
                        <div id="audio_container" class="extension_container"></div>
                        <div id="silence_container" class="extension_container"></div>
                        <div id="objective_container" class="extension_container"></div>
                        <div id="blip_container" class="extension_container"></div>
                        <div id="live2d_container" class="extension_container"></div>
                        <div id="vrm_container" class="extension_container"></div>
                        <div id="timelines_container" class="extension_container"></div>
                    </div>
                    <div id="extensions_settings2" class="flex1 wide50p">
                        <div id="websearch_container" class="extension_container"></div>
                        <div id="emulatorjs_container" class="extension_container"></div>
                        <div id="qr_container" class="extension_container"><div id="qr--settings">
	<div class="inline-drawer">
		<div class="inline-drawer-toggle inline-drawer-header">
			<strong data-i18n="Quick Reply">Quick Reply</strong>
			<div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
		</div>
		<div class="inline-drawer-content">
			<label class="flex-container">
				<input type="checkbox" id="qr--isEnabled"><span data-i18n="Enable Quick Replies">Enable Quick Replies</span>
			</label>
			<label class="flex-container">
				<input type="checkbox" id="qr--isCombined"><span data-i18n="Combine Quick Replies">Combine Quick Replies</span>
			</label>
            <label class="flex-container">
                <input type="checkbox" id="qr--showPopoutButton"><span data-i18n="Show Popout Button">Show Popout Button (on Desktop)</span>
            </label>

			<hr>

			<div id="qr--global">
				<div class="qr--head">
					<div class="qr--title" data-i18n="Global Quick Reply Sets">Global Quick Reply Sets</div>
					<div class="qr--actions">
						<div class="qr--setListAdd menu_button menu_button_icon fa-solid fa-plus interactable" id="qr--global-setListAdd" title="Add quick reply set" tabindex="0"></div>
					</div>
				</div>
				<div id="qr--global-setList" class="qr--setList ui-sortable"><div class="qr--item" data-order="0"><div class="drag-handle ui-sortable-handle">☰</div><select class="qr--set"><option value="Default">Default</option></select><label class="qr--visible" title="Show buttons"><input type="checkbox">Buttons</label><div class="menu_button menu_button_icon fa-solid fa-pencil interactable" title="Edit quick reply set" tabindex="0"></div><div class="qr--del menu_button menu_button_icon fa-solid fa-trash-can interactable" title="Remove quick reply set" tabindex="0"></div></div></div>
			</div>

			<hr>

			<div id="qr--chat">
				<div class="qr--head">
					<div class="qr--title" data-i18n="Chat Quick Reply Sets">Chat Quick Reply Sets</div>
					<div class="qr--actions">
						<div class="qr--setListAdd menu_button menu_button_icon fa-solid fa-plus interactable" id="qr--chat-setListAdd" title="Add quick reply set" tabindex="0"></div>
					</div>
				</div>
				<div id="qr--chat-setList" class="qr--setList"></div>
			<div>No active chat.</div></div>

			<hr>

			<div id="qr--editor">
				<div class="qr--head">
					<div class="qr--title" data-i18n="Edit Quick Replies">Edit Quick Replies</div>
					<div class="qr--actions">
						<select id="qr--set" class="text_pole"><option value="Default">Default</option></select>
						<div class="qr--add menu_button menu_button_icon fa-solid fa-plus interactable" id="qr--set-new" title="Create new quick reply set" tabindex="0"></div>
						<div class="qr--add menu_button menu_button_icon fa-solid fa-file-import interactable" id="qr--set-import" title="Import quick reply set" tabindex="0"></div>
						<input type="file" id="qr--set-importFile" accept=".json" hidden="">
						<div class="qr--add menu_button menu_button_icon fa-solid fa-file-export interactable" id="qr--set-export" title="Export quick reply set" tabindex="0"></div>
						<div class="qr--del menu_button menu_button_icon fa-solid fa-trash redWarningBG interactable" id="qr--set-delete" title="Delete quick reply set" tabindex="0"></div>
					</div>
				</div>
				<div id="qr--set-settings">
					<label class="flex-container">
						<input type="checkbox" id="qr--disableSend"> <span data-i18n="Disable Send (Insert Into Input Field)">Disable send (insert into input field)</span>
					</label>
					<label class="flex-container">
						<input type="checkbox" id="qr--placeBeforeInput"> <span data-i18n="Place Quick Reply Before Input">Place quick reply before input</span>
					</label>
					<label class="flex-container" id="qr--injectInputContainer">
						<input type="checkbox" id="qr--injectInput"> <span><span data-i18n="Inject user input automatically">Inject user input automatically</span> <small><span data-i18n="(if disabled, use ">(if disabled, use</span><code>{{input}}</code> <span data-i18n="macro for manual injection)">macro for manual injection)</span></small></span>
					</label>
					<div class="flex-container alignItemsCenter">
						<toolcool-color-picker id="qr--color"></toolcool-color-picker>
						<div class="menu_button interactable" id="qr--colorClear" tabindex="0">Clear</div>
						<span data-i18n="Color">Color</span>
					</div>
					<label class="flex-container" id="qr--onlyBorderColorContainer">
						<input type="checkbox" id="qr--onlyBorderColor"> <span data-i18n="Only apply color as accent">Only apply color as accent</span>
					</label>
				</div>
				<div id="qr--set-qrList" class="qr--qrList"><div class="qr--set-qrListContents ui-sortable"><div class="qr--set-item" data-order="0" data-id="1"><div class="qr--set-itemAdder"><div class="qr--actions"><div class="qr--action qr--add menu_button menu_button_icon fa-solid fa-plus interactable" title="Add quick reply" tabindex="0"></div><div class="qr--action qr--paste menu_button menu_button_icon fa-solid fa-paste interactable" title="Add quick reply from clipboard" tabindex="0"></div><div class="qr--action qr--importFile menu_button menu_button_icon fa-solid fa-file-import interactable" title="Add quick reply from JSON file" tabindex="0"></div></div></div><div class="qr--content"><div class="drag-handle ui-sortable-handle">☰</div><div class="qr--set-itemLabelContainer"><div title="Click to change icon" class="qr--set-itemIcon menu_button fa-fw interactable" tabindex="0"></div><input class="qr--set-itemLabel text_pole"></div><div class="qr--set-optionsContainer"><div class="qr--action menu_button fa-fw fa-solid interactable" title="Additional options:
 - large editor
 - context menu
 - auto-execution
 - tooltip" tabindex="0">⁝</div></div><textarea id="qr--set--item1" class="qr--set-itemMessage"></textarea><div class="qr--actions"><div class="qr--action menu_button fa-fw fa-solid fa-truck-arrow-right interactable" title="Move quick reply to other set" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-copy interactable" title="Copy quick reply to clipboard" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-cut interactable" title="Cut quick reply to clipboard (copy and remove)" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-file-export interactable" title="Export quick reply as file" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-trash-can redWarningBG interactable" title="Remove Quick Reply
---
Shift+Click to skip confirmation" tabindex="0"></div></div></div></div><div class="qr--set-item" data-order="1" data-id="2"><div class="qr--set-itemAdder"><div class="qr--actions"><div class="qr--action qr--add menu_button menu_button_icon fa-solid fa-plus interactable" title="Add quick reply" tabindex="0"></div><div class="qr--action qr--paste menu_button menu_button_icon fa-solid fa-paste interactable" title="Add quick reply from clipboard" tabindex="0"></div><div class="qr--action qr--importFile menu_button menu_button_icon fa-solid fa-file-import interactable" title="Add quick reply from JSON file" tabindex="0"></div></div></div><div class="qr--content"><div class="drag-handle ui-sortable-handle">☰</div><div class="qr--set-itemLabelContainer"><div title="Click to change icon" class="qr--set-itemIcon menu_button fa-fw interactable" tabindex="0"></div><input class="qr--set-itemLabel text_pole"></div><div class="qr--set-optionsContainer"><div class="qr--action menu_button fa-fw fa-solid interactable" title="Additional options:
 - large editor
 - context menu
 - auto-execution
 - tooltip" tabindex="0">⁝</div></div><textarea id="qr--set--item2" class="qr--set-itemMessage"></textarea><div class="qr--actions"><div class="qr--action menu_button fa-fw fa-solid fa-truck-arrow-right interactable" title="Move quick reply to other set" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-copy interactable" title="Copy quick reply to clipboard" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-cut interactable" title="Cut quick reply to clipboard (copy and remove)" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-file-export interactable" title="Export quick reply as file" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-trash-can redWarningBG interactable" title="Remove Quick Reply
---
Shift+Click to skip confirmation" tabindex="0"></div></div></div></div><div class="qr--set-item" data-order="2" data-id="3"><div class="qr--set-itemAdder"><div class="qr--actions"><div class="qr--action qr--add menu_button menu_button_icon fa-solid fa-plus interactable" title="Add quick reply" tabindex="0"></div><div class="qr--action qr--paste menu_button menu_button_icon fa-solid fa-paste interactable" title="Add quick reply from clipboard" tabindex="0"></div><div class="qr--action qr--importFile menu_button menu_button_icon fa-solid fa-file-import interactable" title="Add quick reply from JSON file" tabindex="0"></div></div></div><div class="qr--content"><div class="drag-handle ui-sortable-handle">☰</div><div class="qr--set-itemLabelContainer"><div title="Click to change icon" class="qr--set-itemIcon menu_button fa-fw interactable" tabindex="0"></div><input class="qr--set-itemLabel text_pole"></div><div class="qr--set-optionsContainer"><div class="qr--action menu_button fa-fw fa-solid interactable" title="Additional options:
 - large editor
 - context menu
 - auto-execution
 - tooltip" tabindex="0">⁝</div></div><textarea id="qr--set--item3" class="qr--set-itemMessage"></textarea><div class="qr--actions"><div class="qr--action menu_button fa-fw fa-solid fa-truck-arrow-right interactable" title="Move quick reply to other set" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-copy interactable" title="Copy quick reply to clipboard" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-cut interactable" title="Cut quick reply to clipboard (copy and remove)" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-file-export interactable" title="Export quick reply as file" tabindex="0"></div><div class="qr--action menu_button fa-fw fa-solid fa-trash-can redWarningBG interactable" title="Remove Quick Reply
---
Shift+Click to skip confirmation" tabindex="0"></div></div></div></div></div></div>
				<div class="qr--set-qrListActions">
					<div class="qr--add menu_button menu_button_icon fa-solid fa-plus interactable" id="qr--set-add" title="Add quick reply" tabindex="0"></div>
					<div class="qr--paste menu_button menu_button_icon fa-solid fa-paste interactable" id="qr--set-paste" title="Paste quick reply from clipboard" tabindex="0"></div>
					<div class="qr--import menu_button menu_button_icon fa-solid fa-file-import interactable" id="qr--set-importQr" title="Import quick reply from file" tabindex="0"></div>
				</div>
			</div>
		</div>
	</div>
</div></div>
                        <div id="translation_container" class="extension_container"><div class="translation_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="ext_translate_title">Chat Translation</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <label data-i18n="ext_translate_auto_mode" class="checkbox_label" for="translation_auto_mode">Auto-mode</label>
            <select id="translation_auto_mode">
                <option value="none" data-i18n="ext_translate_mode_none" selected="selected">None</option>
                <option value="responses" data-i18n="ext_translate_mode_responses">Translate responses</option>
                <option value="inputs" data-i18n="ext_translate_mode_inputs">Translate inputs</option>
                <option value="both" data-i18n="ext_translate_mode_both">Translate both</option>
            </select>
            <label for="translation_provider" data-i18n="ext_translate_mode_provider">Provider</label>
            <div class="flex-container gap5px flexnowrap marginBot5">
                <select class="margin0 text_pole flex2" name="provider" id="translation_provider">
                    <option value="libre">LibreTranslate</option>
                    <option value="google" selected="selected">Google</option>
                    <option value="lingva">Lingva</option>
                    <option value="deepl">DeepL API</option>
                    <option value="deeplx">DeepLX</option>
                    <option value="bing">Bing</option>
                    <option value="oneringtranslator">OneRingTranslator</option>
                    <option value="yandex">Yandex</option>
                </select>
                <select title="DeepL API Endpoint" class="margin0 text_pole flex1" id="deepl_api_endpoint" style="display: none;">
                    <option value="free">Free</option>
                    <option value="pro">Pro</option>
                </select>
                <div class="menu_button fa-solid fa-key margin0 interactable" id="translate_key_button" style="display: none;" tabindex="0"></div>
                <div class="menu_button fa-solid fa-link margin0 interactable" id="translate_url_button" style="display: none;" tabindex="0"></div>
            </div>
            <label for="translation_target_language" data-i18n="ext_translate_target_lang">Target Language</label>
            <select name="target_language" id="translation_target_language"><option value="af">Afrikaans</option><option value="sq">Albanian</option><option value="am">Amharic</option><option value="ar">Arabic</option><option value="hy">Armenian</option><option value="az">Azerbaijani</option><option value="eu">Basque</option><option value="be">Belarusian</option><option value="bn">Bengali</option><option value="bs">Bosnian</option><option value="bg">Bulgarian</option><option value="ca">Catalan</option><option value="ceb">Cebuano</option><option value="zh-CN">Chinese (Simplified)</option><option value="zh-TW">Chinese (Traditional)</option><option value="co">Corsican</option><option value="hr">Croatian</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en" selected="selected">English</option><option value="eo">Esperanto</option><option value="et">Estonian</option><option value="fi">Finnish</option><option value="fr">French</option><option value="fy">Frisian</option><option value="gl">Galician</option><option value="ka">Georgian</option><option value="de">German</option><option value="el">Greek</option><option value="gu">Gujarati</option><option value="ht">Haitian Creole</option><option value="ha">Hausa</option><option value="haw">Hawaiian</option><option value="iw">Hebrew</option><option value="hi">Hindi</option><option value="hmn">Hmong</option><option value="hu">Hungarian</option><option value="is">Icelandic</option><option value="ig">Igbo</option><option value="id">Indonesian</option><option value="ga">Irish</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="jw">Javanese</option><option value="kn">Kannada</option><option value="kk">Kazakh</option><option value="km">Khmer</option><option value="ko">Korean</option><option value="ku">Kurdish</option><option value="ky">Kyrgyz</option><option value="lo">Lao</option><option value="la">Latin</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="lb">Luxembourgish</option><option value="mk">Macedonian</option><option value="mg">Malagasy</option><option value="ms">Malay</option><option value="ml">Malayalam</option><option value="mt">Maltese</option><option value="mi">Maori</option><option value="mr">Marathi</option><option value="mn">Mongolian</option><option value="my">Myanmar (Burmese)</option><option value="ne">Nepali</option><option value="no">Norwegian</option><option value="ny">Nyanja (Chichewa)</option><option value="ps">Pashto</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt-PT">Portuguese (Portugal)</option><option value="pt-BR">Portuguese (Brazil)</option><option value="pa">Punjabi</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sm">Samoan</option><option value="gd">Scots Gaelic</option><option value="sr">Serbian</option><option value="st">Sesotho</option><option value="sn">Shona</option><option value="sd">Sindhi</option><option value="si">Sinhala (Sinhalese)</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="so">Somali</option><option value="es">Spanish</option><option value="su">Sundanese</option><option value="sw">Swahili</option><option value="sv">Swedish</option><option value="tl">Tagalog (Filipino)</option><option value="tg">Tajik</option><option value="ta">Tamil</option><option value="te">Telugu</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="uz">Uzbek</option><option value="vi">Vietnamese</option><option value="cy">Welsh</option><option value="xh">Xhosa</option><option value="yi">Yiddish</option><option value="yo">Yoruba</option><option value="zu">Zulu</option></select>
            <div class="menu_button interactable" id="translation_clear" tabindex="0">
                <i class="fa-solid fa-trash-can"></i>
                <span data-i18n="ext_translate_clear">Clear Translations</span>
            </div>
        </div>
    </div>
</div>
</div>
                        <div id="caption_container" class="extension_container">
<div class="caption_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="Image Captioning">Image Captioning</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <label data-i18n="Source" for="caption_source">Source</label>
            <select class="text_pole" id="caption_source">
                <option data-i18n="Local" value="local">Local</option>
                <option data-i18n="Multimodal (OpenAI / Anthropic / llama / Google)" value="multimodal">Multimodal (OpenAI / Anthropic / llama / Google)</option>
                <option data-i18n="Extras" value="extras">Extras</option>
                <option data-i18n="Horde" value="horde">Horde</option>
            </select>
            <div class="flex-container wide100p" id="caption_multimodal_block" style="display: none;">
                <div class="flex1 flex-container flexFlowColumn flexNoGap">
                    <label data-i18n="API" for="caption_multimodal_api">API</label>
                    <select class="flex1 text_pole" id="caption_multimodal_api">
                        <option value="zerooneai">01.AI (Yi)</option>
                        <option value="anthropic">Anthropic</option>
                        <option data-i18n="Custom (OpenAI-compatible)" value="custom">Custom (OpenAI-compatible)</option>
                        <option value="google">Google AI Studio</option>
                        <option value="groq">Groq</option>
                        <option value="koboldcpp">KoboldCpp</option>
                        <option value="llamacpp">llama.cpp</option>
                        <option value="mistral">MistralAI</option>
                        <option value="ollama">Ollama</option>
                        <option value="openai">OpenAI</option>
                        <option value="openrouter">OpenRouter</option>
                        <option data-i18n="Text Generation WebUI (oobabooga)" value="ooba">Text Generation WebUI (oobabooga)</option>
                        <option value="vllm">vLLM</option>
                    </select>
                </div>
                <div class="flex1 flex-container flexFlowColumn flexNoGap">
                    <label data-i18n="Model" for="caption_multimodal_model">Model</label>
                    <select class="flex1 text_pole" id="caption_multimodal_model">
                        <option value="pixtral-12b-latest" data-type="mistral" style="display: none;">pixtral-12b-latest</option>
                        <option value="pixtral-12b-2409" data-type="mistral" style="display: none;">pixtral-12b-2409</option>
                        <option value="pixtral-large-latest" data-type="mistral" style="display: none;">pixtral-large-latest</option>
                        <option value="pixtral-large-2411" data-type="mistral" style="display: none;">pixtral-large-2411</option>
                        <option value="yi-vision" data-type="zerooneai" style="display: none;">yi-vision</option>
                        <option value="gpt-4-vision-preview" data-type="openai">gpt-4-vision-preview</option>
                        <option value="gpt-4-turbo" data-type="openai">gpt-4-turbo</option>
                        <option value="gpt-4o" data-type="openai">gpt-4o</option>
                        <option value="gpt-4o-mini" data-type="openai">gpt-4o-mini</option>
                        <option value="chatgpt-4o-latest" data-type="openai">chatgpt-4o-latest</option>
                        <option value="claude-3-5-sonnet-latest" data-type="anthropic" style="display: none;">claude-3-5-sonnet-latest</option>
                        <option value="claude-3-5-sonnet-20241022" data-type="anthropic" style="display: none;">claude-3-5-sonnet-20241022</option>
                        <option value="claude-3-5-sonnet-20240620" data-type="anthropic" style="display: none;">claude-3-5-sonnet-20240620</option>
                        <option value="claude-3-5-haiku-latest" data-type="anthropic" style="display: none;">claude-3-5-haiku-latest</option>
                        <option value="claude-3-5-haiku-20241022" data-type="anthropic" style="display: none;">claude-3-5-haiku-20241022</option>
                        <option value="claude-3-opus-20240229" data-type="anthropic" style="display: none;">claude-3-opus-20240229</option>
                        <option value="claude-3-sonnet-20240229" data-type="anthropic" style="display: none;">claude-3-sonnet-20240229</option>
                        <option value="claude-3-haiku-20240307" data-type="anthropic" style="display: none;">claude-3-haiku-20240307</option>
                        <option value="gemini-2.0-flash-exp" data-type="google" style="display: none;">gemini-2.0-flash-exp</option>
                        <option value="gemini-2.0-flash-thinking-exp-1219" data-type="google" style="display: none;">gemini-2.0-flash-thinking-exp-1219</option>
                        <option value="gemini-1.5-flash" data-type="google" style="display: none;">gemini-1.5-flash</option>
                        <option value="gemini-1.5-flash-latest" data-type="google" style="display: none;">gemini-1.5-flash-latest</option>
                        <option value="gemini-1.5-flash-001" data-type="google" style="display: none;">gemini-1.5-flash-001</option>
                        <option value="gemini-1.5-flash-002" data-type="google" style="display: none;">gemini-1.5-flash-002</option>
                        <option value="gemini-1.5-flash-exp-0827" data-type="google" style="display: none;">gemini-1.5-flash-exp-0827</option>
                        <option value="gemini-1.5-flash-8b-exp-0827" data-type="google" style="display: none;">gemini-1.5-flash-8b-exp-0827</option>
                        <option value="gemini-1.5-flash-8b-exp-0924" data-type="google" style="display: none;">gemini-1.5-flash-8b-exp-0924</option>
                        <option value="gemini-exp-1114" data-type="google" style="display: none;">gemini-exp-1114</option>
                        <option value="gemini-exp-1121" data-type="google" style="display: none;">gemini-exp-1121</option>
                        <option value="gemini-exp-1206" data-type="google" style="display: none;">gemini-exp-1206</option>
                        <option value="gemini-1.5-pro" data-type="google" style="display: none;">gemini-1.5-pro</option>
                        <option value="gemini-1.5-pro-latest" data-type="google" style="display: none;">gemini-1.5-pro-latest</option>
                        <option value="gemini-1.5-pro-001" data-type="google" style="display: none;">gemini-1.5-pro-001</option>
                        <option value="gemini-1.5-pro-002" data-type="google" style="display: none;">gemini-1.5-pro-002</option>
                        <option value="gemini-1.5-pro-exp-0801" data-type="google" style="display: none;">gemini-1.5-pro-exp-0801</option>
                        <option value="gemini-1.5-pro-exp-0827" data-type="google" style="display: none;">gemini-1.5-pro-exp-0827</option>
                        <option value="llama-3.2-11b-vision-preview" data-type="groq" style="display: none;">llama-3.2-11b-vision-preview</option>
                        <option value="llama-3.2-90b-vision-preview" data-type="groq" style="display: none;">llama-3.2-90b-vision-preview</option>
                        <option value="llava-v1.5-7b-4096-preview" data-type="groq" style="display: none;">llava-v1.5-7b-4096-preview</option>
                        <option value="openai/gpt-4-vision-preview" data-type="openrouter" style="display: none;">openai/gpt-4-vision-preview</option>
                        <option value="openai/gpt-4o" data-type="openrouter" style="display: none;">openai/gpt-4o</option>
                        <option value="openai/gpt-4o-2024-05-13" data-type="openrouter" style="display: none;">openai/gpt-4o-2024-05-13</option>
                        <option value="openai/gpt-4o-2024-08-06" data-type="openrouter" style="display: none;">openai/gpt-4o-2024-08-06</option>
                        <option value="openai/gpt-4-turbo" data-type="openrouter" style="display: none;">openai/gpt-4-turbo</option>
                        <option value="openai/gpt-4o-mini" data-type="openrouter" style="display: none;">openai/gpt-4o-mini</option>
                        <option value="openai/gpt-4o-mini-2024-07-18" data-type="openrouter" style="display: none;">openai/gpt-4o-mini-2024-07-18</option>
                        <option value="openai/chatgpt-4o-latest" data-type="openrouter" style="display: none;">openai/chatgpt-4o-latest</option>
                        <option value="haotian-liu/llava-13b" data-type="openrouter" style="display: none;">haotian-liu/llava-13b</option>
                        <option value="fireworks/firellava-13b" data-type="openrouter" style="display: none;">fireworks/firellava-13b</option>
                        <option value="anthropic/claude-3.5-sonnet" data-type="openrouter" style="display: none;">anthropic/claude-3.5-sonnet</option>
                        <option value="anthropic/claude-3-haiku" data-type="openrouter" style="display: none;">anthropic/claude-3-haiku</option>
                        <option value="anthropic/claude-3-sonnet" data-type="openrouter" style="display: none;">anthropic/claude-3-sonnet</option>
                        <option value="anthropic/claude-3-opus" data-type="openrouter" style="display: none;">anthropic/claude-3-opus</option>
                        <option value="anthropic/claude-3.5-sonnet:beta" data-type="openrouter" style="display: none;">anthropic/claude-3.5-sonnet:beta</option>
                        <option value="anthropic/claude-3-haiku:beta" data-type="openrouter" style="display: none;">anthropic/claude-3-haiku:beta</option>
                        <option value="anthropic/claude-3-sonnet:beta" data-type="openrouter" style="display: none;">anthropic/claude-3-sonnet:beta</option>
                        <option value="anthropic/claude-3-opus:beta" data-type="openrouter" style="display: none;">anthropic/claude-3-opus:beta</option>
                        <option value="nousresearch/nous-hermes-2-vision-7b" data-type="openrouter" style="display: none;">nousresearch/nous-hermes-2-vision-7b</option>
                        <option value="google/gemini-flash-8b-1.5-exp" data-type="openrouter" style="display: none;">google/gemini-flash-8b-1.5-exp</option>
                        <option value="google/gemini-flash-1.5" data-type="openrouter" style="display: none;">google/gemini-flash-1.5</option>
                        <option value="google/gemini-flash-1.5-exp" data-type="openrouter" style="display: none;">google/gemini-flash-1.5-exp</option>
                        <option value="google/gemini-pro-1.5" data-type="openrouter" style="display: none;">google/gemini-pro-1.5</option>
                        <option value="google/gemini-pro-1.5-exp" data-type="openrouter" style="display: none;">google/gemini-pro-1.5-exp</option>
                        <option value="google/gemini-pro-vision" data-type="openrouter" style="display: none;">google/gemini-pro-vision</option>
                        <option value="liuhaotian/llava-yi-34b" data-type="openrouter" style="display: none;">liuhaotian/llava-yi-34b</option>
                        <option data-i18n="currently_selected" value="ollama_current" data-type="ollama" style="display: none;">[Currently selected]</option>
                        <option value="bakllava" data-type="ollama" style="display: none;">bakllava</option>
                        <option value="llava" data-type="ollama" style="display: none;">llava</option>
                        <option value="llava-llama3" data-type="ollama" style="display: none;">llava-llama3</option>
                        <option value="llava-phi3" data-type="ollama" style="display: none;">llava-phi3</option>
                        <option value="moondream" data-type="ollama" style="display: none;">moondream</option>
                        <option data-i18n="currently_loaded" value="llamacpp_current" data-type="llamacpp" style="display: none;">[Currently loaded]</option>
                        <option data-i18n="currently_loaded" value="ooba_current" data-type="ooba" style="display: none;">[Currently loaded]</option>
                        <option data-i18n="currently_loaded" value="koboldcpp_current" data-type="koboldcpp" style="display: none;">[Currently loaded]</option>
                        <option data-i18n="currently_selected" value="vllm_current" data-type="vllm" style="display: none;">[Currently selected]</option>
                        <option data-i18n="currently_selected" value="custom_current" data-type="custom" style="display: none;">[Currently selected]</option>
                    </select>
                </div>
                <div data-type="ollama" style="display: none;">
                    The model must be downloaded first! Do it with the <code>ollama pull</code> command or <a id="caption_ollama_pull" href="#" target="_blank" rel="noopener">click here</a>.
                </div>
                <label title="Allow using reverse proxy if defined and valid." for="caption_allow_reverse_proxy" class="checkbox_label flexBasis100p" data-type="openai,anthropic,google,mistral">
                    <input class="checkbox" type="checkbox" id="caption_allow_reverse_proxy">
                    <span data-i18n="Allow reverse proxy">Allow reverse proxy</span>
                </label>
                <div class="flexBasis100p m-b-1">
                    <small><b data-i18n="Hint:">Hint:</b> <span data-i18n="Set your API keys and endpoints in the 'API Connections' tab first.">Set your API keys and endpoints in the 'API Connections' tab first.</span></small>
                </div>
            </div>
            <div id="caption_prompt_block" style="display: none;">
                <label data-i18n="Caption Prompt" for="caption_prompt">Caption Prompt</label>
                <textarea placeholder="< Use default >" rows="1" class="text_pole" id="caption_prompt">What's in this image?</textarea>
                <label title="Ask for a custom prompt every time an image is captioned." for="caption_prompt_ask" class="checkbox_label margin-bot-10px">
                    <input class="checkbox" type="checkbox" id="caption_prompt_ask">
                    <span data-i18n="Ask every time">Ask every time</span>
                </label>
            </div>
            <label for="caption_template"><span data-i18n="Message Template">Message Template</span> <small><span data-i18n="(use _space">(use </span> <code>{{caption}}</code> <span data-i18n="macro)">macro)</span></small></label>
            <textarea placeholder="< Use default >" rows="2" class="text_pole" id="caption_template">[{{user}} sends {{char}} a picture that contains: {{caption}}]</textarea>
            <label for="caption_auto_mode" class="checkbox_label">
                <input class="checkbox" type="checkbox" id="caption_auto_mode">
                <span data-i18n="Automatically caption images">Automatically caption images</span>
                <i title="Automatically caption images when they are pasted into the chat or attached to messages." class="fa-solid fa-info-circle"></i>
            </label>
            <label for="caption_refine_mode" class="checkbox_label margin-bot-10px">
                <input class="checkbox" type="checkbox" id="caption_refine_mode">
                <span data-i18n="Edit captions before saving">Edit captions before saving</span>
            </label>
        </div>
    </div>
</div>
</div>
                        <div id="idle_container" class="extension_container"></div>
                        <div id="summarize_container" class="extension_container"><div id="memory_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <div class="flex-container alignitemscenter margin0">
                <b data-i18n="ext_sum_title">Summarize</b>
                <i class="fa-solid fa-window-restore menu_button margin0 interactable" id="summaryExtensionPopoutButton" tabindex="0"></i>
            </div>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <div id="summaryExtensionDrawerContents">
                <label data-i18n="ext_sum_with" for="summary_source">Summarize with:</label>
                <select id="summary_source">
                    <option data-i18n="ext_sum_main_api" value="main">Main API</option>
                    <option value="extras">Extras API</option>
                    <option data-i18n="ext_sum_webllm" value="webllm">WebLLM Extension</option>
                </select><br>

                <div class="flex-container justifyspacebetween alignitemscenter">
                    <span data-i18n="ext_sum_current_summary" class="flex1">Current summary:</span>
                    <div title="Restore a previous summary; use repeatedly to clear summarization state for this chat." data-i18n="[title]ext_sum_restore_tip" class="menu_button flex1 margin0 interactable" id="memory_restore" tabindex="0">
                        <span data-i18n="ext_sum_restore_previous">Restore Previous</span>
                    </div>
                </div>

                <textarea placeholder="Summary will be generated here..." data-i18n="[placeholder]ext_sum_memory_placeholder" rows="6" class="text_pole textarea_compact" id="memory_contents"></textarea>
                <div class="memory_contents_controls">
                    <div data-i18n="[title]ext_sum_force_tip" title="Trigger a summary update right now." class="menu_button menu_button_icon interactable" data-summary-source="main,webllm" id="memory_force_summarize" style="display: none;" tabindex="0">
                        <i class="fa-solid fa-database"></i>
                        <span data-i18n="ext_sum_force_text">Summarize now</span>
                    </div>
                    <label data-i18n="[title]Disable automatic summary updates. While paused, the summary remains as-is. You can still force an update by pressing the Summarize now button (which is only available with the Main API)." title="Disable automatic summary updates. While paused, the summary remains as-is. You can still force an update by pressing the Summarize now button (which is only available with the Main API)." for="memory_frozen"><input type="checkbox" id="memory_frozen"><span data-i18n="ext_sum_pause">Pause</span></label>
                    <label data-i18n="[title]Omit World Info and Author's Note from text to be summarized. Only has an effect when using the Main API. The Extras API always omits WI/AN." title="Omit World Info and Author's Note from text to be summarized. Only has an effect when using the Main API. The Extras API always omits WI/AN." for="memory_skipWIAN" data-summary-source="main" style="display: none;">
                        <input type="checkbox" id="memory_skipWIAN">
                        <span data-i18n="ext_sum_no_wi_an">No WI/AN</span>
                    </label>
                </div>
                <div class="memory_contents_controls">
                    <div title="Edit summarization prompt, insertion position, etc." data-i18n="[title]ext_sum_settings_tip" class="menu_button menu_button_icon interactable" id="summarySettingsBlockToggle" tabindex="0">
                        <i class="fa-solid fa-cog"></i>
                        <span data-i18n="ext_sum_settings">Summary Settings</span>
                    </div>
                </div>
                <div style="display:none;" id="summarySettingsBlock">
                    <div data-summary-source="main" style="display: none;">
                        <label data-i18n="ext_sum_prompt_builder">
                            Prompt builder
                        </label>
                        <label title="Extension will build its own prompt using messages that were not summarized yet. Blocks the chat until the summary is generated." data-i18n="[title]ext_sum_prompt_builder_1_desc" for="memory_prompt_builder_raw_blocking" class="checkbox_label">
                            <input value="1" name="memory_prompt_builder" type="radio" id="memory_prompt_builder_raw_blocking">
                            <span data-i18n="ext_sum_prompt_builder_1">Raw, blocking</span>
                        </label>
                        <label title="Extension will build its own prompt using messages that were not summarized yet. Does not block the chat while the summary is being generated. Not all backends support this mode." data-i18n="[title]ext_sum_prompt_builder_2_desc" for="memory_prompt_builder_raw_non_blocking" class="checkbox_label">
                            <input value="2" name="memory_prompt_builder" type="radio" id="memory_prompt_builder_raw_non_blocking">
                            <span data-i18n="ext_sum_prompt_builder_2">Raw, non-blocking</span>
                        </label>
                        <label title="Extension will use the regular main prompt builder and add the summary request to it as the last system message." data-i18n="[title]ext_sum_prompt_builder_3_desc" id="memory_prompt_builder_default" class="checkbox_label">
                            <input value="0" name="memory_prompt_builder" type="radio" id="memory_prompt_builder_default">
                            <span data-i18n="ext_sum_prompt_builder_3">Classic, blocking</span>
                        </label>
                    </div>
                    <div data-summary-source="main,webllm" style="display: none;">
                        <label class="title_restorable" for="memory_prompt">
                            <span data-i18n="Summary Prompt">Summary Prompt</span>
                            <div class="right_menu_button interactable" title="Restore default prompt" data-i18n="[title]ext_sum_restore_default_prompt_tip" id="memory_prompt_restore" tabindex="0">
                                <div class="fa-solid fa-clock-rotate-left"></div>
                            </div>
                        </label>
                        <textarea placeholder="This prompt will be sent to AI to request the summary generation. {{words}} will resolve to the 'Number of words' parameter." data-i18n="[placeholder]ext_sum_prompt_placeholder" rows="6" class="text_pole textarea_compact" id="memory_prompt"></textarea>
                        <label for="memory_prompt_words"><span data-i18n="ext_sum_target_length_1">Target summary length</span> <span data-i18n="ext_sum_target_length_2">(</span><span id="memory_prompt_words_value">200</span><span data-i18n="ext_sum_target_length_3"> words)</span></label>
                        <input step="25" max="1000" min="25" value="200" type="range" id="memory_prompt_words">
                        <label for="memory_override_response_length">
                            <span data-i18n="ext_sum_api_response_length_1">API response length</span> <span data-i18n="ext_sum_api_response_length_2">(</span><span id="memory_override_response_length_value">0</span><span data-i18n="ext_sum_api_response_length_3"> tokens)</span>
                            <small data-i18n="ext_sum_0_default" class="memory_disabled_hint">0 = default</small>
                        </label>
                        <input step="16" max="4096" min="0" value="0" type="range" id="memory_override_response_length">
                        <label for="memory_max_messages_per_request">
                            <span data-i18n="ext_sum_raw_max_msg">[Raw/WebLLM] Max messages per request</span> (<span id="memory_max_messages_per_request_value">0</span>)
                            <small data-i18n="ext_sum_0_unlimited" class="memory_disabled_hint">0 = unlimited</small>
                        </label>
                        <input step="1" max="250" min="0" value="0" type="range" id="memory_max_messages_per_request">
                        <h4 class="textAlignCenter" data-i18n="Update frequency">
                            Update frequency
                        </h4>
                        <label class="title_restorable" for="memory_prompt_interval">
                            <span>
                                <span data-i18n="ext_sum_update_every_messages_1">Update every</span> <span id="memory_prompt_interval_value">10</span><span data-i18n="ext_sum_update_every_messages_2"> messages</span>
                                <small data-i18n="ext_sum_0_disable" class="memory_disabled_hint">0 = disable</small>
                            </span>
                            <div class="right_menu_button interactable" title="Try to automatically adjust the interval based on the chat metrics." data-i18n="[title]ext_sum_auto_adjust_desc" id="memory_prompt_interval_auto" tabindex="0">
                                <div class="fa-solid fa-wand-magic-sparkles"></div>
                            </div>
                        </label>
                        <input step="1" max="250" min="0" value="10" type="range" id="memory_prompt_interval">
                        <label class="title_restorable" for="memory_prompt_words_force">
                            <span>
                                <span data-i18n="ext_sum_update_every_words_1">Update every</span> <span id="memory_prompt_words_force_value">0</span><span data-i18n="ext_sum_update_every_words_2"> words</span>
                                <small data-i18n="ext_sum_0_disable" class="memory_disabled_hint">0 = disable</small>
                            </span>
                            <div class="right_menu_button interactable" title="Try to automatically adjust the interval based on the chat metrics." data-i18n="[title]ext_sum_auto_adjust_desc" id="memory_prompt_words_auto" tabindex="0">
                                <div class="fa-solid fa-wand-magic-sparkles"></div>
                            </div>
                        </label>
                        <input step="100" max="10000" min="0" value="0" type="range" id="memory_prompt_words_force">
                        <small data-i18n="ext_sum_both_sliders">If both sliders are non-zero, then both will trigger summary updates at their respective intervals.</small>
                        <hr>
                    </div>
                    <div class="memory_template">
                        <label data-i18n="ext_sum_injection_template" for="memory_template">Injection Template</label>
                        <textarea placeholder="{{summary}} will resolve to the current summary contents." data-i18n="[placeholder]ext_sum_memory_template_placeholder" rows="2" class="text_pole textarea_compact" id="memory_template"></textarea>
                    </div>
                    <label data-i18n="ext_sum_injection_position" for="memory_position">Injection Position</label>
                    <label title="Include the latest summary in the WI scan." data-i18n="[title]ext_sum_include_wi_scan_desc" for="memory_include_wi_scan" class="checkbox_label">
                        <input type="checkbox" id="memory_include_wi_scan">
                        <span data-i18n="ext_sum_include_wi_scan">Include in World Info Scanning</span>
                    </label>
                    <div class="radio_group">
                        <label>
                            <input value="-1" name="memory_position" type="radio">
                            <span data-i18n="None (not injected)">None (not injected)</span>
                            <i data-i18n="[title]ext_sum_injection_position_none" title="The summary will not be injected into the prompt. You can still access it via the {{summary}} macro." class="fa-solid fa-info-circle"></i>
                        </label>
                        <label>
                            <input value="2" name="memory_position" type="radio">
                            <span data-i18n="Before Main Prompt / Story String">Before Main Prompt / Story String</span>
                        </label>
                        <label>
                            <input value="0" name="memory_position" type="radio">
                            <span data-i18n="After Main Prompt / Story String">After Main Prompt / Story String</span>
                        </label>
                        <label data-i18n="[title]How many messages before the current end of the chat." title="How many messages before the current end of the chat." class="flex-container alignItemsCenter">
                            <input value="1" name="memory_position" type="radio">
                            <span data-i18n="In-chat @ Depth">In-chat @ Depth</span> <input max="999" min="0" type="number" class="text_pole widthUnset" id="memory_depth">
                            <span data-i18n="as">as</span>
                            <select class="text_pole widthNatural" id="memory_role">
                                <option data-i18n="System" value="0">System</option>
                                <option data-i18n="User" value="1">User</option>
                                <option data-i18n="Assistant" value="2">Assistant</option>
                            </select>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
                        <div id="hypebot_container" class="extension_container"></div>
                        <div id="regex_container" class="extension_container"><div class="regex_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="ext_regex_title">
                Regex
            </b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <div class="flex-container">
                <div title="New global regex script" data-i18n="[title]ext_regex_new_global_script_desc" class="menu_button menu_button_icon interactable" id="open_regex_editor" tabindex="0">
                    <i class="fa-solid fa-pen-to-square"></i>
                    <small data-i18n="ext_regex_new_global_script">+ Global</small>
                </div>
                <div title="New scoped regex script" data-i18n="[title]ext_regex_new_scoped_script_desc" class="menu_button menu_button_icon interactable" id="open_scoped_editor" tabindex="0">
                    <i class="fa-solid fa-address-card"></i>
                    <small data-i18n="ext_regex_new_scoped_script">+ Scoped</small>
                </div>
                <div class="menu_button menu_button_icon interactable" id="import_regex" tabindex="0">
                    <i class="fa-solid fa-file-import"></i>
                    <small data-i18n="ext_regex_import_script">Import</small>
                </div>
                <input multiple="" accept="*.json" hidden="" id="import_regex_file" type="file">
            </div>
            <hr>
            <div class="padding5" id="global_scripts_block">
                <div>
                    <strong data-i18n="ext_regex_global_scripts">Global Scripts</strong>
                </div>
                <small data-i18n="ext_regex_global_scripts_desc">
                    Available for all characters. Saved to local settings.
                </small>
                <div class="flex-container regex-script-container flexFlowColumn ui-sortable" id="saved_regex_scripts"></div>
            </div>
            <hr>
            <div class="padding5" id="scoped_scripts_block">
                <div class="flex-container alignItemsBaseline">
                    <strong data-i18n="ext_regex_scoped_scripts" class="flex1">Scoped Scripts</strong>
                    <label for="regex_scoped_toggle" class="checkbox flex-container" id="toggle_scoped_regex">
                        <input class="enable_scoped" id="regex_scoped_toggle" type="checkbox">
                        <span title="Disallow using scoped regex" data-i18n="[title]ext_regex_disallow_scoped" class="regex-toggle-on fa-solid fa-toggle-on fa-lg"></span>
                        <span title="Allow using scoped regex" data-i18n="[title]ext_regex_allow_scoped" class="regex-toggle-off fa-solid fa-toggle-off fa-lg"></span>
                    </label>
                </div>
                <small data-i18n="ext_regex_scoped_scripts_desc">
                    Only available for this character. Saved to the card data.
                </small>
                <div class="flex-container regex-script-container flexFlowColumn ui-sortable" id="saved_scoped_scripts"></div>
            </div>
        </div>
    </div>
</div></div>
                        <div id="vectors_container" class="extension_container"><div class="vectors_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b data-i18n="Vector Storage">Vector Storage</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <div class="flex-container flexFlowColumn">
                <label data-i18n="Vectorization Source" for="vectors_source">
                    Vectorization Source
                </label>
                <select class="text_pole" id="vectors_source">
                    <option value="cohere">Cohere</option>
                    <option value="extras">Extras</option>
                    <option value="palm">Google AI Studio</option>
                    <option value="llamacpp">llama.cpp</option>
                    <option data-i18n="Local (Transformers)" value="transformers">Local (Transformers)</option>
                    <option value="mistral">MistralAI</option>
                    <option value="nomicai">NomicAI</option>
                    <option value="ollama">Ollama</option>
                    <option value="openai">OpenAI</option>
                    <option value="togetherai">TogetherAI</option>
                    <option value="vllm">vLLM</option>
                </select>
            </div>
            <div id="ollama_vectorsModel" class="flex-container flexFlowColumn" style="display: none;">
                <label data-i18n="Vectorization Model" for="vectors_ollama_model">
                    Vectorization Model
                </label>
                <input placeholder="Model tag, e.g. llama3" type="text" class="text_pole" id="vectors_ollama_model">
                <label title="When checked, the model will not be unloaded after use." class="checkbox_label" for="vectors_ollama_keep">
                    <input type="checkbox" id="vectors_ollama_keep">
                    <span data-i18n="Keep model in memory">Keep model in memory</span>
                </label>
                <div>
                    The model must be downloaded first! Do it with the <code>ollama pull</code> command or <a id="vectors_ollama_pull" href="#" target="_blank" rel="noopener">click here</a>.
                </div>
                <i data-i18n="Hint: Set the URL in the API connection settings.">
                    Hint: Set the URL in the API connection settings.
                </i>
            </div>
            <div id="llamacpp_vectorsModel" class="flex-container flexFlowColumn" style="display: none;">
                <span data-i18n="The server MUST be started with the --embedding flag to use this feature!">
                    The server MUST be started with the <code>--embedding</code> flag to use this feature!
                </span>
                <i data-i18n="Hint: Set the URL in the API connection settings.">
                    Hint: Set the URL in the API connection settings.
                </i>
            </div>
            <div id="openai_vectorsModel" class="flex-container flexFlowColumn" style="display: none;">
                <label data-i18n="Vectorization Model" for="vectors_openai_model">
                    Vectorization Model
                </label>
                <select class="text_pole" id="vectors_openai_model">
                    <option value="text-embedding-ada-002">text-embedding-ada-002</option>
                    <option value="text-embedding-3-small">text-embedding-3-small</option>
                    <option value="text-embedding-3-large">text-embedding-3-large</option>
                </select>
            </div>
            <div id="cohere_vectorsModel" class="flex-container flexFlowColumn" style="display: none;">
                <label data-i18n="Vectorization Model" for="vectors_cohere_model">
                    Vectorization Model
                </label>
                <select class="text_pole" id="vectors_cohere_model">
                    <option value="embed-english-v3.0">embed-english-v3.0</option>
                    <option value="embed-multilingual-v3.0">embed-multilingual-v3.0</option>
                    <option value="embed-english-light-v3.0">embed-english-light-v3.0</option>
                    <option value="embed-multilingual-light-v3.0">embed-multilingual-light-v3.0</option>
                    <option value="embed-english-v2.0">embed-english-v2.0</option>
                    <option value="embed-english-light-v2.0">embed-english-light-v2.0</option>
                    <option value="embed-multilingual-v2.0">embed-multilingual-v2.0</option>
                </select>
            </div>
            <div id="together_vectorsModel" class="flex-container flexFlowColumn" style="display: none;">
                <label data-i18n="Vectorization Model" for="vectors_togetherai_model">
                    Vectorization Model
                </label>
                <select class="text_pole" id="vectors_togetherai_model">
                    <option value="togethercomputer/m2-bert-80M-32k-retrieval">M2-BERT-Retrieval-32k</option>
                    <option value="togethercomputer/m2-bert-80M-8k-retrieval">M2-BERT-Retrieval-8k</option>
                    <option value="togethercomputer/m2-bert-80M-2k-retrieval">M2-BERT-Retrieval-2K</option>
                    <option value="WhereIsAI/UAE-Large-V1">UAE-Large-V1</option>
                    <option value="BAAI/bge-large-en-v1.5">BAAI-Bge-Large-1p5</option>
                    <option value="BAAI/bge-base-en-v1.5">BAAI-Bge-Base-1p5</option>
                    <option value="sentence-transformers/msmarco-bert-base-dot-v5">Sentence-BERT</option>
                    <option value="bert-base-uncased">Bert Base Uncased</option>
                </select>
            </div>
            <div id="vllm_vectorsModel" class="flex-container flexFlowColumn" style="display: none;">
                <label data-i18n="Vectorization Model" for="vectors_vllm_model">
                    Vectorization Model
                </label>
                <input placeholder="Model name, e.g. intfloat/e5-mistral-7b-instruct" type="text" class="text_pole" id="vectors_vllm_model">
                <i data-i18n="Hint: Set the URL in the API connection settings.">
                    Hint: Set the URL in the API connection settings.
                </i>
            </div>

            <div id="nomicai_apiKey" class="flex-container alignItemsCenter" style="display: none;">
                <label class="flex1" for="api_key_nomicai">
                    <span data-i18n="NomicAI API Key">NomicAI API Key</span>
                </label>
                <div class="menu_button menu_button_icon interactable" id="api_key_nomicai" tabindex="0">
                    <i class="fa-solid fa-key"></i>
                    <span data-i18n="Click to set">Click to set</span>
                </div>
            </div>

            <div class="flex-container marginTopBot5">
                <div title="How many last messages will be matched for relevance." class="flex-container flex1 flexFlowColumn">
                    <label for="vectors_query">
                        <small data-i18n="Query messages">Query messages</small>
                    </label>
                    <input max="99" min="1" class="text_pole" id="vectors_query" type="number">
                </div>
                <div title="Cut-off score for relevance. Helps to filter out irrelevant data." class="flex-container flex1 flexFlowColumn">
                    <label for="vectors_query">
                        <small data-i18n="Score threshold">Score threshold</small>
                    </label>
                    <input step="0.05" max="1" min="0" class="text_pole" id="vectors_score_threshold" type="number">
                </div>
                <div title="Prioritize chunking on the preferred delimiter." class="flex-container flex1 flexFlowColumn">
                    <label for="vectors_force_chunk_delimiter">
                        <small data-i18n="Chunk boundary">Chunk boundary</small>
                    </label>
                    <textarea placeholder="(None)" rows="1" class="text_pole" id="vectors_force_chunk_delimiter"></textarea>
                </div>
            </div>

            <div class="flex-container">
                <label title="Query results can activate World Info entries." for="vectors_include_wi" class="checkbox_label expander">
                    <input class="checkbox" type="checkbox" id="vectors_include_wi">
                    <span data-i18n="Include in World Info Scanning">Include in World Info Scanning</span>
                </label>
            </div>

            <hr>

            <h4 data-i18n="World Info settings">
                World Info settings
            </h4>

            <label title="Enable activation of World Info entries based on vector similarity." for="vectors_enabled_world_info" class="checkbox_label">
                <input class="checkbox" type="checkbox" id="vectors_enabled_world_info">
                <span data-i18n="Enable for World Info">Enable for World Info</span>
            </label>

            <div class="marginTopBot5" id="vectors_world_info_settings" style="display: none;">
                <div class="flex-container">
                    <label class="checkbox_label" for="vectors_enabled_for_all">
                        <input type="checkbox" id="vectors_enabled_for_all">
                        <span data-i18n="Enabled for all entries">Enabled for all entries</span>
                    </label>
                    <ul class="margin0">
                        <li>
                            <small data-i18n="Checked: all entries except ❌ status can be activated.">Checked: all entries except ❌ status can be activated.</small>
                        </li>
                        <li>
                            <small data-i18n="Unchecked: only entries with ❌ status can be activated.">Unchecked: only entries with 🔗 status can be activated.</small>
                        </li>
                    </ul>
                </div>
                <div class="flex-container">
                    <div class="flex1">
                        
                    </div>
                    <div title="Maximum number of entries to be activated" class="flex1">
                        <label for="vectors_max_entries">
                            <small data-i18n="Max Entries">Max Entries</small>
                        </label>
                        <input max="9999" min="1" class="text_pole widthUnset" type="number" id="vectors_max_entries">
                    </div>
                    <div class="flex1">
                        
                    </div>
                </div>
            </div>

            <h4 data-i18n="File vectorization settings">
                File vectorization settings
            </h4>

            <label for="vectors_enabled_files" class="checkbox_label">
                <input class="checkbox" type="checkbox" id="vectors_enabled_files">
                <span data-i18n="Enable for files">Enable for files</span>
            </label>

            <div class="marginTopBot5" id="vectors_files_settings" style="display: none;">
                <label title="This can help with retrieval accuracy if using embedding models that are trained on English data. Uses the selected API from Chat Translation extension settings." for="vectors_translate_files" class="checkbox_label">
                    <input class="checkbox" type="checkbox" id="vectors_translate_files">
                    <span data-i18n="Translate files into English before processing">
                        Translate files into English before processing
                    </span>
                    <i title="Experimental feature" class="fa-solid fa-flask"></i>
                </label>
                <div title="These settings apply to files attached directly to messages." class="flex justifyCenter">
                    <span data-i18n="Message attachments">Message attachments</span>
                </div>
                <div class="flex-container">
                    <div title="Only files past this size will be vectorized." class="flex1">
                        <label for="vectors_size_threshold">
                            <small data-i18n="Size threshold (KB)">Size threshold (KB)</small>
                        </label>
                        <input max="99999" min="1" class="text_pole" type="number" id="vectors_size_threshold">
                    </div>
                    <div title="Chunk size for file splitting." class="flex1">
                        <label for="vectors_chunk_size">
                            <small data-i18n="Chunk size (chars)">Chunk size (chars)</small>
                        </label>
                        <input max="99999" min="1" class="text_pole" type="number" id="vectors_chunk_size">
                    </div>
                    <div title="The overlap between adjacent chunks in % from chunk size. The overlap text is trimmed to sentence boundaries. 0 = disabled." class="flex1">
                        <label for="vectors_overlap_percent">
                            <small data-i18n="Chunk overlap (%)">Chunk overlap (%)</small>
                        </label>
                        <input step="1" max="99" min="0" class="text_pole" type="number" id="vectors_overlap_percent">
                    </div>
                    <div title="How many chunks to retrieve when querying." class="flex1">
                        <label for="vectors_chunk_count">
                            <small data-i18n="Retrieve chunks">Retrieve chunks</small>
                        </label>
                        <input max="99999" min="1" class="text_pole" type="number" id="vectors_chunk_count">
                    </div>
                </div>
                <div title="These settings apply to files stored in the Data Bank." class="flex justifyCenter">
                    <span data-i18n="Data Bank files">Data Bank files</span>
                </div>
                <div class="flex-container">
                    <div title="Only files past this size will be vectorized." class="flex1">
                        <label for="vectors_size_threshold_db">
                            <small data-i18n="Size threshold (KB)">Size threshold (KB)</small>
                        </label>
                        <input max="99999" min="1" class="text_pole" type="number" id="vectors_size_threshold_db">
                    </div>
                    <div title="Chunk size for file splitting." class="flex1">
                        <label for="vectors_chunk_size_db">
                            <small data-i18n="Chunk size (chars)">Chunk size (chars)</small>
                        </label>
                        <input max="99999" min="1" class="text_pole" type="number" id="vectors_chunk_size_db">
                    </div>
                    <div title="The overlap between adjacent chunks in % from chunk size. The overlap text is trimmed to sentence boundaries. 0 = disabled." class="flex1">
                        <label for="vectors_overlap_percent_db">
                            <small data-i18n="Chunk overlap (%)">Chunk overlap (%)</small>
                        </label>
                        <input step="1" max="99" min="0" class="text_pole" type="number" id="vectors_overlap_percent_db">
                    </div>
                    <div title="How many chunks to retrieve when querying." class="flex1">
                        <label for="vectors_chunk_count_db">
                            <small data-i18n="Retrieve chunks">Retrieve chunks</small>
                        </label>
                        <input max="99999" min="1" class="text_pole" type="number" id="vectors_chunk_count_db">
                    </div>
                </div>
                <div class="flex-container flexFlowColumn">
                    <label for="vectors_file_template_db">
                        <span data-i18n="Injection Template">Injection Template</span>
                    </label>
                    <textarea placeholder="Use {{text}} macro to specify the position of retrieved text." rows="3" class="margin0 text_pole textarea_compact" id="vectors_file_template_db"></textarea>
                    <label data-i18n="Injection Position" for="vectors_file_position_db">Injection Position</label>
                    <div class="radio_group">
                        <label>
                            <input value="2" name="vectors_file_position_db" type="radio">
                            <span data-i18n="Before Main Prompt / Story String">Before Main Prompt / Story String</span>
                        </label>
                        
                        <label>
                            <input value="0" name="vectors_file_position_db" type="radio">
                            <span data-i18n="After Main Prompt / Story String">After Main Prompt / Story String</span>
                        </label>
                        <label data-i18n="[title]How many messages before the current end of the chat." title="How many messages before the current end of the chat." for="vectors_file_depth_db">
                            <input value="1" name="vectors_file_position_db" type="radio">
                            <span data-i18n="In-chat @ Depth">In-chat @ Depth</span>
                            <input max="999" min="0" type="number" class="text_pole widthUnset" id="vectors_file_depth_db">
                            <span>as</span>
                            <select class="text_pole widthNatural" id="vectors_file_depth_role_db">
                                <option data-i18n="System" value="0">System</option>
                                <option data-i18n="User" value="1">User</option>
                                <option data-i18n="Assistant" value="2">Assistant</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="flex-container">
                    <div title="Vectorize all files in the Data Bank and current chat." class="menu_button menu_button_icon interactable" id="vectors_files_vectorize_all" tabindex="0">
                        <span data-i18n="Vectorize All">Vectorize All</span>
                    </div>
                    <div title="Purge all file vectors in the Data Bank and current chat." class="menu_button menu_button_icon interactable" id="vectors_files_purge" tabindex="0">
                        <span data-i18n="Purge Vectors">Purge Vectors</span>
                    </div>
                </div>
            </div>

            <hr>

            <h4 data-i18n="Chat vectorization settings">
                Chat vectorization settings
            </h4>
            <label for="vectors_enabled_chats" class="checkbox_label">
                <input class="checkbox" type="checkbox" id="vectors_enabled_chats">
                <span data-i18n="Enabled for chat messages">Enabled for chat messages</span>
            </label>

            <hr>

            <div id="vectors_chats_settings" style="display: none;">
                <div id="vectors_advanced_settings">
                    <label data-i18n="Injection Template" for="vectors_template">
                        Injection Template
                    </label>
                    <textarea placeholder="Use {{text}} macro to specify the position of retrieved text." rows="3" class="text_pole textarea_compact" id="vectors_template"></textarea>
                    <label data-i18n="Injection Position" for="vectors_position">Injection Position</label>
                    <div class="radio_group">
                        <label>
                            <input value="2" name="vectors_position" type="radio">
                            <span data-i18n="Before Main Prompt / Story String">Before Main Prompt / Story String</span>
                        </label>
                        
                        <label>
                            <input value="0" name="vectors_position" type="radio">
                            <span data-i18n="After Main Prompt / Story String">After Main Prompt / Story String</span>
                        </label>
                        <label data-i18n="[title]How many messages before the current end of the chat." title="How many messages before the current end of the chat." for="vectors_depth">
                            <input value="1" name="vectors_position" type="radio">
                            <span data-i18n="In-chat @ Depth">In-chat @ Depth </span>
                            <input max="999" min="0" type="number" class="text_pole widthUnset" id="vectors_depth">
                        </label>
                    </div>
                    <div class="flex-container">
                        <div title="Can increase the retrieval quality for the cost of processing. 0 = disabled." class="flex1">
                            <label for="vectors_message_chunk_size">
                                <small data-i18n="Chunk size (chars)">Chunk size (chars)</small>
                            </label>
                            <input max="9999" min="0" class="text_pole widthUnset" type="number" id="vectors_message_chunk_size">
                        </div>
                        <div title="Prevents last N messages from being placed out of order." class="flex1">
                            <label for="vectors_protect">
                                <small data-i18n="Retain#">Retain#</small>
                            </label>
                            <input max="9999" min="1" class="text_pole widthUnset" id="vectors_protect" type="number">
                        </div>
                        <div title="How many past messages to insert as memories." class="flex1">
                            <label for="vectors_insert">
                                <small data-i18n="Insert#">Insert#</small>
                            </label>
                            <input max="9999" min="1" class="text_pole widthUnset" id="vectors_insert" type="number">
                        </div>
                    </div>
                    <hr class="m-b-1">
                    <div class="flex-container flexFlowColumn">
                        <div class="flex-container alignitemscenter justifyCenter">
                            <i title="Summarization for vectors is an experimental feature that may improve vectors or may worsen them. Use at your own discretion." class="fa-solid fa-flask"></i>
                            <span data-i18n="Vector Summarization">Vector Summarization</span>
                        </div>
                        <label title="Summarize chat messages before generating embeddings." for="vectors_summarize" class="checkbox_label expander">
                            <input class="checkbox" type="checkbox" id="vectors_summarize">
                            <span data-i18n="Summarize chat messages for vector generation">Summarize chat messages for vector generation</span>
                        </label>
                        <i data-i18n="Warning: This will slow down vector generation drastically, as all messages have to be summarized first." class="failure">Warning: This will slow down vector generation drastically, as all messages have to be summarized first.</i>

                        <label title="Summarize sent chat messages before generating embeddings." for="vectors_summarize_user" class="checkbox_label expander">
                            <input class="checkbox" type="checkbox" id="vectors_summarize_user">
                            <span data-i18n="Summarize chat messages when sending">Summarize chat messages when sending</span>
                        </label>
                        <i data-i18n="Warning: This might cause your sent messages to take a bit to process and slow down response time." class="failure">Warning: This might cause your sent messages to take a bit to process and slow down response time.</i>

                        <label title="Summarize with:" for="vectors_summary_source">Summarize with:</label>
                        <select class="text_pole" id="vectors_summary_source">
                            <option data-i18n="Main API" value="main">Main API</option>
                            <option data-i18n="Extras API" value="extras">Extras API</option>
                            <option data-i18n="WebLLM Extension" value="webllm">WebLLM Extension</option>
                        </select>

                        <label title="Summary Prompt:" for="vectors_summary_prompt">Summary Prompt:</label>
                        <small data-i18n="Only used when Main API or WebLLM Extension is selected.">Only used when Main API or WebLLM Extension is selected.</small>
                        <textarea placeholder="This prompt will be sent to AI to request the summary generation." rows="6" class="text_pole textarea_compact" id="vectors_summary_prompt"></textarea>
                    </div>
                </div>
                <small data-i18n="Old messages are vectorized gradually as you chat. To process all previous messages, click the button below.">
                    Old messages are vectorized gradually as you chat.
                    To process all previous messages, click the button below.
                </small>
                <div class="flex-container">
                    <div data-i18n="Vectorize All" class="menu_button menu_button_icon interactable" id="vectors_vectorize_all" tabindex="0">
                        Vectorize All
                    </div>
                    <div data-i18n="Purge Vectors" class="menu_button menu_button_icon interactable" id="vectors_purge" tabindex="0">
                        Purge Vectors
                    </div>
                    <div data-i18n="View Stats" class="menu_button menu_button_icon interactable" id="vectors_view_stats" tabindex="0">
                        View Stats
                    </div>
                </div>
                <div style="display: none;" id="vectorize_progress">
                    <small>
                        Processed <span id="vectorize_progress_percent">0</span>% of messages.
                        ETA: <span id="vectorize_progress_eta">...</span> seconds.
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
                        <div id="randomizer_container" class="extension_container"></div>
                        <div id="chromadb_container" class="extension_container"></div>
                    </div>
                    <hr class="wide100p margin0">
                    <div class="alignitemscenter flex-container justifyCenter wide100p" style="justify-content: space-between;">
                        <h4 class="margin0"><span data-i18n="Extras API:">Extras API:</span></h4>
                        <div class="flex-container">
                            <div id="extensions_status" data-i18n="Not connected...">Not connected...</div>
                            <label for="extensions_autoconnect" class="checkbox_label flexNoGap">
                                <input id="extensions_autoconnect" type="checkbox">
                                <span data-i18n="Auto-connect">Auto-connect</span>
                            </label>
                        </div>
                    </div>
                    <div class="alignitemsflexstart flex-container wide100p">
                        <input id="extensions_url" type="text" class="flex1 heightFitContent text_pole widthNatural" data-i18n="[placeholder]Extras API URL" placeholder="Extras API URL">
                        <input id="extensions_api_key" type="text" class="flex1 heightFitContent text_pole widthNatural" data-i18n="[placeholder]Extras API key (optional)" placeholder="Extras API key (optional)">
                        <div class="extensions_url_block">
                            <div id="extensions_connect" class="menu_button interactable" data-i18n="Connect" tabindex="0">Connect</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="persona-management-button" class="drawer">
            <div class="drawer-toggle">
                <div class="drawer-icon fa-solid fa-face-smile fa-fw closedIcon interactable" title="Persona Management" data-i18n="[title]Persona Management" tabindex="0"></div>
            </div>
            <div class="drawer-content closedDrawer">
                <div class="flex-container wide100p alignitemscenter spaceBetween flexNoGap">
                    <div class="flex-container alignItemsBaseline wide100p">
                        <div class="flex1 flex-container alignItemsBaseline">
                            <h3 class="margin0">
                                <span data-i18n="Persona Management">Persona Management</span>
                                <a href="https://docs.sillytavern.app/usage/core-concepts/personas/" target="_blank">
                                    <span class="fa-solid fa-circle-question note-link-span"></span>
                                </a>
                            </h3>
                        </div>
                        <div class="flex-container">
                            <div class="menu_button menu_button_icon user_stats_button interactable" data-i18n="[title]Click for stats!" title="Click for stats!" tabindex="0">
                                <i class="fa-solid fa-ranking-star"></i>
                                <span data-i18n="Usage Stats">Usage Stats</span>
                            </div>
                            <div id="personas_backup" class="menu_button menu_button_icon interactable" data-i18n="[title]Backup your personas to a file" title="Backup your personas to a file" tabindex="0">
                                <i class="fa-solid fa-file-export"></i>
                                <span data-i18n="Backup">Backup</span>
                            </div>
                            <div id="personas_restore" class="menu_button menu_button_icon interactable" data-i18n="[title]Restore your personas from a file" title="Restore your personas from a file" tabindex="0">
                                <i class="fa-solid fa-file-import"></i>
                                <span data-i18n="Restore">Restore</span>
                            </div>
                            <input id="personas_restore_input" type="file" accept=".json" hidden="">
                        </div>
                    </div>
                    <div id="persona-management-block" class="flex-container wide100p flexGap10">
                        <div class="flex1 overflowHidden wide100p">
                            <div class="flex-container marginBot10 alignitemscenter">
                                <div id="create_dummy_persona" class="menu_button menu_button_icon interactable" title="Create a dummy persona" data-i18n="[title]Create a dummy persona" tabindex="0">
                                    <i class="fa-solid fa-person-circle-question fa-fw"></i>
                                    <div data-i18n="Create">Create</div>
                                </div>
                                <input id="persona_search_bar" class="text_pole width100p flex1 margin0" type="search" data-i18n="[placeholder]Search..." placeholder="Search...">
                                <select id="persona_sort_order" class="margin0">
                                    <option value="search" data-i18n="Search" hidden="hidden">Search</option>
                                    <option value="asc">A-Z</option>
                                    <option value="desc">Z-A</option>
                                </select>
                                <div id="persona_pagination_container" class="flex1"><div class="paginationjs"><div class="paginationjs-nav J-paginationjs-nav">1-1 of 1</div><div class="paginationjs-pages"><ul><li class="paginationjs-prev disabled "><a class="interactable" data-original-tabindex="null">&lt;</a></li><li class="paginationjs-next disabled "><a class="interactable" data-original-tabindex="null">&gt;</a></li></ul></div><div class="paginationjs-size-changer"><select class="J-paginationjs-size-select"><option value="5" selected="">5 / page</option><option value="10">10 / page</option><option value="25">25 / page</option><option value="50">50 / page</option><option value="100">100 / page</option><option value="250">250 / page</option><option value="500">500 / page</option><option value="1000">1000 / page</option></select></div></div></div>
                                <i id="persona_grid_toggle" class="fa-solid fa-table-cells-large menu_button interactable" data-i18n="[title]Toggle grid view" title="Toggle grid view" tabindex="0"></i>
                            </div>
                            <div id="user_avatar_block" data-i18n="[no_desc_text]No persona description" no_desc_text="[No description]"><div class="avatar-container interactable selected" tabindex="0" imgfile="user-default.png">
                <div imgfile="user-default.png" class="avatar" title="user-default.png">
                    <img src="User Avatars/user-default.png?t=1735373073126" alt="User Avatar">
                </div>
                <div class="flex-container wide100pLess70px character_select_container">
                    <div class="wide100p character_name_block">
                        <span class="ch_name flex1">User</span>
                        <div class="avatar-buttons">
                            <button class="menu_button bind_user_name interactable" title="Bind user name to that avatar" data-i18n="[title]Bind user name to that avatar" tabindex="0">
                                <i class="fa-fw fa-solid fa-user-edit fa-sm"></i>
                            </button>
                            <button class="menu_button set_persona_image interactable" title="Change persona image" data-i18n="[title]Change persona image" tabindex="0">
                                <i class="fa-fw fa-solid fa-image fa-sm"></i>
                            </button>
                            <button class="menu_button set_default_persona interactable" title="Select this as default persona for the new chats." data-i18n="[title]Select this as default persona for the new chats." tabindex="0">
                                <i class="fa-fw fa-solid fa-crown fa-sm"></i>
                            </button>
                            <button class="menu_button duplicate_persona interactable" title="Duplicate persona" data-i18n="[title]Duplicate persona" tabindex="0">
                                <i class="fa-fw fa-solid fa-clone fa-sm"></i>
                            </button>
                            <button class="menu_button delete_avatar interactable" title="Delete persona" data-i18n="[title]Delete persona" tabindex="0">
                                <i class="fa-fw fa-solid fa-trash-alt fa-sm"></i>
                            </button>
                        </div>
                    </div>
                    <div class="ch_description text_muted">[No description]</div>
                </div>
            </div></div>
                            <form id="form_upload_avatar" action="javascript:void(null);" method="post" enctype="multipart/form-data">
                                <input type="file" id="avatar_upload_file" accept="image/*" name="avatar">
                                <input type="hidden" id="avatar_upload_overwrite" name="overwrite_name" value="">
                            </form>
                        </div>
                        <div class="flex1">
                            <h4 data-i18n="Name">Name</h4>
                            <div class="change_name">
                                <input id="your_name" name="your_name" data-i18n="[placeholder]Enter your name" placeholder="Enter your name" class="text_pole wide100p" value="" autocomplete="off">
                                <div id="your_name_button" class="menu_button fa-solid fa-check interactable" title="Click to set a new User Name" data-i18n="[title]Click to set a new User Name" tabindex="0">
                                </div>
                                <div id="lock_user_name" class="menu_button fa-solid fa-unlock interactable" title="Click to lock your selected persona to the current chat. Click again to remove the lock." data-i18n="[title]Click to lock your selected persona to the current chat. Click again to remove the lock." tabindex="0">
                                </div>
                                <div id="sync_name_button" class="menu_button fa-solid fa-sync interactable" title="Click to set user name for all messages" data-i18n="[title]Click to set user name for all messages" tabindex="0">
                                </div>
                                <div id="persona_lore_button" class="menu_button fa-solid fa-globe interactable" title="Persona Lore
Alt+Click to open the lorebook" data-i18n="[title]Persona Lore Alt+Click to open the lorebook" tabindex="0">
                                </div>
                            </div>
                            <div>
                                <h4 data-i18n="Persona Description">Persona Description</h4>
                                <textarea id="persona_description" name="persona_description" data-i18n="[placeholder]Example: [{{user}} is a 28-year-old Romanian cat girl.]" placeholder="Example:
[{{user}} is a 28-year-old Romanian cat girl.]" class="text_pole textarea_compact" value="" autocomplete="off" rows="8"></textarea>
                                <div class="extension_token_counter">
                                    <span data-i18n="Tokens persona description">Tokens</span>: <span id="persona_description_token_count">0</span>
                                </div>
                                <div>
                                    <label for="persona_description_position" data-i18n="Position:">Position:</label>
                                    <select id="persona_description_position">
                                        <option value="9" data-i18n="None (disabled)">None (disabled)</option>
                                        <option value="0" data-i18n="In Story String / Prompt Manager" selected="selected">In Story String / Prompt Manager</option>
                                        <option value="2" data-i18n="Top of Author's Note">Top of Author's Note</option>
                                        <option value="3" data-i18n="Bottom of Author's Note">Bottom of Author's Note</option>
                                        <option value="4" data-i18n="In-chat @ Depth">In-chat @ Depth</option>
                                    </select>
                                    <div id="persona_depth_position_settings" class="flex-container" style="display: none;">
                                        <div class="flex1">
                                            <label for="persona_depth_value" data-i18n="Depth:">Depth:</label>
                                            <input id="persona_depth_value" class="text_pole" type="number" min="0" max="999" step="1">
                                        </div>
                                        <div class="flex1">
                                            <label for="persona_depth_role" data-i18n="Role:">Role:</label>
                                            <select id="persona_depth_role" class="text_pole">
                                                <option data-i18n="System" value="0">System</option>
                                                <option data-i18n="User" value="1">User</option>
                                                <option data-i18n="Assistant" value="2">Assistant</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="range-block">
                                <label for="persona_show_notifications" class="checkbox_label">
                                    <input id="persona_show_notifications" type="checkbox">
                                    <span data-i18n="Show notifications on switching personas">
                                        Show notifications on switching personas
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="rightNavHolder" class="drawer">
            <div id="unimportantYes" class="drawer-toggle drawer-header">
                <div id="rightNavDrawerIcon" class="drawer-icon fa-solid fa-address-card fa-fw interactable drawerPinnedOpen openIcon" title="Character Management" data-i18n="[title]Character Management" tabindex="0">
                </div>
            </div>
            <nav id="right-nav-panel" class="drawer-content fillRight pinnedOpen openDrawer" data-slide-toggle="shown" style="display: flex;">
                <div id="right-nav-panelheader" class="fa-solid fa-grip drag-grabber">
                </div>
                <div id="CharListButtonAndHotSwaps" class="flex-container flexnowrap">
                    <div class="flexFlowColumn flex-container">
                        <div id="rm_button_panel_pin_div" class="alignitemsflexstart" title="Locked = Character Management panel will stay open" data-i18n="[title]Locked = Character Management panel will stay open">
                            <input type="checkbox" id="rm_button_panel_pin">
                            <label for="rm_button_panel_pin">
                                <div class="fa-solid unchecked fa-unlock right_menu_button interactable" alt="" tabindex="0"></div>
                                <div class="fa-solid checked fa-lock right_menu_button interactable" alt="" tabindex="0"></div>
                            </label>
                        </div>
                        <div class="right_menu_button fa-solid fa-list-ul interactable" id="rm_button_characters" title="Select/Create Characters" data-i18n="[title]Select/Create Characters" tabindex="0"></div>
                    </div>
                    <div id="HotSwapWrapper" class="alignitemscenter flex-container margin0auto wide100p">
                        <div class="hotswap avatars_inline flex-container scroll-reset-container expander" data-i18n="[no_favs]Favorite characters to add them to HotSwaps" no_favs="Favorite characters to add them to HotSwaps"><small><span><i class="fa-solid fa-star"></i>&nbsp;Favorite characters to add them to HotSwaps</span></small></div>
                    </div>
                </div>
                <hr>
                <!-- this div structure must be preserved until group peeking can adjust -->
                <div id="rm_PinAndTabs">
                    <div id="right-nav-panel-tabs" class="">
                        <div id="rm_button_selected_ch">
                            <h2 class="interactable" tabindex="0"></h2>
                        </div>
                        <div id="result_info" class="flex-container" style="display: none;">
                            <div id="result_info_text" title="Token counts may be inaccurate and provided just for reference." data-i18n="[title]Token counts may be inaccurate and provided just for reference.">
                                <div>
                                    <strong id="result_info_total_tokens" title="Total tokens" data-i18n="[title]Total tokens">0</strong>&nbsp;<span data-i18n="Tokens">Tokens</span>
                                </div>
                                <div>
                                    <small title="Permanent tokens" data-i18n="[title]Permanent tokens">
                                        (<span id="result_info_permanent_tokens">0</span>&nbsp;<span data-i18n="Permanent">Permanent</span>)
                                    </small>
                                </div>
                            </div>
                            <a id="chartokenwarning" class="right_menu_button fa-solid fa-triangle-exclamation interactable" href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#character-tokens" target="_blank" title="About Token 'Limits'" data-i18n="[title]About Token 'Limits'" style="display: none;" tabindex="0"></a>
                            <i title="Click for stats!" data-i18n="[title]Click for stats!" class="fa-solid fa-ranking-star right_menu_button rm_stats_button interactable" tabindex="0"></i>
                            <i title="Toggle character info panel" data-i18n="[title]Toggle character info panel" id="hideCharPanelAvatarButton" class="fa-solid fa-eye right_menu_button interactable" tabindex="0"></i>
                        </div>
                    </div>
                </div>
                <!-- end group peeking cope structure-->
                <div name="Solo Char Create/Edit Panel" id="rm_ch_create_block" class="right_menu flex-container flexFlowColumn" style="display: none;">
                    <form id="form_create" action="javascript:void(null);" method="post" enctype="multipart/form-data">
                        <div id="avatar-and-name-block">
                            <div id="name_div">
                                <input id="character_name_pole" name="ch_name" class="text_pole" data-i18n="[placeholder]Name this character" placeholder="Name this character" value="" autocomplete="off">
                                <div class="extension_token_counter">
                                    <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="character_name_pole" data-token-permanent="true">0</span>
                                </div>
                            </div>
                            <div class="flex-container flexFlowColumn expander flexNoGap">
                                <div id="avatar_div" class="avatar_div alignitemsflexstart justifySpaceBetween flexnowrap">
                                    <label id="avatar_div_div" class="add_avatar avatar" for="add_avatar_button" title="Click to select a new avatar for this character" data-i18n="[title]Click to select a new avatar for this character">
                                        <img id="avatar_load_preview" src="img/ai4.png" alt="avatar">
                                        <input hidden="" type="file" id="add_avatar_button" name="avatar" accept="image/*">
                                    </label>
                                    <div class="flex-container" id="avatar_controls">
                                        <div class="form_create_bottom_buttons_block">
                                            <div id="rm_button_back" class="menu_button fa-solid fa-left-long interactable" tabindex="0"></div>
                                            <!-- <div id="renameCharButton" class="menu_button fa-solid fa-user-pen" title="Rename Character"></div> -->
                                            <div id="favorite_button" class="menu_button fa-solid fa-star interactable" title="Add to Favorites" data-i18n="[title]Add to Favorites" tabindex="0"></div>
                                            <input type="hidden" id="fav_checkbox" name="fav">
                                            <div id="advanced_div" class="menu_button fa-solid fa-book interactable" title="Advanced Definitions" data-i18n="[title]Advanced Definition" tabindex="0"></div>
                                            <div id="world_button" class="menu_button fa-solid fa-globe interactable" title="Character Lore

Click to load
Shift-click to open 'Link to World Info' popup" data-i18n="[title]world_button_title" tabindex="0"></div>
                                            <div class="chat_lorebook_button menu_button fa-solid fa-passport interactable" title="Chat Lore
Alt+Click to open the lorebook" data-i18n="[title]Chat Lore Alt+Click to open the lorebook" tabindex="0"></div>
                                            <div id="export_button" class="menu_button fa-solid fa-file-export interactable" title="Export and Download" data-i18n="[title]Export and Download" tabindex="0"></div>
                                            <!-- <div id="set_chat_scenario" class="menu_button fa-solid fa-scroll" title="Set a chat scenario override"></div> -->
                                            <!-- <div id="set_character_world" class="menu_button fa-solid fa-globe" title="Set a character World Info / Lorebook"></div> -->
                                            <div id="dupe_button" class="menu_button fa-solid fa-clone interactable" title="Duplicate Character" data-i18n="[title]Duplicate Character" tabindex="0"></div>
                                            <label for="create_button" id="create_button_label" class="menu_button fa-solid fa-user-check interactable" title="Create Character" data-i18n="[title]Create Character" tabindex="0">
                                                <input type="submit" id="create_button" name="create_button">
                                            </label>
                                            <div id="delete_button" class="menu_button fa-solid fa-skull interactable" title="Delete Character" data-i18n="[title]Delete Character" tabindex="0"></div>
                                        </div>
                                        <label class="flex1 height100p" for="char-management-dropdown">
                                            <select id="char-management-dropdown" class="text_pole">
                                                <option value="default" disabled="" selected="" data-i18n="More...">More...</option>
                                                <option id="set_character_world" data-i18n="Link to World Info">
                                                    Link to World Info
                                                </option>
                                                <option id="import_character_info" data-i18n="Import Card Lore">
                                                    Import Card Lore
                                                </option>
                                                <option id="set_chat_scenario" data-i18n="Scenario Override">
                                                    Scenario Override
                                                </option>
                                                <option id="convert_to_persona" data-i18n="Convert to Persona">
                                                    Convert to Persona
                                                </option>
                                                <option id="renameCharButton" data-i18n="Rename">
                                                    Rename
                                                </option>
                                                <option id="character_source" data-i18n="Link to Source">
                                                    Link to Source
                                                </option>
                                                <option id="replace_update" data-i18n="Replace / Update">
                                                    Replace / Update
                                                </option>
                                                <option id="import_tags" data-i18n="Import Tags">
                                                    Import Tags
                                                </option>
                                                <!--<option id="dupe_button">
                                                        Duplicate
                                                    </option>
                                                    <option id="export_button">
                                                        Export
                                                    </option>
                                                    <option id="delete_button">
                                                        Delete
                                                    </option>-->
                                            <option id="show_char_gallery">Show Gallery</option></select>
                                        </label>
                                    </div>
                                </div>
                                <div id="tags_div">
                                    <div class="tag_controls">
                                        <input id="tagInput" class="text_pole textarea_compact tag_input wide100p margin0 ui-autocomplete-input" data-i18n="[placeholder]Search / Create Tags" placeholder="Search / Create tags" autocomplete="off">
                                        <div class="tags_view menu_button fa-solid fa-tags interactable" title="View all tags" data-i18n="[title]View all tags" tabindex="0"></div>
                                    </div>
                                    <div id="tagList" class="tags"></div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div id="spoiler_free_desc" class="flex-container flexFlowColumn flexNoGap">
                            <div id="creators_notes_div" class="title_restorable">
                                <span data-i18n="Creator's Notes">Creator's Notes</span>
                                <div id="spoiler_free_desc_button" class="margin0 menu_button fa-solid fa-eye interactable" title="Show / Hide Description and First Message" data-i18n="[title]Show / Hide Description and First Message" tabindex="0"></div>
                            </div>
                            <div id="creator_notes_spoiler" class="flex1" style="display: none;"></div>
                            <!-- A button to show / hide description_div and description_textarea and first_message_div and firstmessage_textarea-->
                        </div>
                        <div id="descriptionWrapper" class="flex-container flexFlowColumn flex1">
                            <hr>
                            <div id="description_div" class="title_restorable">
                                <div class="flex-container alignitemscenter">
                                    <span data-i18n="Character Description" class="mdhotkey_location">Description</span>
                                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="description_textarea" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                    <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#character-description" class="notes-link" target="_blank">
                                        <span class="fa-solid fa-circle-question note-link-span"></span>
                                    </a>
                                </div>
                                <div id="character_open_media_overrides" class="menu_button menu_button_icon open_media_overrides interactable" title="Click to allow/forbid the use of external media for this character." data-i18n="[title]Click to allow/forbid the use of external media for this character." tabindex="0">
                                    <i id="character_media_allowed_icon" class="fa-solid fa-fw fa-link"></i>
                                    <i id="character_media_forbidden_icon" class="fa-solid fa-fw fa-link-slash"></i>
                                    <span data-i18n="Ext. Media">
                                        Ext. Media
                                    </span>
                                </div>
                            </div>
                            <textarea id="description_textarea" class="mdHotkeys" data-i18n="[placeholder]Describe your character's physical and mental traits here." placeholder="Describe your character's physical and mental traits here." name="description"></textarea>
                            <div class="extension_token_counter">
                                <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="description_textarea" data-token-permanent="true">0</span>
                            </div>
                        </div>
                        <div id="firstMessageWrapper" class="flex-container flexFlowColumn flex1">
                            <div id="first_message_div" class="title_restorable">
                                <div class="flex-container alignitemscenter flex1">
                                    <span data-i18n="First message" class="mdhotkey_location">First message</span>
                                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="firstmessage_textarea" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                                    <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#first-message" class="notes-link" target="_blank">
                                        <span class="fa-solid fa-circle-question note-link-span"></span>
                                    </a>
                                </div>
                                <div class="menu_button menu_button_icon open_alternate_greetings margin0 interactable" title="Click to set additional greeting messages" data-i18n="[title]Click to set additional greeting messages" tabindex="0">
                                    <span data-i18n="Alt. Greetings">
                                        Alt. Greetings
                                    </span>
                                </div>
                            </div>
                            <textarea class="mdHotkeys" id="firstmessage_textarea" data-i18n="[placeholder]This will be the first message from the character that starts every chat." placeholder="This will be the first message from the character that starts every chat." name="first_mes"></textarea>
                            <div class="extension_token_counter">
                                <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="firstmessage_textarea">0</span>
                            </div>
                        </div>
                        <!-- these divs are invisible and used for server communication purposes -->
                        <div id="hidden-divs">
                            <input id="character_json_data" name="json_data" type="hidden">
                            <input id="avatar_url_pole" name="avatar_url" type="hidden">
                            <input id="selected_chat_pole" name="chat" type="hidden">
                            <input id="create_date_pole" name="create_date" type="hidden">
                            <input id="last_mes_pole" name="last_mes" type="hidden">
                            <input id="character_world" name="world" type="hidden">
                        </div>
                        <!-- now back to normal divs for display purposes-->
                    </form>
                </div>
                <div name="Group Chat Edit Panel" id="rm_group_chats_block" class="right_menu flex-container flexNoGap">
                    <div class="inline-drawer wide100p flexFlowColumn">
                        <div id="groupControlsToggle" class="inline-drawer-toggle inline-drawer-header">
                            <span>
                                <span data-i18n="Group Controls">Group Controls</span>
                                <a href="https://docs.sillytavern.app/usage/core-concepts/groupchats/" class="notes-link" target="_blank">
                                    <span class="fa-solid fa-circle-question note-link-span"></span>
                                </a>
                            </span>
                            <div class="fa-solid inline-drawer-icon up fa-circle-chevron-up interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content" style="display: block;">
                            <div id="group-metadata-controls" class="marginTopBot5">
                                <div class="flex-container wide100p">
                                    <input id="rm_group_chat_name" class="text_pole flex1" type="text" name="chat_name" data-i18n="[placeholder]Chat Name (Optional)" placeholder="Chat Name (Optional)">
                                    <div class="chat_lorebook_button menu_button fa-solid fa-passport interactable" title="Chat Lore" data-i18n="[title]Chat Lore" tabindex="0"></div>
                                </div>
                                <div id="group_tags_div" class="wide100p">
                                    <div class="tag_controls">
                                        <input id="groupTagInput" class="text_pole textarea_compact tag_input flex1 margin0 ui-autocomplete-input" data-i18n="[placeholder]Search / Create Tags" placeholder="Search / Create tags" autocomplete="off">
                                        <div class="tags_view menu_button fa-solid fa-tags margin0 interactable" title="View all tags" data-i18n="[title]View all tags" tabindex="0"></div>
                                    </div>
                                    <div id="groupTagList" class="tags paddingTopBot5"><span id="1345561466591" class="tag" style="background-color: rgb(108, 32, 32);">
                <span class="tag_name">ST Default</span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0"></i>
            </span></div>
                                </div>
                                <div id="rm_group_top_bar" class="flex-container alignitemscenter spaceBetween width100p fontsize80p">
                                    <div>
                                        <label class="add_avatar avatar flex-container justifyCenter" for="group_avatar_button" title="Click to select a new avatar for this group" data-i18n="[title]Click to select a new avatar for this group">
                                            <div id="group_avatar_preview">
                                                <div class="avatar">
                                                    <img src="img/ai4.png" alt="avatar">
                                                </div>
                                            </div>
                                            <input hidden="" type="file" id="group_avatar_button" name="avatar" accept="image/png, image/jpeg, image/jpg, image/gif, image/bmp">
                                        </label>
                                    </div>
                                    <div name="GroupStragegyAndOrder" id="rm_group_buttons" class="flex-container paddingLeftRight5 flex2">
                                        <div class="flex1 flexGap5">
                                            <label for="rm_group_activation_strategy" class="flexnowrap width100p whitespacenowrap">
                                                <span data-i18n="Group reply strategy">Group reply strategy</span>
                                            </label>
                                            <select id="rm_group_activation_strategy">
                                                <option value="2" data-i18n="Manual">Manual</option>
                                                <option value="0" data-i18n="Natural order">Natural order</option>
                                                <option value="1" data-i18n="List order">List order</option>
                                            </select>
                                        </div>
                                        <div class="flex1 flexGap5">
                                            <label for="rm_group_generation_mode" class="flexnowrap width100p whitespacenowrap">
                                                <span data-i18n="Group generation handling mode">Group generation handling mode</span>
                                            </label>
                                            <select id="rm_group_generation_mode">
                                                <option value="0" data-i18n="Swap character cards">Swap character cards</option>
                                                <option value="1" data-i18n="Join character cards (exclude muted)">Join character cards (exclude muted)</option>
                                                <option value="2" data-i18n="Join character cards (include muted)">Join character cards (include muted)</option>
                                            </select>
                                        </div>
                                        <div class="flex1 flexGap5" title="Inserted before each part of the joined fields." data-i18n="[title]Inserted before each part of the joined fields.">
                                            <label for="rm_group_generation_mode_join_prefix" class="flexnowrap width100p whitespacenowrap">
                                                <span data-i18n="Join Prefix">Join Prefix</span>
                                                <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]When 'Join character cards' is selected, all respective fields of the characters are being joined together.This means that in the story string for example all character descriptions will be joined to one big text.If you want those fields to be separated, you can define a prefix or suffix here.This value supports normal macros and will also replace {{char}} with the relevant char's name and <FIELDNAME> with the name of the part (e.g.: description, personality, scenario, etc.)" title="When 'Join character cards' is selected, all respective fields of the characters are being joined together.
This means that in the story string for example all character descriptions will be joined to one big text.
If you want those fields to be separated, you can define a prefix or suffix here.

This value supports normal macros and will also replace {{char}} with the relevant char's name and <FIELDNAME> with the name of the part (e.g.: description, personality, scenario, etc.)">
                                                </div>
                                            </label>
                                            <textarea id="rm_group_generation_mode_join_prefix" class="text_pole wide100p textarea_compact autoSetHeight" placeholder="—" rows="1" style="height: 3px;"></textarea>
                                        </div>
                                        <div class="flex1 flexGap5" title="Inserted after each part of the joined fields." data-i18n="[title]Inserted after each part of the joined fields.">
                                            <label for="rm_group_generation_mode_join_suffix" class="flexnowrap width100p whitespacenowrap">
                                                <span data-i18n="Join Suffix">Join Suffix</span>
                                                <div class="fa-solid fa-circle-info opacity50p" data-i18n="[title]When 'Join character cards' is selected, all respective fields of the characters are being joined together.This means that in the story string for example all character descriptions will be joined to one big text.If you want those fields to be separated, you can define a prefix or suffix here.This value supports normal macros and will also replace {{char}} with the relevant char's name and <FIELDNAME> with the name of the part (e.g.: description, personality, scenario, etc.)" title="When 'Join character cards' is selected, all respective fields of the characters are being joined together.
This means that in the story string for example all character descriptions will be joined to one big text.
If you want those fields to be separated, you can define a prefix or suffix here.

This value supports normal macros and will also replace {{char}} with the relevant char's name and <FIELDNAME> with the name of the part (e.g.: description, personality, scenario, etc.)">
                                                </div>
                                            </label>
                                            <textarea id="rm_group_generation_mode_join_suffix" class="text_pole wide100p textarea_compact autoSetHeight" placeholder="—" rows="1" style="height: 3px;"></textarea>
                                        </div>
                                    </div>
                                    <div id="GroupFavDelOkBack" class="flex-container flexGap5 spaceEvenly flex1">
                                        <div id="rm_button_back_from_group" class="heightFitContent margin0 menu_button fa-solid fa-left-long interactable" tabindex="0"></div>
                                        <div id="rm_group_scenario" class="heightFitContent margin0 menu_button fa-solid fa-scroll interactable" title="Set a group chat scenario" data-i18n="[title]Set a group chat scenario" tabindex="0"></div>
                                        <div id="group_favorite_button" class="heightFitContent margin0 menu_button fa-solid fa-star interactable" title="Add to Favorites" data-i18n="[title]Add to Favorites" tabindex="0"></div>
                                        <input id="rm_group_fav" type="hidden">
                                        <div id="group_open_media_overrides" class="heightFitContent margin0 menu_button menu_button_icon open_media_overrides interactable" title="Click to allow/forbid the use of external media for this group." data-i18n="[title]Click to allow/forbid the use of external media for this group." tabindex="0">
                                            <i id="group_media_allowed_icon" class="fa-solid fa-fw fa-link"></i>
                                            <i id="group_media_forbidden_icon" class="fa-solid fa-fw fa-link-slash"></i>
                                        </div>
                                        <div id="rm_group_submit" class="heightFitContent margin0 menu_button fa-solid fa-check interactable" title="Create" data-i18n="[title]Create" tabindex="0"></div>
                                        <div id="rm_group_restore_avatar" class="heightFitContent margin0 menu_button fa-solid fa-images interactable" title="Restore collage avatar" data-i18n="[title]Restore collage avatar" tabindex="0"></div>
                                        <div id="rm_group_delete" class="heightFitContent margin0 menu_button fa-solid fa-trash-can interactable" title="Delete" data-i18n="[title]Delete" tabindex="0"></div>
                                        <div class="flex1">
                                            <label class="checkbox_label whitespacenowrap">
                                                <input id="rm_group_allow_self_responses" type="checkbox">
                                                <span data-i18n="Allow self responses">Allow self responses</span>
                                            </label>
                                            <label id="rm_group_automode_label" class="checkbox_label whitespacenowrap">
                                                <input id="rm_group_automode" type="checkbox">
                                                <span data-i18n="Auto Mode">Auto Mode</span>
                                                <input id="rm_group_automode_delay" class="text_pole textarea_compact widthUnset" type="number" min="1" max="999" step="1" value="5" title="Auto Mode delay" data-i18n="[title]Auto Mode delay">
                                            </label>
                                            <label id="rm_group_hidemutedsprites_label" class="checkbox_label whitespacenowrap">
                                                <input id="rm_group_hidemutedsprites" type="checkbox">
                                                <span data-i18n="Hide Muted Member Sprites">Hide Muted Member Sprites</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="inline-drawer wide100p flexFlowColumn">
                        <div id="groupCurrentMemberListToggle" class="inline-drawer-toggle inline-drawer-header">
                            <span data-i18n="Current Members">Current Members </span><i id="groupCurrentMemberPopoutButton" class="fa-solid fa-window-restore menu_button interactable" tabindex="0"></i>
                            <div class="fa-solid inline-drawer-icon up fa-circle-chevron-up interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content" style="display: block;">
                            <div id="currentGroupMembers" name="Current Group Members" class="flex-container flexFlowColumn overflowYAuto flex1">
                                <div id="rm_group_members_pagination" class="rm_group_members_pagination group_pagination"></div>
                                <div id="rm_group_members" class="rm_group_members overflowYAuto flex-container"></div>
                            </div>
                        </div>
                    </div>
                    <div class="inline-drawer wide100p flexFlowColumn">
                        <div id="groupAddMemberListToggle" class="inline-drawer-toggle inline-drawer-header">
                            <span data-i18n="Add Members">Add Members</span>
                            <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content">
                            <div name="Unadded Char List" class="flex-container flexFlowColumn overflowYAuto flex1">
                                <div id="rm_group_add_members_header">
                                    <input id="rm_group_filter" class="text_pole margin0" type="search" data-i18n="[placeholder]Search..." placeholder="Search...">
                                </div>
                                <div class="rm_tag_controls">
                                    <div class="tags rm_tag_filter"><span id="1" class="tag filterByFavorites actionable undefined clickable-action interactable" style="background-color: rgba(255, 255, 0, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-star" title="Show only favorites"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="0" class="tag filterByGroups actionable undefined clickable-action interactable" style="background-color: rgba(100, 100, 100, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-users" title="Show only groups"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="4" class="tag filterByFolder actionable undefined clickable-action interactable" style="background-color: rgba(120, 120, 120, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-folder-plus" title="Enable 'Tags as Folder'

Allows characters to be grouped in folders by their assigned tags.
Tags have to be explicitly chosen as folder to show up.

Click here to start"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="2" class="tag manageTags actionable undefined clickable-action interactable" style="background-color: rgba(150, 100, 100, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-gear" title="Manage tags"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="3" class="tag showTagList actionable undefined clickable-action interactable" style="background-color: rgba(150, 100, 100, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-tags" title="Show Tag List"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="5" class="tag clearAllFilters actionable undefined clickable-action interactable" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-filter-circle-xmark" title="Clear all filters"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="1345561466591" class="tag undefined interactable" style="background-color: rgb(108, 32, 32);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name">ST Default</span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span></div>
                                </div>
                                <div id="rm_group_add_members_pagination" class="group_pagination"></div>
                                <div id="rm_group_add_members" class="overflowYAuto flex-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="rm_character_import" class="right_menu" style="display: none;">
                    <form id="form_import" action="javascript:void(null);" method="post" enctype="multipart/form-data">
                        <input multiple="" type="file" id="character_import_file" accept=".json, image/png, .yaml, .yml, .charx" name="avatar">
                        <input id="character_import_file_type" name="file_type" class="text_pole" value="" autocomplete="off">
                    </form>
                    <input type="file" id="character_replace_file" accept=".json, image/png, .yaml, .yml, .charx" name="replace_avatar" hidden="">
                </div>
                <div name="Character List Panel" id="rm_characters_block" class="right_menu">
                    <div id="charListFixedTop">
                        <form id="form_character_search_form" action="javascript:void(null);">
                            <div id="rm_button_create" title="Create New Character" data-i18n="[title]Create New Character" class="menu_button fa-solid fa-user-plus interactable" tabindex="0"></div>
                            <div id="character_import_button" title="Import Character from File" data-i18n="[title]Import Character from File" class="menu_button fa-solid fa-file-import faSmallFontSquareFix interactable" tabindex="0"></div>
                            <div id="external_import_button" title="Import content from external URL" data-i18n="[title]Import content from external URL" class="menu_button fa-solid fa-cloud-arrow-down faSmallFontSquareFix interactable" tabindex="0"></div>
                            <div id="rm_button_group_chats" title="Create New Chat Group" data-i18n="[title]Create New Chat Group" class="menu_button fa-solid fa-users-gear interactable" tabindex="0"></div>
                            <input id="character_search_bar" class="text_pole width100p" type="search" data-i18n="[placeholder]Search..." placeholder="Search...">
                            <select id="character_sort_order" title="Characters sorting order" data-i18n="[title]Characters sorting order">
                                <option data-field="search" data-order="desc" data-i18n="Search" hidden="">Search</option>
                                <option data-field="name" data-order="asc" data-i18n="A-Z">A-Z</option>
                                <option data-field="name" data-order="desc" data-i18n="Z-A">Z-A</option>
                                <option data-field="create_date" data-order="desc" data-i18n="Newest">Newest</option>
                                <option data-field="create_date" data-order="asc" data-i18n="Oldest">Oldest</option>
                                <option data-field="fav" data-order="desc" data-rule="boolean" data-i18n="Favorites">Favorites</option>
                                <option data-field="date_last_chat" data-order="desc" data-i18n="Recent">Recent</option>
                                <option data-field="chat_size" data-order="desc" data-i18n="Most chats">Most chats</option>
                                <option data-field="chat_size" data-order="asc" data-i18n="Least chats">Least chats</option>
                                <option data-field="data_size" data-order="desc" data-i18n="Most tokens">Most tokens</option>
                                <option data-field="data_size" data-order="asc" data-i18n="Least tokens">Least tokens</option>
                                <option data-field="name" data-order="random" data-i18n="Random">Random</option>
                            </select>
                        </form>
                        <div class="rm_tag_controls">
                            <div class="tags rm_tag_filter"><span id="1" class="tag filterByFavorites actionable undefined clickable-action interactable" style="background-color: rgba(255, 255, 0, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-star" title="Show only favorites"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="0" class="tag filterByGroups actionable undefined clickable-action interactable" style="background-color: rgba(100, 100, 100, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-users" title="Show only groups"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="4" class="tag filterByFolder actionable undefined clickable-action interactable" style="background-color: rgba(120, 120, 120, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-folder-plus" title="Enable 'Tags as Folder'

Allows characters to be grouped in folders by their assigned tags.
Tags have to be explicitly chosen as folder to show up.

Click here to start"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="2" class="tag manageTags actionable undefined clickable-action interactable" style="background-color: rgba(150, 100, 100, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-gear" title="Manage tags"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="3" class="tag showTagList actionable undefined clickable-action interactable" style="background-color: rgba(150, 100, 100, 0.5);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-tags" title="Show Tag List"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="5" class="tag clearAllFilters actionable undefined clickable-action interactable" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name fa-solid fa-filter-circle-xmark" title="Clear all filters"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span><span id="1345561466591" class="tag undefined interactable" style="background-color: rgb(108, 32, 32);" data-toggle-state="UNDEFINED" tabindex="0">
                <span class="tag_name">ST Default</span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span></div>
                            <div class="tags rm_tag_bogus_drilldown"></div>
                        </div>
                        <hr>
                    </div>

                    <div id="rm_print_characters_pagination"><div class="paginationjs"><div class="paginationjs-nav J-paginationjs-nav">1-1 of 1</div><div class="paginationjs-pages"><ul><li class="paginationjs-prev disabled "><a class="interactable" data-original-tabindex="null">&lt;</a></li><li class="paginationjs-next disabled "><a class="interactable" data-original-tabindex="null">&gt;</a></li></ul></div><div class="paginationjs-size-changer"><select class="J-paginationjs-size-select"><option value="10">10 / page</option><option value="25">25 / page</option><option value="50" selected="">50 / page</option><option value="100">100 / page</option><option value="250">250 / page</option><option value="500">500 / page</option><option value="1000">1000 / page</option></select></div></div>
                        <i id="charListGridToggle" class="fa-solid fa-table-cells-large menu_button interactable" title="Toggle character grid view" data-i18n="[title]Toggle character grid view" tabindex="0"></i>
                        <i id="bulkEditButton" class="fa-solid fa-edit menu_button bulkEditButton interactable" title="Bulk edit characters

Click to toggle characters
Shift + Click to select/deselect a range of characters
Right-click for actions" data-i18n="[title]Bulk_edit_characters" tabindex="0"></i>
                        <div id="bulkSelectedCount" class="bulkEditOptionElement paginationjs-nav"></div>
                        <i id="bulkSelectAllButton" class="fa-solid fa-check-double menu_button bulkEditOptionElement bulkSelectAllButton interactable" title="Bulk select all characters" data-i18n="[title]Bulk select all characters" style="display: none;" tabindex="0"></i>
                        <i id="bulkDeleteButton" class="fa-solid fa-trash menu_button bulkEditOptionElement bulkDeleteButton interactable" title="Bulk delete characters" data-i18n="[title]Bulk delete characters" style="display: none;" tabindex="0"></i>
                    </div>
                    <div id="rm_print_characters_block" class="flexFlowColumn"><div class="character_select entity_block flex-container wide100p alignitemsflexstart interactable" chid="0" id="CharID0" tabindex="0">
                <div class="avatar" title="[Character] Seraphina
File: default_Seraphina.png">
                    <img src="/thumbnail?type=avatar&amp;file=default_Seraphina.png" alt="Seraphina">
                </div>
                <div class="flex-container wide100pLess70px character_select_container">
                    <div class="wide100p character_name_block">
                        <span class="ch_name" title="[Character] Seraphina">Seraphina</span>
                        <small class="ch_additional_info ch_add_placeholder">+++</small>
                        <small class="ch_additional_info character_version">1.0.0</small>
                        <small class="ch_additional_info ch_avatar_url"></small>
                    </div>
                    <i class="ch_fav_icon fa-solid fa-star" style="display: none;"></i>
                    <input class="ch_fav" value="" hidden="">
                    <div class="ch_description">ST Default Bot contest winner: roleplay bots category</div>
                    <div class="tags tags_inline"><span id="1345561466591" class="tag" style="background-color: rgb(108, 32, 32);">
                <span class="tag_name">ST Default</span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0" style="display: none;"></i>
            </span></div>
                </div>
            </div></div>
                </div>
            </nav>
        </div>
    </div>
    <!-- various fullscreen popups -->
    <div name="templatesAndPopupsWrapper"> <!--this div is just for IDE sanity for quick collapsing-->
        <!-- Point to this element when you need a no-op selector -->
        <template id="NULL_SELECTOR" class="displayNone" style="display: block;"></template>
        <div id="export_format_popup" class="list-group" style="position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(-2560px);" data-popper-reference-hidden="" data-popper-escaped="" data-popper-placement="left">
            <div class="export_format list-group-item" data-format="png">PNG</div>
            <div class="export_format list-group-item" data-format="json">JSON</div>
        </div>
        <div id="zoomed_avatar_template" class="template_element">
            <div class="zoomed_avatar">
                <div class="panelControlBar flex-container">
                    <div class="fa-fw fa-solid fa-grip drag-grabber"></div>
                    <div class="fa-fw fa-solid fa-circle-xmark dragClose" id="closeZoom"></div>
                </div>
                <div class="zoomed_avatar_container">
                    <img class="zoomed_avatar_img" src="" data-izoomify-url="" data-izoomify-magnify="1.8" data-izoomify-duration="300" alt="">
                </div>
            </div>
        </div>
        <template id="generic_draggable_template">
            <div class="draggable">
                <div class="dragTitle"></div>
                <div class="panelControlBar flex-container">
                    <div class="fa-fw fa-solid fa-grip drag-grabber"></div>
                    <div class="fa-fw fa-solid fa-circle-xmark dragClose"></div>
                </div>
            </div>
        </template>
        <div id="user_avatar_template" class="template_element">
            <div class="avatar-container interactable" tabindex="0">
                <div imgfile="" class="avatar">
                    <img src="" alt="User Avatar">
                </div>
                <div class="flex-container wide100pLess70px character_select_container">
                    <div class="wide100p character_name_block">
                        <span class="ch_name flex1"></span>
                        <div class="avatar-buttons">
                            <button class="menu_button bind_user_name interactable" title="Bind user name to that avatar" data-i18n="[title]Bind user name to that avatar" tabindex="0">
                                <i class="fa-fw fa-solid fa-user-edit fa-sm"></i>
                            </button>
                            <button class="menu_button set_persona_image interactable" title="Change persona image" data-i18n="[title]Change persona image" tabindex="0">
                                <i class="fa-fw fa-solid fa-image fa-sm"></i>
                            </button>
                            <button class="menu_button set_default_persona interactable" title="Select this as default persona for the new chats." data-i18n="[title]Select this as default persona for the new chats." tabindex="0">
                                <i class="fa-fw fa-solid fa-crown fa-sm"></i>
                            </button>
                            <button class="menu_button duplicate_persona interactable" title="Duplicate persona" data-i18n="[title]Duplicate persona" tabindex="0">
                                <i class="fa-fw fa-solid fa-clone fa-sm"></i>
                            </button>
                            <button class="menu_button delete_avatar interactable" title="Delete persona" data-i18n="[title]Delete persona" tabindex="0">
                                <i class="fa-fw fa-solid fa-trash-alt fa-sm"></i>
                            </button>
                        </div>
                    </div>
                    <div class="ch_description"></div>
                </div>
            </div>
        </div>
        <template id="popup_template" data-i18n="[popup-button-save]popup-button-save;[popup-button-yes]popup-button-yes;[popup-button-no]popup-button-no;[popup-button-cancel]popup-button-cancel;[popup-button-import]popup-button-import;[popup-button-crop]popup-button-crop" popup-button-save="Save" popup-button-yes="Yes" popup-button-no="No" popup-button-cancel="Cancel" popup-button-import="Import" popup-button-crop="Crop"> <!-- localization data holder for popups -->
            <dialog class="popup">
                <div class="popup-body">
                    <div class="popup-content">
                        <h3 class="popup-header">text</h3>
                    </div>
                    <div class="popup-crop-wrap">
                        <img class="popup-crop-image" src="">
                    </div>
                    <textarea class="popup-input text_pole result-control auto-select" rows="1" data-result="1" data-result-event="submit"></textarea>
                    <div class="popup-inputs"></div>
                    <div class="popup-controls">
                        <div class="popup-button-ok menu_button result-control" data-result="1" data-i18n="Delete">Delete</div>
                        <div class="popup-button-cancel menu_button result-control" data-result="0" data-i18n="Cancel">Cancel</div>
                    </div>
                </div>
                <div class="popup-button-close right_menu_button fa-solid fa-circle-xmark" data-result="0" title="Close popup" data-i18n="[title]Close popup"></div>
            </dialog>
        </template>
        <div id="shadow_popup">
            <div id="dialogue_popup">
                <div id="dialogue_popup_holder">
                    <div id="dialogue_popup_text">
                        <h3 class="margin0">text</h3>
                    </div>
                    <textarea id="dialogue_popup_input" class="text_pole" rows="1"></textarea>
                    <div id="dialogue_popup_controls">
                        <div id="dialogue_popup_ok" class="menu_button interactable" data-i18n="Delete" data-result="1" tabindex="0">Delete</div>
                        <div id="dialogue_popup_cancel" class="menu_button interactable" data-i18n="Cancel" data-result="0" tabindex="0">Cancel</div>
                    </div>
                </div>
            </div>
        </div>
        <div id="character_popup" class="flex-container flexFlowColumn flexNoGap">
            <div id="character_popup_text">
                <h3 id="character_popup-button-h3" class="margin0"></h3> <span data-i18n="Advanced Defininitions">- Advanced
                    Definitions</span>
            </div>
            <hr class="margin-bot-10px">
            <div id="character_cross" class="fa-solid fa-circle-xmark"></div>
            <div class="inline-drawer">
                <div class="inline-drawer-toggle inline-drawer-header">
                    <h4>
                        <span data-i18n="Prompt Overrides">Prompt Overrides</span>
                        <small data-i18n="(For Chat Completion and Instruct Mode)">(For Chat Completion and Instruct Mode)</small>
                    </h4>
                    <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                </div>
                <div class="inline-drawer-content">
                    <small data-i18n="Insert {{original}} into either box to include the respective default prompt from system settings.">Insert {{original}} into either box to include the respective default prompt from system settings.</small>
                    <div>
                        <h4 class="flex-container alignItemsBaseline">
                            <span data-i18n="Main Prompt">Main Prompt</span>
                            <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="system_prompt_textarea" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                        </h4>
                        <textarea id="system_prompt_textarea" name="system_prompt" data-i18n="[placeholder]Any contents here will replace the default Main Prompt used for this character. (v2 spec: system_prompt)" placeholder="Any contents here will replace the default Main Prompt used for this character.
(v2 spec: system_prompt)" form="form_create" class="text_pole" autocomplete="off" rows="3"></textarea>
                        <div class="extension_token_counter">
                            <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="system_prompt_textarea">0</span>
                        </div>
                    </div>
                    <div>
                        <h4 class="flex-container alignItemsBaseline">
                            <span data-i18n="Post-History Instructions">Post-History Instructions</span>
                            <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="post_history_instructions_textarea" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                        </h4>
                        <textarea id="post_history_instructions_textarea" name="post_history_instructions" data-i18n="[placeholder]Any contents here will replace the default Post-History Instructions used for this character. (v2 spec: post_history_instructions)" placeholder="Any contents here will replace the default Post-History Instructions used for this character.
(v2 spec: post_history_instructions)" form="form_create" class="text_pole" autocomplete="off" rows="3"></textarea>
                        <div class="extension_token_counter">
                            <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="post_history_instructions_textarea">0</span>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="inline-drawer">
                <div class="inline-drawer-toggle inline-drawer-header">
                    <h4 data-i18n="Creator's Metadata (Not sent with the AI prompt)"><!-- This data-i18n attribute on the left is kept for backward compatibility, use the ones below when translating -->
                        <span data-i18n="Creator's Metadata">Creator's Metadata</span>
                        <small data-i18n="(Not sent with the AI Prompt)">(Not sent with the AI Prompt)</small>
                    </h4>
                    <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                </div>
                <div class="inline-drawer-content">
                    <small data-i18n="Everything here is optional">Everything here is optional</small>
                    <div class="flex-container flexnowrap">
                        <div class="flex1">
                            <h4 data-i18n="Created by">Created by</h4>
                            <textarea id="creator_textarea" name="creator" data-i18n="[placeholder](Botmaker's name / Contact Info)" placeholder="(Botmaker's name / Contact info)" form="form_create" class="text_pole" autocomplete="off" rows="2"></textarea>
                        </div>
                        <div class="flex1">
                            <h4 data-i18n="Character Version">Character Version</h4>
                            <textarea id="character_version_textarea" name="character_version" data-i18n="[placeholder](If you want to track character versions)" placeholder="(If you want to track character versions)" form="form_create" class="text_pole" autocomplete="off" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="flex-container flexnowrap">
                        <div class="flex1">
                            <h4 class="flex-container alignItemsBaseline">
                                <span data-i18n="Creator's Notes">Creator's Notes</span>
                                <i class="editor_maximize fa-solid fa-maximize" data-for="creator_notes_textarea" title="Expand the editor" data-i18n="[title]Expand the editor"></i>
                            </h4>
                            <textarea id="creator_notes_textarea" name="creator_notes" data-i18n="[placeholder](Describe the bot, give use tips, or list the chat models it has been tested on. This will be displayed in the character list.)" placeholder="(Describe the bot, give use tips, or list the chat models it has been tested on. This will be displayed in the character list.)" form="form_create" class="text_pole" autocomplete="off" rows="4"></textarea>
                        </div>
                        <div class="flex1">
                            <h4 class="flex-container alignItemsBaseline">
                                <span data-i18n="Tags to Embed">Tags to Embed</span>
                                <i class="editor_maximize fa-solid fa-maximize" data-for="tags_textarea" title="Expand the editor" data-i18n="[title]Expand the editor"></i>
                            </h4>
                            <textarea id="tags_textarea" name="tags" data-i18n="[placeholder](Write a comma-separated list of tags)" placeholder="(Write a comma-separated list of tags)" form="form_create" class="text_pole" autocomplete="off" rows="4"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div id="personality_div">
                <h4 class="flex-container alignItemsBaseline">
                    <span data-i18n="Personality summary">Personality summary</span>
                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="personality_textarea" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                    <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#personality-summary" class="notes-link" target="_blank"><span class="fa-solid fa-circle-question note-link-span"></span></a>
                </h4>
                <textarea id="personality_textarea" name="personality" data-i18n="[placeholder](A brief description of the personality)" placeholder="(A brief description of the personality)" form="form_create" class="text_pole" autocomplete="off" rows="4"></textarea>
                <div class="extension_token_counter">
                    <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="personality_textarea" data-token-permanent="true">0</span>
                </div>
            </div>
            <div id="scenario_div">
                <h4 class="flex-container alignItemsBaseline">
                    <span data-i18n="Scenario">Scenario</span>
                    <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="scenario_pole" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                    <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#scenario" class="notes-link" target="_blank">
                        <span class="fa-solid fa-circle-question note-link-span"></span>
                    </a>
                </h4>
                <textarea id="scenario_pole" name="scenario" data-i18n="[placeholder](Circumstances and context of the interaction)" placeholder="(Circumstances and context of the interaction)" class="text_pole" value="" autocomplete="off" form="form_create" rows="4"></textarea>
                <div class="extension_token_counter">
                    <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="scenario_pole" data-token-permanent="true">0</span>
                </div>
            </div>
            <div id="depth_prompt_div" class="flex-container">
                <div class="flex1">
                    <h4 class="flex-container alignItemsBaseline">
                        <span data-i18n="Character's Note">
                            Character's Note
                        </span>
                        <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="depth_prompt_prompt" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                    </h4>
                    <textarea id="depth_prompt_prompt" name="depth_prompt_prompt" class="text_pole" rows="5" autocomplete="off" form="form_create" data-i18n="[placeholder](Text to be inserted in-chat @ designated depth and role)" placeholder="(Text to be inserted in-chat @ designated depth and role)"></textarea>
                </div>
                <div>
                    <h4>
                        <span data-i18n="@ Depth">
                            @ Depth
                        </span>
                    </h4>
                    <input id="depth_prompt_depth" name="depth_prompt_depth" class="text_pole textarea_compact m-t-0" type="number" min="0" max="999" value="4" form="form_create">
                    <h4>
                        <span data-i18n="Role">
                            Role
                        </span>
                    </h4>
                    <select id="depth_prompt_role" name="depth_prompt_role" form="form_create" class="text_pole textarea_compact m-t-0">
                        <option value="system" data-i18n="System">System</option>
                        <option value="user" data-i18n="User">User</option>
                        <option value="assistant" data-i18n="Assistant">Assistant</option>
                    </select>
                    <div class="extension_token_counter">
                        <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="depth_prompt_prompt" data-token-permanent="true">0</span>
                    </div>
                </div>
            </div>
            <div id="talkativeness_div">
                <h4><span data-i18n="Talkativeness">Talkativeness</span></h4>
                <h5 data-i18n="How often the character speaks in group chats!"><!-- This data-i18n attribute on the left is kept for backward compatibility, use the ones below when translating -->
                    <span data-i18n="How often the character speaks in">How often the character speaks in</span>&nbsp;<span class="warning" data-i18n="group chats!">group chats!</span>
                </h5>
                <input id="talkativeness_slider" name="talkativeness" type="range" min="0" max="1" step="0.05" value="0.5" form="form_create">
                <div class="slider_hint">
                    <span data-i18n="Shy">Shy</span>
                    <span data-i18n="Normal">Normal</span>
                    <span data-i18n="Chatty">Chatty</span>
                </div>
            </div>
            <hr>
            <div id="mes_example_div" class="flex-container flexFlowColumn">
                <div>
                    <h4 class="flex-container alignItemsBaseline">
                        <span data-i18n="Examples of dialogue" class="mdhotkey_location">Examples of dialogue</span>
                        <i class="editor_maximize fa-solid fa-maximize right_menu_button interactable" data-for="mes_example_textarea" title="Expand the editor" data-i18n="[title]Expand the editor" tabindex="0"></i>
                    </h4>
                    <h5>
                        <span data-i18n="Important to set the character's writing style.">Important to set the character's writing style.</span>
                        <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#examples-of-dialogue" class="notes-link" target="_blank">
                            <span class="fa-solid fa-circle-question note-link-span"></span>
                        </a>
                    </h5>
                </div>
                <textarea id="mes_example_textarea" class="flexGrow mdHotkeys" name="mes_example" data-i18n="[placeholder](Examples of chat dialog. Begin each example with START on a new line.)" placeholder="(Examples of chat dialog. Begin each example with <START> on a new line.)" form="form_create" rows="6"></textarea>
                <div class="extension_token_counter">
                    <span data-i18n="extension_token_counter">Tokens:</span> <span data-token-counter="mes_example_textarea">0</span>
                </div>
                <!-- TODO: Example chats handhold-editor concept: https://gist.github.com/Cohee1207/50da02a4001ac1adae9b440f9b8e1079 -->
            </div>
            <div id="character_popup_ok" class="menu_button interactable" data-i18n="Save" tabindex="0">Save</div>
        </div>

        <div id="shadow_select_chat_popup">
            <div id="select_chat_popup">
                <div name="selectChatPopupHeader" class="flex-container alignitemscenter justifySpaceBetween flexGap10">
                    <div id="select_chat_import"> <!-- import chat popup header -->
                        <form id="form_import_chat" action="javascript:void(null);" method="post" enctype="multipart/form-data" style="display: none;">
                            <input type="file" id="chat_import_file" accept=".json, .jsonl" name="avatar">
                            <input id="chat_import_file_type" name="file_type" class="text_pole" value="" autocomplete="off" style="display: none;">
                            <input id="chat_import_avatar_url" name="avatar_url" class="text_pole" value="" autocomplete="off" style="display: none;">
                            <input id="chat_import_character_name" name="character_name" class="text_pole" value="" autocomplete="off" style="display: none;">
                        </form>
                    </div>
                    <div id="selectChatPopupHeaderText" class="TxtLrgBoldCenter">
                        <span id="ChatHistoryCharName"></span><span data-i18n="Chat History">Chat History</span>
                        <a href="https://docs.sillytavern.app/usage/core-concepts/chatfilemanagement/" class="notes-link" target="_blank"><span class="fa-solid fa-circle-question note-link-span"></span></a>
                    </div>
                    <div id="newChatFromManageScreenButton" class="menu_button menu_button_icon interactable" tabindex="0">
                        <i class="fa-solid fa-plus"></i>
                        <span data-i18n="New Chat">New Chat</span>
                    </div>
                    <div id="chat_import_button" class="menu_button menu_button_icon interactable" tabindex="0">
                        <i class="fa-solid fa-file-import"></i>
                        <span data-i18n="Import Chat">Import Chat</span>
                    </div>
                    <input type="search" id="select_chat_search" class="text_pole flex1" data-i18n="[placeholder]Search..." placeholder="Search..." autocomplete="off">
                    <div id="select_chat_cross" class="opacity50p hoverglow fa-solid fa-circle-xmark fontsize120p" alt="Close Past Chat Popup"></div>
                </div>
                <div id="select_chat_div"></div>
            </div>
        </div>
        <div id="background_template" class="template_element">
            <div class="bg_example flex-container interactable" bgfile="" title="" tabindex="0">
                <div title="Copy to system backgrounds" data-i18n="[title]Copy to system backgrounds" class="bg_button bg_example_copy fa-solid fa-file-arrow-up interactable" tabindex="0"></div>
                <div title="Rename background" data-i18n="[title]Rename background" class="bg_button bg_example_edit fa-solid fa-pencil interactable" tabindex="0"></div>
                <div title="Lock" data-i18n="[title]Lock" class="bg_button bg_example_lock fa-solid fa-lock interactable" tabindex="0"></div>
                <div title="Unlock" data-i18n="[title]Unlock" class="bg_button bg_example_unlock fa-solid fa-lock-open interactable" tabindex="0"></div>
                <div title="Delete background" data-i18n="[title]Delete background" class="bg_button bg_example_cross fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                <div class="BGSampleTitle">
                </div>
            </div>
        </div>
        <!-- templates for JS to reuse when needed -->
        <div id="character_world_template" class="template_element">
            <div class="character_world range-block flexFlowColumn flex-container">
                <div class="range-block-title">
                    <h3>
                        <span data-i18n="Select a World Info file for">Select a World Info file for</span>
                        <span class="character_name"></span>:
                    </h3>
                </div>
                <h4 data-i18n="Primary Lorebook">Primary Lorebook</h4>
                <div class="range-block-counter justifyLeft flex-container flexFlowColumn margin-bot-10px">
                    <span data-i18n="A selected World Info will be bound to this character as its own Lorebook.">A selected World Info will be bound to this character as its own Lorebook.</span>
                    <span data-i18n="When generating an AI reply, it will be combined with the entries from a global World Info selector.">When generating an AI reply, it will be combined with the entries from a global World Info selector.</span>
                    <span data-i18n="Exporting a character would also export the selected Lorebook file embedded in the JSON data.">Exporting a character would also export the selected Lorebook file embedded in the JSON data.</span>
                </div>
                <div class="range-block-range wide100p">
                    <select class="character_world_info_selector wide100p">
                        <option value="">--- None ---</option>
                    </select>
                </div>
                <div class="range-block-title">
                    <h4>
                        <span data-i18n="Additional Lorebooks">Additional Lorebooks</span>
                    </h4>
                </div>
                <div class="range-block-counter justifyLeft flex-container flexFlowColumn margin-bot-10px">
                    <span data-i18n="Associate one or more auxillary Lorebooks with this character.">Associate one or more auxillary Lorebooks with this character.</span><br>
                    <span data-i18n="NOTE: These choices are optional and won't be preserved on character export!">NOTE: These choices are optional and won't be preserved on character export!</span>
                </div>
                <div class="range-block-range wide100p">
                    <select class="character_extra_world_info_selector wide100p" multiple="">
                        <option value="" data-i18n="-- World Info not found --">-- World Info not found --</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="past_chat_template" class="template_element">
            <div class="select_chat_block_wrapper flex-container">
                <div class="select_chat_block  wide100p flex-container" file_name="">
                    <div id="select_chat_name_wrapper" class="flex-container alignitemscenter justifySpaceBetween wide100p">
                        <div class="flex-container alignItemsCenter">
                            <small class="select_chat_block_filename select_chat_block_filename_item"></small>
                            <div title="Rename chat file" class="renameChatButton hoverglow opacity50p fa-solid fa-pencil fa-sm" data-i18n="[title]Rename chat file"></div>
                        </div>
                        <div class="flex-container gap10px alignItemsCenter">
                            <div class="select_chat_info flex-container">
                                <small class="chat_messages_date select_chat_block_filename_item"></small>
                                <small class="chat_file_size select_chat_block_filename_item"></small>
                                <small class="chat_messages_num select_chat_block_filename_item"></small>
                            </div>
                            <div class="flex-container gap10px">
                                <div title="Export JSONL chat file" data-format="jsonl" class="exportRawChatButton opacity50p hoverglow fa-solid fa-file-export" data-i18n="[title]Export JSONL chat file"></div>
                                <div title="Download chat as plain text document" data-format="txt" class="exportChatButton opacity50p hoverglow fa-solid fa-file-lines" data-i18n="[title]Download chat as plain text document"></div>
                                <div title="Delete chat file" file_name="" class="PastChat_cross opacity50p hoverglow fa-solid fa-skull" data-i18n="[title]Delete chat file"></div>
                            </div>
                        </div>
                    </div>
                    <div class="select_chat_block_mes"></div>
                </div>
            </div>
        </div>
        <div id="tag_view_template" class="template_element">
            <div class="tag_view_item">
                <div class="drag-handle" data-i18n="[title]Drag to reorder tag">☰</div>
                <div title="Tag as folder" class="tag_as_folder fa-solid fa-folder-open right_menu_button interactable" data-i18n="[title]Use tag as folder" tabindex="0">
                    <span class="tag_folder_indicator"></span>
                </div>
                <div class="tag_view_color_picker" data-value="color"></div>
                <div class="tag_view_color_picker" data-value="color2"></div>
                <div class="tag_view_name" contenteditable="true"></div>
                <div class="tag_view_counter"><span class="tag_view_counter_value"></span>&nbsp;entries</div>
                <div title="Delete tag" class="tag_delete fa-solid fa-trash-can right_menu_button interactable" data-i18n="[title]Delete tag" tabindex="0"></div>
            </div>
        </div>
        <div id="entry_edit_template" class="template_element">
            <div class="world_entry">
                <form class="world_entry_form  wi-card-entry">
                    <div class="inline-drawer wide100p">
                        <div class="inline-drawer-header gap5px padding0">
                            <span class="drag-handle">☰</span>
                            <div class="gap5px world_entry_thin_controls wide100p alignitemscenter">
                                <div class="inline-drawer-toggle fa-fw fa-solid fa-circle-chevron-down inline-drawer-icon down interactable" tabindex="0"></div>
                                <div class="fa-solid fa-toggle-on killSwitch" name="entryKillSwitch" title="Toggle entry's active state."></div>
                                <div class="flex-container alignitemscenter wide100p">
                                    <div class="WIEntryTitleAndStatus flex-container flex1 alignitemscenter">
                                        <div class="flex-container flex1">
                                            <textarea class="text_pole" rows="1" name="comment" data-i18n="[placeholder]Entry Title/Memo" placeholder="Entry Title/Memo"></textarea>
                                        </div>
                                        <!-- <span class="world_entry_form_position_value"></span> -->
                                        <select data-i18n="[title]WI Entry Status:🔵 Constant🟢 Normal🔗 Vectorized" title="WI Entry Status:
🔵 Constant
🟢 Normal
🔗 Vectorized" name="entryStateSelector" class="text_pole widthNatural margin0">
                                            <option value="constant" title="Constant" data-i18n="[title]WI_Entry_Status_Constant">🔵</option>
                                            <option value="normal" title="Normal" data-i18n="[title]WI_Entry_Status_Normal">🟢</option>
                                            <option value="vectorized" title="Vectorized" data-i18n="[title]WI_Entry_Status_Vectorized">🔗</option>
                                        </select>
                                    </div>
                                    <div class="WIEnteryHeaderControls flex-container">
                                        <div name="PositionBlock" class="world_entry_form_control world_entry_form_radios wi-enter-footer-text">
                                            <label for="position" class="WIEntryHeaderTitleMobile" data-i18n="Position:">Position:</label>
                                            <select name="position" class="text_pole widthNatural margin0" data-i18n="[title]T_Position" title="↑Char: Before Character Definitions
↓Char: After Character Definitions
↑EM: Before Example Messages
↓EM: After Example Messages
↑AN: Before Author's Note
↓AN: After Author's Note
@D ⚙️: at Depth (System)
@D 👤: at Depth (User)
@D 🤖: at Depth (Assistant)">
                                                <option value="0" data-role="" data-i18n="Before Char Defs">
                                                    ↑Char
                                                </option>
                                                <option value="1" data-role="" data-i18n="After Char Defs">
                                                    ↓Char
                                                </option>
                                                <option value="5" data-role="" data-i18n="Before EM">
                                                    ↑EM
                                                </option>
                                                <option value="6" data-role="" data-i18n="After EM">
                                                    ↓EM
                                                </option>
                                                <option value="2" data-role="" data-i18n="Before AN">
                                                    ↑AN
                                                </option>
                                                <option value="3" data-role="" data-i18n="After AN">
                                                    ↓AN
                                                </option>
                                                <option value="4" data-role="0" data-i18n="at Depth System">
                                                    @D ⚙️
                                                </option>
                                                <option value="4" data-role="1" data-i18n="at Depth User">
                                                    @D 👤
                                                </option>
                                                <option value="4" data-role="2" data-i18n="at Depth AI">
                                                    @D 🤖
                                                </option>
                                            </select>
                                        </div>
                                        <div class="world_entry_form_control wi-enter-footer-text flex-container flexNoGap">
                                            <label for="depth" class="WIEntryHeaderTitleMobile" data-i18n="Depth:">Depth:</label>
                                            <input title="Depth" class="text_pole wideMax100px margin0" type="number" name="depth" data-i18n="[title]Depth" placeholder="" min="0" max="999">
                                        </div>
                                        <div class="world_entry_form_control wi-enter-footer-text  flex-container flexNoGap">
                                            <label for="order" class="WIEntryHeaderTitleMobile" data-i18n="Order:">Order:</label>
                                            <input title="Order" data-i18n="[title]Order" class="text_pole wideMax100px margin0" type="number" name="order" placeholder="" min="0" max="999">
                                        </div>
                                        <div class="world_entry_form_control wi-enter-footer-text flex-container flexNoGap probabilityContainer">
                                            <label for="order" class="WIEntryHeaderTitleMobile" data-i18n="Trigger %:">Trigger %:</label>
                                            <input title="Probability" data-i18n="[title]Probability" class="text_pole wideMax100px margin0" type="number" name="probability" placeholder="" min="0" max="100">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <i class="menu_button duplicate_entry_button fa-solid fa-paste interactable" title="Duplicate world info entry" data-i18n="[title]Duplicate world info entry" type="submit" value="" tabindex="0"></i>
                            <i class="menu_button delete_entry_button fa-solid fa-trash-can interactable" title="Delete world info entry" data-i18n="[title]Delete world info entry" type="submit" value="" tabindex="0"></i>
                        </div>
                        <div class="inline-drawer-content flex-container paddingBottom5px wide100p">
                            <div class="flex-container wide100p alignitemscenter">
                                <div name="keywordsAndLogicBlock" class="flex-container wide100p alignitemscenter">
                                    <div class="world_entry_form_control flex1">
                                        <small class="displayNone">
                                            <span data-i18n="Comma separated (required)">
                                                Comma separated (required)
                                            </span>
                                        </small>
                                        <small class="textAlignCenter" data-i18n="Primary Keywords">Primary Keywords</small>
                                        <select class="keyprimaryselect keyselect select2_multi_sameline" name="key" data-i18n="[placeholder]Keywords or Regexes" placeholder="Keywords or Regexes" multiple="multiple"></select>
                                        <textarea class="text_pole keyprimarytextpole mobile" name="key" rows="1" data-i18n="[placeholder]Comma separated list" placeholder="Comma separated list" style="display: none;"></textarea>
                                        <button type="button" class="switch_input_type_icon" tabindex="-1" title="Switch to plaintext mode" data-i18n="[title]Switch to plaintext mode" data-icon-on="✨" data-icon-off="⌨️" data-tooltip-on="Switch to fancy mode" data-tooltip-off="Switch to plaintext mode">
                                            ⌨️
                                        </button>
                                    </div>
                                    <div class="world_entry_form_control">
                                        <small class="textAlignCenter" data-i18n="Logic">Logic</small>
                                        <select name="entryLogicType" class="text_pole widthFitContent margin0">
                                            <option value="0" data-i18n="AND ANY">AND ANY</option>
                                            <option value="3" data-i18n="AND ALL">AND ALL</option>
                                            <option value="1" data-i18n="NOT ALL">NOT ALL</option>
                                            <option value="2" data-i18n="NOT ANY">NOT ANY</option>
                                        </select>
                                    </div>
                                    <div class="world_entry_form_control keysecondary flex1">
                                        <small class="displayNone">
                                            <span data-i18n="(ignored if empty)">
                                                (ignored if empty)
                                            </span>
                                        </small>
                                        <small class="textAlignCenter" data-i18n="Optional Filter">Optional Filter</small>
                                        <select class="keysecondaryselect keyselect select2_multi_sameline" name="keysecondary" data-i18n="[placeholder]Keywords or Regexes (ignored if empty)" placeholder="Keywords or Regexes (ignored if empty)" multiple="multiple"></select>
                                        <textarea class="text_pole keysecondarytextpole mobile" name="keysecondary" rows="1" data-i18n="[placeholder]Comma separated list (ignored if empty)" placeholder="Comma separated list (ignored if empty)" style="display: none;"></textarea>
                                        <button type="button" class="switch_input_type_icon" tabindex="-1" title="Switch to plaintext mode" data-i18n="[title]Switch to plaintext mode" data-icon-on="✨" data-icon-off="⌨️" data-tooltip-on="Switch to fancy mode" data-tooltip-off="Switch to plaintext mode">
                                            ⌨️
                                        </button>
                                    </div>
                                </div>
                                <div name="perEntryOverridesBlock" class="flex-container wide100p alignitemscenter">
                                    <div class="world_entry_form_control flex1">
                                        <small class="textAlignCenter" data-i18n="Scan Depth">Scan Depth</small>
                                        <input class="text_pole margin0" name="scanDepth" type="number" placeholder="Use global setting" data-i18n="[placeholder]Use global setting" max="1000">
                                    </div>
                                    <div class="world_entry_form_control flex1">
                                        <small class="textAlignCenter" data-i18n="Case-Sensitive">Case-Sensitive</small>
                                        <select name="caseSensitive" class="text_pole widthNatural margin0">
                                            <option value="null" data-i18n="Use global">Use global</option>
                                            <option value="true" data-i18n="Yes">Yes</option>
                                            <option value="false" data-i18n="No">No</option>
                                        </select>
                                    </div>
                                    <div class="world_entry_form_control flex1">
                                        <small class="textAlignCenter" data-i18n="Whole Words">Whole Words</small>
                                        <select name="matchWholeWords" class="text_pole widthNatural margin0">
                                            <option value="null" data-i18n="Use global">Use global</option>
                                            <option value="true" data-i18n="Yes">Yes</option>
                                            <option value="false" data-i18n="No">No</option>
                                        </select>
                                    </div>
                                    <div class="world_entry_form_control flex1">
                                        <small class="textAlignCenter" data-i18n="Group Scoring">Group Scoring</small>
                                        <select name="useGroupScoring" class="text_pole widthNatural margin0">
                                            <option value="null" data-i18n="Use global">Use global</option>
                                            <option value="true" data-i18n="Yes">Yes</option>
                                            <option value="false" data-i18n="No">No</option>
                                        </select>
                                    </div>
                                    <div class="world_entry_form_control flex1" title="Can be used to automatically activate Quick Replies" data-i18n="[title]Can be used to automatically activate Quick Replies">
                                        <small class="textAlignCenter" data-i18n="Automation ID">Automation ID</small>
                                        <input class="text_pole margin0" name="automationId" type="text" placeholder="( None )" data-i18n="[placeholder]( None )">
                                    </div>
                                    <div class="world_entry_form_control flex1" title="Defines delay levels for recursive scans.

Initially, only the first level (smallest number) will match.
Once no matches are found, the next level becomes eligible for matching.
This repeats until all levels are checked.

Tied to the &quot;Delay until recursion&quot; setting." data-i18n="[title]delay_until_recursion_level">
                                        <small class="textAlignCenter">
                                            <span data-i18n="Recursion Level">Recursion Level</span>
                                            <div class="fa-solid fa-circle-info opacity50p"></div>
                                        </small>
                                        <input class="text_pole margin0" name="delayUntilRecursionLevel" type="text" placeholder="1">
                                    </div>
                                </div>
                                <div name="contentAndCharFilterBlock" class="world_entry_thin_controls flex2">
                                    <div class="world_entry_form_control flex1">
                                        <label for="content ">
                                            <small>
                                                <span class="alignitemscenter flex-container flexnowrap wide100p justifySpaceBetween">
                                                    <span data-i18n="Content" class="alignitemscenter flex-container flexNoGap mdhotkey_location">
                                                        Content
                                                    </span>
                                                    <span>
                                                        (<span data-i18n="extension_token_counter">Tokens:</span>&nbsp; <span class="world_entry_form_token_counter" data-first-run="true">counting...</span>)&nbsp;
                                                        <span class="world_entry_form_uid_value" data-first-run="true"></span>
                                                    </span>
                                                    <div>
                                                        <label class="checkbox flex-container alignitemscenter flexNoGap">
                                                            <input type="checkbox" name="exclude_recursion">
                                                            <span data-i18n="Non-recursable (will not be activated by another)">
                                                                Non-recursable (will not be activated by another)
                                                            </span>
                                                        </label>
                                                        <label class="checkbox flex-container alignitemscenter flexNoGap">
                                                            <input type="checkbox" name="prevent_recursion">
                                                            <span data-i18n="Prevent further recursion (this entry will not activate others)">
                                                                Prevent further recursion (will not activate others)
                                                            </span>
                                                        </label>
                                                        <label class="checkbox flex-container alignitemscenter flexNoGap">
                                                            <input type="checkbox" name="delay_until_recursion">
                                                            <span data-i18n="Delay until recursion (can only be activated on recursive checking)">
                                                                Delay until recursion (can only be activated on recursive checking)
                                                            </span>
                                                        </label>
                                                    </div>
                                                </span>
                                            </small>
                                            <small class="displayNone">
                                                <span data-i18n="What this keyword should mean to the AI, sent verbatim">
                                                    What this keyword should mean to the AI, sent verbatim
                                                </span>
                                            </small>
                                        </label>
                                        <textarea class="text_pole mdHotkeys" name="content" rows="8" data-i18n="[placeholder]What this keyword should mean to the AI, sent verbatim" placeholder="What this keyword should mean to the AI, sent verbatim"></textarea>
                                    </div>
                                </div>
                                <div class="world_entry_thin_controls commentContainer">
                                </div>
                            </div>
                            <div class="flex-container wide100p flexGap10">
                                <div class="flex4 flex-container flexFlowColumn flexNoGap">
                                    <div class="flex-container justifySpaceBetween">
                                        <small for="group">
                                            <span data-i18n="Inclusion Group">Inclusion Group</span>
                                            <a href="https://docs.sillytavern.app/usage/worldinfo/#inclusion-group" class="notes-link" target="_blank" title="Inclusion Groups ensure only one entry from a group is activated at a time, if multiple are triggered.
Supports multiple comma-separated groups.

Documentation: World Info - Inclusion Group" data-i18n="[title]Inclusion Groups ensure only one entry from a group is activated at a time, if multiple are triggered.Documentation: World Info - Inclusion Group">
                                                <span class="fa-solid fa-circle-question note-link-span"></span>
                                            </a>
                                        </small>
                                        <label class="checkbox_label flexNoGap margin-r5" for="groupOverride">
                                            <input type="checkbox" name="groupOverride">
                                            <span>
                                                <small title="Prioritize this entry: When checked, this entry is prioritized out of all selections.
If multiple are prioritized, the one with the highest 'Order' is chosen.
" data-i18n="[title]Prioritize this entry: When checked, this entry is prioritized out of all selections.If multiple are prioritized, the one with the highest 'Order' is chosen.">
                                                    <span data-i18n="Prioritize">Prioritize</span>
                                                    <div class="fa-solid fa-circle-info opacity50p"></div>
                                                </small>
                                            </span>
                                        </label>
                                    </div>
                                    <div class="range-block-range">
                                        <input type="text" class="text_pole margin0" name="group" rows="1" data-i18n="[placeholder]Only one entry with the same label will be activated" placeholder="Only one entry with the same label will be activated">
                                    </div>
                                </div>
                                <div class="flex2 flex-container flexFlowColumn flexNoGap" data-i18n="[title]A relative likelihood of entry activation within the group" title="A relative likelihood of entry activation within the group">
                                    <div class="flex-container justifySpaceBetween marginBot5">
                                        <small for="groupWeight" data-i18n="Group Weight">
                                            Group Weight
                                        </small>
                                    </div>
                                    <div class="range-block-range">
                                        <input type="number" class="text_pole margin0" name="groupWeight" rows="1" placeholder="100" min="1" max="999999">
                                    </div>
                                </div>
                                <div class="flex2 flex-container flexFlowColumn flexNoGap" data-i18n="[title]Sticky entries will stay active for N messages after being triggered." title="Sticky entries will stay active for N messages after being triggered.">
                                    <div class="flex-container justifySpaceBetween marginBot5">
                                        <small class="flex-container alignItemsBaseline" for="sticky">
                                            <span data-i18n="Sticky">
                                                Sticky
                                            </span>
                                            <i class="fa-solid fa-comments fa-xs"></i>
                                        </small>
                                    </div>
                                    <div class="range-block-range">
                                        <input class="text_pole margin0" name="sticky" type="number" placeholder="Non-sticky" min="0" max="999999">
                                    </div>
                                </div>
                                <div class="flex2 flex-container flexFlowColumn flexNoGap" data-i18n="[title]Entries with a cooldown can't be activated N messages after being triggered." title="Entries with a cooldown can't be activated N messages after being triggered.">
                                    <div class="flex-container justifySpaceBetween marginBot5">
                                        <small class="flex-container alignItemsBaseline" for="cooldown">
                                            <span data-i18n="Cooldown">
                                                Cooldown
                                            </span>
                                            <i class="fa-solid fa-comments fa-xs"></i>
                                        </small>
                                    </div>
                                    <div class="range-block-range">
                                        <input class="text_pole margin0" name="cooldown" type="number" placeholder="No cooldown" min="0" max="999999">
                                    </div>
                                </div>
                                <div class="flex2 flex-container flexFlowColumn flexNoGap" data-i18n="[title]Entries with a delay can't be activated until there are N messages present in the chat." title="Entries with a delay can't be activated until there are N messages present in the chat.">
                                    <div class="flex-container justifySpaceBetween marginBot5">
                                        <small class="flex-container alignItemsBaseline" for="delay">
                                            <span data-i18n="Delay">
                                                Delay
                                            </span>
                                            <i class="fa-solid fa-comments fa-xs"></i>
                                        </small>
                                    </div>
                                    <div class="range-block-range">
                                        <input class="text_pole margin0" name="delay" type="number" placeholder="No delay" min="0" max="999999">
                                    </div>
                                </div>
                            </div>
                            <div class="flex-container wide100p flexGap10">
                                <div class="flex4 flex-container flexFlowColumn flexNoGap">
                                    <div class="flex-container justifySpaceBetween">
                                        <small for="characterFilter" data-i18n="Filter to Characters or Tags">
                                            Filter to Characters or Tags
                                        </small>
                                        <label class="checkbox_label flexNoGap margin-r5" for="character_exclusion">
                                            <input type="checkbox" name="character_exclusion">
                                            <span>
                                                <small title="Switch the Character/Tags filter around to exclude the listed characters and tags from matching for this entry" data-i18n="[title]Switch the Character/Tags filter around to exclude the listed characters and tags from matching for this entry">
                                                    <span data-i18n="Exclude">Exclude</span>
                                                    <div class="fa-solid fa-circle-info opacity50p"></div>
                                                </small>
                                            </span>
                                        </label>
                                    </div>
                                    <div class="range-block-range">
                                        <select name="characterFilter" class="select2_multi_sameline" multiple="">
                                            <option value="" data-i18n="-- Characters not found --">
                                                -- Characters not found --
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div name="WIEntryBottomControls" class="flex-container flex1 justifySpaceBetween world_entry_form_horizontal">
                                <div class="flex-container flexFlowColumn flexNoGap  wi-enter-footer-text  ">
                                    <label class="checkbox flex-container">
                                        <input type="checkbox" name="selective">
                                        <span data-i18n="Selective">Selective</span>
                                    </label>
                                    <label class="checkbox flex-container">
                                        <input type="checkbox" name="useProbability">
                                        <span data-i18n="Use Probability">Use Probability</span>
                                    </label>
                                    <label class="checkbox flex-container">
                                        <input type="checkbox" name="addMemo">
                                        <span data-i18n="Add Memo">Add Memo</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div id="character_template" class="template_element">
            <div class="character_select entity_block flex-container wide100p alignitemsflexstart interactable" chid="" id="" tabindex="0">
                <div class="avatar" title="">
                    <img src="">
                </div>
                <div class="flex-container wide100pLess70px character_select_container">
                    <div class="wide100p character_name_block">
                        <span class="ch_name"></span>
                        <small class="ch_additional_info ch_add_placeholder">+++</small>
                        <small class="ch_additional_info character_version"></small>
                        <small class="ch_additional_info ch_avatar_url"></small>
                    </div>
                    <i class="ch_fav_icon fa-solid fa-star"></i>
                    <input class="ch_fav" value="" hidden="">
                    <div class="ch_description"></div>
                    <div class="tags tags_inline"></div>
                </div>
            </div>
        </div>
        <div id="tag_template" class="template_element">
            <span id="" class="tag">
                <span class="tag_name"></span>
                <i class="fa-solid fa-circle-xmark tag_remove interactable" tabindex="0"></i>
            </span>
        </div>
        <div id="openai_logit_bias_template" class="template_element">
            <div class="openai_logit_bias_form">
                <span class="drag-handle">☰</span>
                <input class="openai_logit_bias_text text_pole" data-i18n="[placeholder]Text or token ids" placeholder="Text or [token ids]">
                <input class="openai_logit_bias_value text_pole" type="number" min="-100" value="0" max="100">
                <i class="menu_button fa-solid fa-xmark openai_logit_bias_remove interactable" tabindex="0"></i>
            </div>
        </div>
        <div id="logit_bias_template" class="template_element">
            <div class="logit_bias_form">
                <span class="drag-handle">☰</span>
                <input class="logit_bias_text text_pole" data-i18n="[placeholder]Type here..." placeholder="type here...">
                <input class="logit_bias_value text_pole" type="number" min="-100" value="0" max="100" step="0.01">
                <i class="menu_button fa-solid fa-xmark logit_bias_remove interactable" tabindex="0"></i>
            </div>
        </div>
        <div id="completion_prompt_manager_popup" class="drawer-content" style="display:none;">
            <div id="completion_prompt_manager_popup_inspect">
                <h3>Inspect</h3>
                <div class="completion_prompt_manager_popup_entry">
                    <form class="completion_prompt_manager_popup_entry_form">
                        <div class="completion_prompt_manager_popup_entry_form_control">
                            <div class="completion_prompt_manager_popup_header">
                                <label for="completion_prompt_manager_popup_entry_form_prompt">
                                    <span>Prompt List</span>
                                </label>
                                <a id="completion_prompt_manager_popup_close_button" title="close" data-i18n="[title]close" class="fa-solid fa-close menu_button interactable" tabindex="0"></a>
                            </div>
                            <div class="text_muted">The list of prompts associated with this marker.</div>
                            <div id="completion_prompt_manager_popup_entry_form_inspect_list"></div>
                        </div>
                    </form>
                </div>
            </div>
            <div id="completion_prompt_manager_popup_edit">
                <h3 data-i18n="prompt_manager_edit">Edit</h3>
                <div class="completion_prompt_manager_popup_entry">
                    <form class="completion_prompt_manager_popup_entry_form">
                        <div class="flex-container gap10px">
                            <div class="completion_prompt_manager_popup_entry_form_control flex1">
                                <label for="completion_prompt_manager_popup_entry_form_name">
                                    <span data-i18n="prompt_manager_name">Name</span>
                                </label>
                                <div class="text_muted" data-i18n="A name for this prompt.">A name for this prompt.</div>
                                <input id="completion_prompt_manager_popup_entry_form_name" class="text_pole" type="text" name="name">
                            </div>
                            <div class="completion_prompt_manager_popup_entry_form_control flex1">
                                <label for="completion_prompt_manager_popup_entry_form_role">
                                    <span data-i18n="Role">Role</span>
                                </label>
                                <div class="text_muted" data-i18n="To whom this message will be attributed.">To whom this message will be attributed.</div>
                                <select id="completion_prompt_manager_popup_entry_form_role" class="text_pole" name="role">
                                    <option data-i18n="System" value="system">System</option>
                                    <option data-i18n="User" value="user">User</option>
                                    <option data-i18n="AI Assistant" value="assistant">AI Assistant</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex-container gap10px">
                            <div class="completion_prompt_manager_popup_entry_form_control flex1">
                                <label for="completion_prompt_manager_popup_entry_form_injection_position">
                                    <span data-i18n="prompt_manager_position">Position</span>
                                </label>
                                <div class="text_muted" data-i18n="Injection position. Relative (to other prompts in prompt manager) or In-chat @ Depth.">Injection position. Relative (to other prompts in prompt manager) or In-chat @ Depth.</div>
                                <select id="completion_prompt_manager_popup_entry_form_injection_position" class="text_pole" name="injection_position">
                                    <option data-i18n="prompt_manager_relative" value="0">Relative</option>
                                    <option data-i18n="prompt_manager_in_chat" value="1">In-chat</option>
                                </select>
                            </div>
                            <div id="completion_prompt_manager_depth_block" class="completion_prompt_manager_popup_entry_form_control flex1">
                                <label for="completion_prompt_manager_popup_entry_form_injection_depth">
                                    <span data-i18n="prompt_manager_depth">Depth</span>
                                </label>
                                <div class="text_muted" data-i18n="Injection depth. 0 = after the last message, 1 = before the last message, etc.">Injection depth. 0 = after the last message, 1 = before the last message, etc.</div>
                                <input id="completion_prompt_manager_popup_entry_form_injection_depth" class="text_pole" type="number" name="injection_depth" min="0" max="999" value="4">
                            </div>
                        </div>
                        <div class="completion_prompt_manager_popup_entry_form_control">
                            <div class="flex-container alignItemsCenter" data-i18n="[external_piece_text]The content of this prompt is pulled from elsewhere and cannot be edited here." external_piece_text="The content of this prompt is pulled from elsewhere and cannot be edited here.">
                                <div class="flex1">
                                    <label for="completion_prompt_manager_popup_entry_form_prompt">
                                        <span data-i18n="Prompt">Prompt</span>
                                    </label>
                                    <div class="text_muted" data-i18n="The prompt to be sent.">The prompt to be sent.</div>
                                </div>
                                <div id="completion_prompt_manager_forbid_overrides_block">
                                    <label class="checkbox_label" for="completion_prompt_manager_popup_entry_form_forbid_overrides" title="This prompt cannot be overridden by character cards, even if overrides are preferred." data-i18n="[title]This prompt cannot be overridden by character cards, even if overrides are preferred.">
                                        <input type="checkbox" id="completion_prompt_manager_popup_entry_form_forbid_overrides" name="forbid_overrides">
                                        <span data-i18n="prompt_manager_forbid_overrides">Forbid Overrides</span>
                                    </label>
                                </div>
                            </div>
                            <textarea id="completion_prompt_manager_popup_entry_form_prompt" class="text_pole" name="prompt">                        </textarea>
                        </div>
                        <div class="completion_prompt_manager_popup_entry_form_footer">
                            <a id="completion_prompt_manager_popup_entry_form_close" title="close" data-i18n="[title]close" class="fa-solid fa-close menu_button interactable" tabindex="0"></a>
                            <a id="completion_prompt_manager_popup_entry_form_reset" title="reset" data-i18n="[title]reset" class="fa-solid fa-undo menu_button interactable" tabindex="0"></a>
                            <a id="completion_prompt_manager_popup_entry_form_save" title="save" data-i18n="[title]save" class="fa-solid fa-save menu_button interactable" data-pm-prompt="" tabindex="0"></a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div id="message_template" class="template_element">
            <div class="mes" mesid="" ch_name="" is_user="" is_system="" bookmark_link="">
                <div class="for_checkbox"></div><input type="checkbox" class="del_checkbox">
                <div class="mesAvatarWrapper">
                    <div class="avatar">
                        <img src="">
                    </div>
                    <div class="mesIDDisplay"></div>
                    <div class="mes_timer"></div>
                    <div class="tokenCounterDisplay"></div>
                </div>
                <div class="swipe_left fa-solid fa-chevron-left interactable" style="display: none;" tabindex="0"></div>
                <div class="mes_block">
                    <div class="ch_name flex-container justifySpaceBetween">
                        <div class="flex-container flex1 alignitemscenter">
                            <div class="flex-container alignItemsBaseline">
                                <span class="name_text">${characterName}</span>
                                <i class="mes_ghost fa-solid fa-ghost" title="This message is invisible for the AI" data-i18n="[title]This message is invisible for the AI"></i>
                                <small class="timestamp"></small>
                            </div>
                        </div>
                        <div class="mes_buttons">
                            <div title="Message Actions" class="mes_button extraMesButtonsHint fa-solid fa-ellipsis interactable" data-i18n="[title]Message Actions" tabindex="0"></div>
                            <div class="extraMesButtons">
                                <div title="Translate message" class="mes_button mes_translate fa-solid fa-language interactable" data-i18n="[title]Translate message" tabindex="0"></div>
                                <div title="Generate Image" class="mes_button sd_message_gen fa-solid fa-paintbrush interactable" data-i18n="[title]Generate Image" tabindex="0"></div>
                                <div title="Narrate" class="mes_button mes_narrate fa-solid fa-bullhorn interactable" data-i18n="[title]Narrate" tabindex="0"></div>
                                <div title="Prompt" class="mes_button mes_prompt fa-solid fa-square-poll-horizontal interactable" data-i18n="[title]Prompt" style="display: none;" tabindex="0"></div>
                                <div title="Exclude message from prompts" class="mes_button mes_hide fa-solid fa-eye interactable" data-i18n="[title]Exclude message from prompts" tabindex="0"></div>
                                <div title="Include message in prompts" class="mes_button mes_unhide fa-solid fa-eye-slash interactable" data-i18n="[title]Include message in prompts" tabindex="0"></div>
                                <div title="Embed file or image" class="mes_button mes_embed fa-solid fa-paperclip interactable" data-i18n="[title]Embed file or image" tabindex="0"></div>
                                <div title="Create checkpoint" class="mes_button mes_create_bookmark fa-regular fa-solid fa-flag-checkered interactable" data-i18n="[title]Create checkpoint" tabindex="0"></div>
                                <div title="Create branch" class="mes_button mes_create_branch fa-regular fa-code-branch interactable" data-i18n="[title]Create Branch" tabindex="0"></div>
                                <div title="Copy" class="mes_button mes_copy fa-solid fa-copy interactable" data-i18n="[title]Copy" tabindex="0"></div>
                            </div>
                            <div data-tooltip="Click to open checkpoint chat
Shift+Click to replace the existing checkpoint with a new one" class="mes_button mes_bookmark fa-solid fa-flag interactable" data-i18n="[data-tooltip]Open checkpoint chat
Shift+Click to replace the existing checkpoint with a new one" tabindex="0"></div>
                            <div title="Edit" class="mes_button mes_edit fa-solid fa-pencil interactable" data-i18n="[title]Edit" tabindex="0"></div>
                        </div>
                        <div class="mes_edit_buttons">
                            <div class="mes_edit_done menu_button fa-solid fa-check interactable" title="Confirm" data-i18n="[title]Confirm" tabindex="0"></div>
                            <div class="mes_edit_copy menu_button fa-solid fa-copy interactable" title="Copy this message" data-i18n="[title]Copy this message" tabindex="0"></div>
                            <div class="mes_edit_delete menu_button fa-solid fa-trash-can interactable" title="Delete this message" data-i18n="[title]Delete this message" tabindex="0">
                            </div>
                            <div class="mes_edit_up menu_button fa-solid fa-chevron-up interactable" title="Move message up" data-i18n="[title]Move message up" tabindex="0"></div>
                            <div class="mes_edit_down menu_button fa-solid fa-chevron-down interactable" title="Move message down" data-i18n="[title]Move message down" tabindex="0">
                            </div>
                            <div class="mes_edit_cancel menu_button fa-solid fa-xmark interactable" title="Cancel" data-i18n="[title]Cancel" tabindex="0"></div>
                        </div>
                    </div>
                    <div class="mes_text"></div>
                    <div class="mes_img_container">
                        <div class="mes_img_controls">
                            <div title="Enlarge" class="right_menu_button fa-lg fa-solid fa-magnifying-glass mes_img_enlarge interactable" data-i18n="[title]Enlarge" tabindex="0"></div>
                            <div title="Caption" class="right_menu_button fa-lg fa-solid fa-envelope-open-text mes_img_caption interactable" data-i18n="[title]Caption" tabindex="0"></div>
                            <div title="Delete" class="right_menu_button fa-lg fa-solid fa-trash-can mes_img_delete interactable" data-i18n="[title]Delete" tabindex="0"></div>
                        </div>
                        <div class="mes_img_swipes">
                            <div title="Swipe left" class="right_menu_button fa-lg fa-solid fa-chevron-left mes_img_swipe_left interactable" data-i18n="[title]Swipe left" tabindex="0"></div>
                            <div class="mes_img_swipe_counter">1/1</div>
                            <div title="Swipe right" class="right_menu_button fa-lg fa-solid fa-chevron-right mes_img_swipe_right interactable" data-i18n="[title]Swipe right" tabindex="0"></div>
                        </div>
                        <img class="mes_img" src="">
                    </div>
                    <div class="mes_bias"></div>
                </div>
                <div class="flex-container swipeRightBlock flexFlowColumn flexNoGap">
                    <div class="swipe_right fa-solid fa-chevron-right interactable" style="display: none;" tabindex="0"></div>
                    <div class="swipes-counter"></div>
                </div>
            </div>
        </div>
        <div id="group_avatars_template" class="template_element">
            <div class="avatar avatar_collage collage_1">
                <img alt="img1" class="img_1" src="">
            </div>
            <div class="avatar avatar_collage collage_2">
                <img alt="img1" class="img_1" src="">
                <img alt="img2" class="img_2" src="">
            </div>
            <div class="avatar avatar_collage collage_3">
                <img alt="img1" class="img_1" src="">
                <img alt="img2" class="img_2" src="">
                <img alt="img3" class="img_3" src="">
            </div>
            <div class="avatar avatar_collage collage_4">
                <img alt="img1" class="img_1" src="">
                <img alt="img2" class="img_2" src="">
                <img alt="img3" class="img_3" src="">
                <img alt="img4" class="img_4" src="">
            </div>
        </div>

        <div id="onboarding_template" class="template_element">
            
        </div>
        <div id="group_member_template" class="template_element">
            <div class="group_member">
                <div class="avatar">
                    <img alt="Avatar" src="">
                </div>
                <div class="group_member_name">
                    <div class="ch_name"></div>
                    <div class="tags tags_inline"></div>
                </div>
                <input class="ch_fav" value="" hidden="">
                <div class="queue_position"></div>
                <div class="group_member_icon">
                    <div title="Temporarily disable automatic replies from this character" data-action="disable" class="right_menu_button fa-solid fa-lg fa-comment-slash interactable" data-i18n="[title]Temporarily disable automatic replies from this character" tabindex="0"></div>
                    <div title="Enable automatic replies from this character" data-action="enable" class="right_menu_button fa-solid fa-lg fa-comment-slash interactable" data-i18n="[title]Enable automatic replies from this character" tabindex="0"></div>
                    <div title="Trigger a message from this character" data-action="speak" class="right_menu_button fa-solid fa-lg fa-comment interactable" data-i18n="[title]Trigger a message from this character" tabindex="0"></div>
                    <div class="flexFlowColumn flex-container">
                        <div title="Move up" data-action="up" class="right_menu_button fa-solid fa-chevron-up interactable" data-i18n="[title]Move up" tabindex="0"></div>
                        <div title="Move down" data-action="down" class="right_menu_button fa-solid fa-chevron-down interactable" data-i18n="[title]Move down" tabindex="0"></div>
                    </div>
                    <div title="View character card" data-action="view" class="right_menu_button fa-solid fa-xl fa-image-portrait interactable" data-i18n="[title]View character card" tabindex="0"></div>
                    <div title="Remove from group" data-action="remove" class="right_menu_button fa-solid fa-2xl fa-xmark interactable" data-i18n="[title]Remove from group" tabindex="0">
                    </div>
                    <div title="Add to group" data-action="add" class="right_menu_button fa-solid fa-2xl fa-plus interactable" data-i18n="[title]Add to group" tabindex="0"></div>
                </div>
            </div>
        </div>
        <div id="group_list_template" class="template_element">
            <div class="group_select entity_block flex-container wide100p alignitemsflexstart interactable" tabindex="0">
                <div class="avatar">
                    <img src="">
                </div>
                <div class="flex-container wide100pLess70px gap5px group_select_container">
                    <div class="wide100p group_name_block character_name_block">
                        <div class="ch_name"></div>
                        <small class="ch_additional_info group_select_counter"></small>
                    </div>
                    <small class="character_name_block_sub_line">in this group</small>
                    <i class="group_fav_icon fa-solid fa-star"></i>
                    <input class="ch_fav" value="" hidden="">
                    <div class="group_select_block_list ch_description"></div>
                    <div class="tags tags_inline"></div>
                </div>
            </div>
        </div>
        <div id="bogus_folder_template" class="template_element">
            <div class="bogus_folder_select entity_block flex-container wide100p alignitemsflexstart interactable" tabindex="0">
                <div class="avatar flex alignitemscenter textAlignCenter">
                    <i class="bogus_folder_icon fa-solid fa-xl"></i>
                </div>
                <div class="flex-container wide100pLess70px character_select_container">
                    <div class="wide100p character_name_block">
                        <span class="ch_name"></span>
                        <small class="ch_additional_info bogus_folder_counter"></small>
                    </div>
                    <small class="character_name_block_sub_line bogus_folder_hidden_counter"></small>
                    <div class="bogus_folder_avatars_block avatars_inline avatars_inline_small tags tags_inline"></div>
                </div>
            </div>
        </div>
        <div id="bogus_folder_back_template" class="template_element">
            <div class="bogus_folder_select bogus_folder_select_back flex-container wide100p alignitemsflexstart interactable" id="BogusFolderBack" tagid="back" tabindex="0">
                <div class="avatar flex alignitemscenter textAlignCenter">
                    <i class="bogus_folder_icon fa-solid fa-xl fa-right-from-bracket fa-flip-horizontal"></i>
                </div>
                <div class="bogus_folder_back_placeholder flex alignitemscenter textAlignCenter">
                    <i class="bogus_folder_icon fa-solid fa-xl fa-right-from-bracket fa-flip-horizontal"></i>
                </div>
                <div class="flex-container wide100pLess70px character_select_container height100p alignitemscenter">
                    <div class="wide100p character_name_block">
                        <span class="ch_name">Go back</span>
                    </div>
                </div>
            </div>
        </div>
        <div id="inline_avatar_template" class="template_element">
            <div class="avatar inline_avatar flex alignitemscenter textAlignCenter">
                <img src="">
            </div>
        </div>
        <div id="alternate_greetings_template" class="template_element">
            <div class="alternate_grettings flexFlowColumn flex-container">
                <div class="title_restorable">
                    <h3><span data-i18n="Alternate Greetings" class="mdhotkey_location">Alternate Greetings</span></h3>
                    <div class="menu_button menu_button_icon add_alternate_greeting interactable" tabindex="0">
                        <i class="fa-solid fa-plus"></i>
                        <span data-i18n="Add">Add</span>
                    </div>
                </div>
                <small class="justifyLeft" data-i18n="Alternate_Greetings_desc">
                    These will be displayed as swipes on the first message when starting a new chat.
                    Group members can select one of them to initiate the conversation.
                </small>
                <hr>
                <div class="alternate_greetings_list flexFlowColumn flex-container wide100p">
                    <strong class="alternate_grettings_hint margin-bot-10px">
                        <span data-i18n="alternate_greetings_hint_1">Click the</span> <i class="fa-solid fa-plus"></i> <span data-i18n="alternate_greetings_hint_2">button to get started!</span>
                    </strong>
                </div>
            </div>
        </div>
        <div id="alternate_greeting_form_template" class="template_element">
            <div class="alternate_greeting">
                <details open="">
                    <summary>
                        <div class="title_restorable">
                            <strong><span data-i18n="Alternate Greeting #">Alternate Greeting #</span><span class="greeting_index"></span></strong>
                            <div class="menu_button menu_button_icon delete_alternate_greeting interactable" tabindex="0">
                                <i class="fa-solid fa-trash-alt"></i>
                                <span data-i18n="Delete">Delete</span>
                            </div>
                        </div>
                    </summary>
                    <textarea name="alternate_greetings" data-i18n="[placeholder](This will be the first message from the character that starts every chat)" placeholder="(This will be the first message from the character that starts every chat)" class="text_pole textarea_compact alternate_greeting_text mdHotkeys" value="" autocomplete="off" rows="12"></textarea>
                </details>
            </div>
        </div>

        <!-- chat and input bar -->
        <div id="typing_indicator_template" class="template_element">
            <div class="typing_indicator"><span class="typing_indicator_name">CHAR</span> is typing</div>
        </div>
        <div id="message_file_template" class="template_element">
            <div class="mes_file_container">
                <div class="fa-lg fa-solid fa-file-alt mes_file_icon"></div>
                <div class="mes_file_name"></div>
                <div class="mes_file_size"></div>
                <div class="right_menu_button mes_file_open fa-solid fa-magnifying-glass interactable" title="View contents" data-i18n="[title]View contents" tabindex="0"></div>
                <div class="right_menu_button mes_file_delete fa-solid fa-trash-can interactable" title="Remove the file" data-i18n="[title]Remove the file" tabindex="0"></div>
            </div>
        </div>
    </div>
    <div id="movingDivs">
        <div id="floatingPrompt" class="drawer-content flexGap5">
            <div class="panelControlBar flex-container alignItemsBaseline">
                <div id="floatingPromptheader" class="fa-fw fa-solid fa-grip drag-grabber"></div>
                <div id="floatingPromptMaximize" class="inline-drawer-maximize">
                    <i class="floating_panel_maximize fa-fw fa-solid fa-window-maximize"></i>
                </div>
                <div id="ANClose" class="fa-fw fa-solid fa-circle-xmark floating_panel_close"></div>
            </div>
            <div name="floatingPromptHolder" class="scrollY">
                <div class="inline-drawer">
                    <div id="ANBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                        <b data-i18n="Author's Note">Author's Note</b>
                        <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                    </div>
                    <div class="inline-drawer-content">
                        <small>
                            <b data-i18n="Unique to this chat">Unique to this chat</b>.<br>
                            <span data-i18n="Checkpoints inherit the Note from their parent, and can be changed individually after that.">Checkpoints inherit the Note from their parent, and can be changed individually after that.</span><br>
                        </small>
                        <textarea id="extension_floating_prompt" class="text_pole textarea_compact" rows="8"></textarea>
                        <div class="extension_token_counter">
                            <span data-i18n="extension_token_counter">Tokens:</span> <span id="extension_floating_prompt_token_counter">0</span>
                        </div>
                        <label class="checkbox_label" for="extension_floating_allow_wi_scan">
                            <input id="extension_floating_allow_wi_scan" type="checkbox">
                            <span data-i18n="Include in World Info Scanning">Include in World Info Scanning</span>
                        </label>
                        <div class="floating_prompt_radio_group">
                            <label class="checkbox_label" for="extension_floating_position_before">
                                <input type="radio" id="extension_floating_position_before" name="extension_floating_position" value="2">
                                <span data-i18n="Before Main Prompt / Story String">Before Main Prompt / Story String</span>
                            </label>
                            <label class="checkbox_label" for="extension_floating_position_after">
                                <input type="radio" id="extension_floating_position_after" name="extension_floating_position" value="0">
                                <span data-i18n="After Main Prompt / Story String">After Main Prompt / Story String</span>
                            </label>
                            <label class="checkbox_label alignItemsCenter" for="extension_floating_position_depth">
                                <input type="radio" id="extension_floating_position_depth" name="extension_floating_position" value="1">
                                <span data-i18n="In-chat @ Depth">In-chat @ Depth</span>
                                <input id="extension_floating_depth" class="text_pole textarea_compact widthNatural" type="number" min="0" max="999">
                                <span data-i18n="as">as</span>
                                <select id="extension_floating_role" class="text_pole widthNatural">
                                    <option data-i18n="System" value="0">System</option>
                                    <option data-i18n="User" value="1">User</option>
                                    <option data-i18n="Assistant" value="2">Assistant</option>
                                </select>
                            </label>
                        </div>
                        <!--<label for="extension_floating_interval">In-Chat Insertion Depth</label>-->
                        <div class="flex-container">
                            <label for="extension_floating_interval" class="flex-container flexNoGap flexFlowColumn">
                                <span data-i18n="Insertion Frequency">Insertion Frequency</span>
                                <small data-i18n="(0 = Disable, 1 = Always)">(0 = Disable, 1 = Always)</small>
                            </label>
                            <input id="extension_floating_interval" class="text_pole widthUnset" type="number" min="0" max="999">
                        </div>
                        <br>
                        <span><span data-i18n="User inputs until next insertion:">User inputs until next insertion:</span> <span id="extension_floating_counter">(disabled)</span></span>
                    </div>
                </div>
                <hr class="sysHR">
                <div class="inline-drawer">
                    <div id="charaANBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                        <div class="flex-container flexFlowColumn">
                            <b data-i18n="Character Author's Note (Private)">
                                Character Author's Note (Private)
                            </b>
                            <small data-i18n="Won't be shared with the character card on export.">
                                Won't be shared with the character card on export.
                            </small>
                        </div>
                        <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                    </div>
                    <div class="inline-drawer-content">
                        <small data-i18n="Will be automatically added as the author's note for this character. Will be used in groups, but can't be modified when a group chat is open.">Will be automatically added as the author's note for this character. Will be used in groups, but
                            can't be modified when a group chat is open.</small>
                        <textarea id="extension_floating_chara" class="text_pole textarea_compact" rows="8" placeholder="Example:
[Scenario: wacky adventures; Genre: romantic comedy; Style: verbose, creative]"></textarea>
                        <div class="extension_token_counter">
                            <span data-i18n="extension_token_counter">Tokens:</span> <span id="extension_floating_chara_token_counter">0</span>
                        </div>
                        <label class="checkbox_label" for="extension_use_floating_chara">
                            <input id="extension_use_floating_chara" type="checkbox">
                            <span data-i18n="Use character author's note">Use character author's note</span>
                        </label>
                        <div class="floating_prompt_radio_group">
                            <label>
                                <input type="radio" name="extension_floating_char_position" value="0">
                                <span data-i18n="Replace Author's Note">Replace Author's Note</span>
                            </label>
                            <label>
                                <input type="radio" name="extension_floating_char_position" value="1">
                                <span data-i18n="Top of Author's Note">Top of Author's Note</span>
                            </label>
                            <label>
                                <input type="radio" name="extension_floating_char_position" value="2">
                                <span data-i18n="Bottom of Author's Note">Bottom of Author's Note</span>
                            </label>
                        </div>
                    </div>
                </div>
                <hr class="sysHR">
                <div class="inline-drawer">
                    <div id="defaultANBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                        <b data-i18n="Default Author's Note">Default Author's Note</b>
                        <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                    </div>
                    <div class="inline-drawer-content">
                        <small data-i18n="Will be automatically added as the Author's Note for all new chats.">Will be automatically added as the Author's Note for all new chats.</small>
                        <textarea id="extension_floating_default" class="text_pole textarea_compact" rows="8" placeholder="Example:
[Scenario: wacky adventures; Genre: romantic comedy; Style: verbose, creative]"></textarea>
                        <div class="extension_token_counter">
                            <span data-i18n="extension_token_counter">Tokens:</span> <span id="extension_floating_default_token_counter">0</span>
                        </div>
                        <div class="floating_prompt_radio_group">
                            <label class="checkbox_label" for="extension_default_position_before">
                                <input type="radio" id="extension_default_position_before" name="extension_default_position" value="2">
                                <span data-i18n="Before Main Prompt / Story String">Before Main Prompt / Story String</span>
                            </label>
                            <label class="checkbox_label" for="extension_default_position_after">
                                <input type="radio" id="extension_default_position_after" name="extension_default_position" value="0">
                                <span data-i18n="After Main Prompt / Story String">After Main Prompt / Story String</span>
                            </label>
                            <label class="checkbox_label alignItemsCenter" for="extension_default_position_depth">
                                <input type="radio" id="extension_default_position_depth" name="extension_default_position" value="1">
                                <span data-i18n="In-chat @ Depth">In-chat @ Depth</span>
                                <input id="extension_default_depth" class="text_pole textarea_compact widthNatural" type="number" min="0" max="999">
                                <span data-i18n="as">as</span>
                                <select id="extension_default_role" class="text_pole widthNatural">
                                    <option data-i18n="System" value="0">System</option>
                                    <option data-i18n="User" value="1">User</option>
                                    <option data-i18n="Assistant" value="2">Assistant</option>
                                </select>
                            </label>
                        </div>
                        <div class="flex-container">
                            <label for="extension_default_interval" class="flex-container flexNoGap flexFlowColumn">
                                <span data-i18n="Insertion Frequency">Insertion Frequency</span>
                                <small data-i18n="(0 = Disable, 1 = Always)">(0 = Disable, 1 = Always)</small>
                            </label>
                            <input id="extension_default_interval" class="text_pole widthUnset" type="number" min="0" max="999">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="cfgConfig" class="drawer-content flexGap5">
            <div class="panelControlBar flex-container alignItemsBaseline">
                <div id="cfgConfigheader" class="fa-fw fa-solid fa-grip drag-grabber"></div>
                <div id="cfgConfigMaximize" class="inline-drawer-maximize">
                    <i class="floating_panel_maximize fa-fw fa-solid fa-window-maximize"></i>
                </div>
                <div id="CFGClose" class="fa-fw fa-solid fa-circle-xmark floating_panel_close"></div>
            </div>
            <div name="cfgConfigHolder" class="scrollY">
                <div id="chat_cfg_container">
                    <div class="inline-drawer">
                        <div id="CFGBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                            <b data-i18n="Chat CFG">Chat CFG</b>
                            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content">
                            <small>
                                <b data-i18n="Unique to this chat">Unique to this chat</b>.<br>
                            </small>
                            <label for="chat_cfg_guidance_scale">
                                <span data-i18n="Scale">Scale</span>
                                <small data-i18n="1 = disabled">1 = disabled</small>
                            </label>
                            <div class="range-block-range-and-counter">
                                <div class="range-block-range">
                                    <input type="range" id="chat_cfg_guidance_scale" name="volume" min="0.10" max="4.00" step="0.05">
                                </div>
                                <div class="range-block-counter">
                                    <input type="number" min="0.10" max="4.00" step="0.05" data-for="chat_cfg_guidance_scale" id="chat_cfg_guidance_scale_counter">
                                </div>
                            </div>
                            <div>
                                <label for="chat_cfg_negative_prompt">
                                    <span data-i18n="Negative Prompt">Negative Prompt</span>
                                </label>
                                <textarea id="chat_cfg_negative_prompt" rows="2" class="text_pole textarea_compact" data-i18n="[placeholder]write short replies, write replies using past tense" placeholder="write short replies, write replies using past tense"></textarea>
                                <label for="chat_cfg_positive_prompt">
                                    <span data-i18n="Positive Prompt">Positive Prompt</span>
                                </label>
                                <textarea id="chat_cfg_positive_prompt" rows="2" class="text_pole textarea_compact" data-i18n="[placeholder]write short replies, write replies using past tense" placeholder="write short replies, write replies using past tense"></textarea>
                            </div>
                            <div id="groupchat_cfg_use_chara_container">
                                <label class="checkbox_label" for="groupchat_cfg_use_chara">
                                    <input type="checkbox" id="groupchat_cfg_use_chara">
                                    <span data-i18n="Use character CFG scales">Use character CFG scales</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="chara_cfg_container" style="display: none;">
                    <hr class="sysHR">
                    <div class="inline-drawer">
                        <div id="charaANBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                            <b data-i18n="Character CFG">Character CFG</b>
                            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content">
                            <small><b data-i18n="Will be automatically added as the CFG for this character.">Will be automatically added as the CFG for this character.</b></small>
                            <br>
                            <label for="chara_cfg_guidance_scale">
                                <span data-i18n="Scale">Scale</span>
                                <small data-i18n="1 = disabled">1 = disabled</small>
                            </label>
                            <div class="range-block-range-and-counter">
                                <div class="range-block-range">
                                    <input type="range" id="chara_cfg_guidance_scale" name="volume" min="0.10" max="4.00" step="0.05">
                                </div>
                                <div class="range-block-counter">
                                    <input type="number" min="0.10" max="4.00" step="0.05" data-for="chara_cfg_guidance_scale" id="chara_cfg_guidance_scale_counter">
                                </div>
                            </div>
                            <div>
                                <label for="chara_cfg_negative_prompt">
                                    <span data-i18n="Negative Prompt">Negative Prompt</span>
                                </label>
                                <textarea id="chara_cfg_negative_prompt" rows="2" class="text_pole textarea_compact" data-i18n="[placeholder]write short replies, write replies using past tense" placeholder="write short replies, write replies using past tense"></textarea>
                                <label for="chara_cfg_positive_prompt">
                                    <span data-i18n="Positive Prompt">Positive Prompt</span>
                                </label>
                                <textarea id="chara_cfg_positive_prompt" rows="2" class="text_pole textarea_compact" data-i18n="[placeholder]write short replies, write replies using past tense" placeholder="write short replies, write replies using past tense"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="global_cfg_container">
                    <hr class="sysHR">
                    <div class="inline-drawer">
                        <div id="defaultANBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                            <b data-i18n="Global CFG">Global CFG</b>
                            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content">
                            <small><b data-i18n="Will be used as the default CFG options for every chat unless overridden.">Will be used as the default CFG options for every chat unless overridden.</b></small>
                            <br>
                            <label for="global_cfg_guidance_scale">
                                <span data-i18n="Scale">Scale</span>
                                <small data-i18n="1 = disabled">1 = disabled</small>
                            </label>
                            <div class="range-block-range-and-counter">
                                <div class="range-block-range">
                                    <input type="range" id="global_cfg_guidance_scale" name="volume" min="0.10" max="4.00" step="0.05">
                                </div>
                                <div class="range-block-counter">
                                    <input type="number" min="0.10" max="4.00" step="0.05" data-for="global_cfg_guidance_scale" id="global_cfg_guidance_scale_counter">
                                </div>
                            </div>
                            <div>
                                <label for="global_cfg_negative_prompt">
                                    <span data-i18n="Negative Prompt">Negative Prompt</span>
                                </label>
                                <textarea id="global_cfg_negative_prompt" rows="2" class="text_pole textarea_compact" data-i18n="[placeholder]write short replies, write replies using past tense" placeholder="write short replies, write replies using past tense"></textarea>
                                <label for="global_cfg_positive_prompt">
                                    <span data-i18n="Positive Prompt">Positive Prompt</span>
                                </label>
                                <textarea id="global_cfg_positive_prompt" rows="2" class="text_pole textarea_compact" data-i18n="[placeholder]write short replies, write replies using past tense" placeholder="write short replies, write replies using past tense"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="cfg_prompt_combine_container">
                    <hr class="sysHR">
                    <div class="inline-drawer">
                        <div id="defaultANBlockToggle" class="inline-drawer-toggle inline-drawer-header">
                            <b data-i18n="CFG Prompt Cascading">CFG Prompt Cascading</b>
                            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
                        </div>
                        <div class="inline-drawer-content">
                            <div class="flex-container flexFlowColumn">
                                <small>
                                    <b data-i18n="Combine positive/negative prompts from other boxes.">Combine positive/negative prompts from other boxes.</b>
                                    <br>
                                    <span data-i18n="For example, ticking the chat, global, and character boxes combine all negative prompts into a comma-separated string.">For example, ticking the chat, global, and character boxes combine all negative prompts into a comma-separated string.</span>
                                </small>
                            </div>
                            <br>
                            <div class="flex-container flexFlowColumn">
                                <label for="cfg_prompt_combine">
                                    <span data-i18n="Always Include">Always Include</span>
                                </label>
                                <label class="checkbox_label">
                                    <input type="checkbox" name="cfg_prompt_combine" value="0">
                                    <span data-i18n="Chat Negatives">Chat Negatives</span>
                                </label>
                                <label class="checkbox_label">
                                    <input type="checkbox" name="cfg_prompt_combine" value="1">
                                    <span data-i18n="Character Negatives">Character Negatives</span>
                                </label>
                                <label class="checkbox_label">
                                    <input type="checkbox" name="cfg_prompt_combine" value="2">
                                    <span data-i18n="Global Negatives">Global Negatives</span>
                                </label>
                            </div>
                            <div class="flex-container flexFlowColumn">
                                <label>
                                    <span data-i18n="Custom Separator:">Custom Separator:</span> <input id="cfg_prompt_separator" class="text_pole textarea_compact widthUnset" placeholder="&quot;\n&quot;" type="text">
                                </label>
                                <label>
                                    <span data-i18n="Insertion Depth:">Insertion Depth:</span> <input id="cfg_prompt_insertion_depth" class="text_pole widthUnset" type="number" min="0" max="99">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="logprobsViewer" class="drawer-content inline-drawer flexGap5">
            <div class="logprobs_panel_header">
                <div class="logprobs_panel_header">
                    <b data-i18n="Token Probabilities">Token Probabilities</b>
                </div>
                <div class="logprobs_panel_controls">
                    <div id="logprobsViewerheader" class="logprobs_panel_control_button drag-grabber">
                        <i class="custom-drawer-icon fa-solid fa-grip"></i>
                    </div>
                    <div id="logprobsMaximizeToggle" class="logprobs_panel_control_button inline-drawer-maximize fa-solid">
                        <i class="inline-drawer-icon fa-solid fa-window-maximize interactable" tabindex="0"></i>
                    </div>
                    <div id="logprovsViewerBlockToggle" class="logprobs_panel_control_button inline-drawer-toggle">
                        <i class="inline-drawer-icon fa-solid fa-circle-chevron-up up interactable" tabindex="0"></i>
                    </div>
                    <div id="logprobsViewerClose" class="logprobs_panel_control_button inline-drawer-icon fa-solid fa-circle-xmark interactable" tabindex="0"></div>
                </div>
            </div>
            <div class="logprobs_panel_content inline-drawer-content flex-container flexFlowColumn">
                <small class="flex-container alignItemsCenter justifySpaceBetween flexNoWrap">
                    <b data-i18n="Select a token to see alternatives considered by the AI.">Select a token to see alternatives considered by the AI.</b>
                    <button id="logprobsReroll" class="menu_button margin0 interactable" title="Reroll with the entire prefix" data-i18n="[title]Reroll with the entire prefix" tabindex="0" style="display: none;">
                        <span class="fa-solid fa-redo logprobs_reroll"></span>
                    </button>
                </small>
                <hr>
                <div id="logprobs_generation_output"></div>
                <div id="logprobs_selected_top_logprobs" class="logprobs_candidate_list"></div>
            </div>
        </div>

    </div>
    <div id="sheld">
        <div id="sheldheader" class="fa-solid fa-grip drag-grabber"></div>
        <div id="chat">
        <div class="mes" mesid="0" ch_name="SillyTavern System" is_user="false" is_system="true" bookmark_link="" swipeid="0" force_avatar="true" timestamp="December 28, 2024 3:04 AM">
                <div class="for_checkbox"></div><input type="checkbox" class="del_checkbox">
                <div class="mesAvatarWrapper">
                    <div class="avatar">
                        <img src="img/five.png">
                    </div>
                    <div class="mesIDDisplay">#0</div>
                    <div class="mes_timer"></div>
                    <div class="tokenCounterDisplay"></div>
                </div>
                <div class="swipe_left fa-solid fa-chevron-left interactable" style="display: none;" tabindex="0"></div>
                <div class="mes_block">
                    <div class="ch_name flex-container justifySpaceBetween">
                        <div class="flex-container flex1 alignitemscenter">
                            <div class="flex-container alignItemsBaseline">
                                <span class="name_text">SillyTavern System</span>
                                <i class="mes_ghost fa-solid fa-ghost" title="This message is invisible for the AI" data-i18n="[title]This message is invisible for the AI"></i>
                                <small class="timestamp" title="">December 28, 2024 3:04 AM</small>
                            </div>
                        </div>
                        <div class="mes_buttons">
                            <div title="Message Actions" class="mes_button extraMesButtonsHint fa-solid fa-ellipsis interactable" data-i18n="[title]Message Actions" tabindex="0"></div>
                            <div class="extraMesButtons">
                                <div title="Translate message" class="mes_button mes_translate fa-solid fa-language interactable" data-i18n="[title]Translate message" tabindex="0"></div>
                                <div title="Generate Image" class="mes_button sd_message_gen fa-solid fa-paintbrush interactable" data-i18n="[title]Generate Image" tabindex="0"></div>
                                <div title="Narrate" class="mes_button mes_narrate fa-solid fa-bullhorn interactable" data-i18n="[title]Narrate" tabindex="0"></div>
                                <div title="Prompt" class="mes_button mes_prompt fa-solid fa-square-poll-horizontal interactable" data-i18n="[title]Prompt" style="display: none;" tabindex="0"></div>
                                <div title="Exclude message from prompts" class="mes_button mes_hide fa-solid fa-eye interactable" data-i18n="[title]Exclude message from prompts" tabindex="0"></div>
                                <div title="Include message in prompts" class="mes_button mes_unhide fa-solid fa-eye-slash interactable" data-i18n="[title]Include message in prompts" tabindex="0"></div>
                                <div title="Embed file or image" class="mes_button mes_embed fa-solid fa-paperclip interactable" data-i18n="[title]Embed file or image" tabindex="0"></div>
                                <div title="Create checkpoint" class="mes_button mes_create_bookmark fa-regular fa-solid fa-flag-checkered interactable" data-i18n="[title]Create checkpoint" tabindex="0"></div>
                                <div title="Create branch" class="mes_button mes_create_branch fa-regular fa-code-branch interactable" data-i18n="[title]Create Branch" tabindex="0"></div>
                                <div title="Copy" class="mes_button mes_copy fa-solid fa-copy interactable" data-i18n="[title]Copy" tabindex="0"></div>
                            </div>
                            <div data-tooltip="Click to open checkpoint chat
Shift+Click to replace the existing checkpoint with a new one" class="mes_button mes_bookmark fa-solid fa-flag interactable" data-i18n="[data-tooltip]Open checkpoint chat
Shift+Click to replace the existing checkpoint with a new one" tabindex="0"></div>
                            <div title="Edit" class="mes_button mes_edit fa-solid fa-pencil interactable" data-i18n="[title]Edit" tabindex="0"></div>
                        </div>
                        <div class="mes_edit_buttons">
                            <div class="mes_edit_done menu_button fa-solid fa-check interactable" title="Confirm" data-i18n="[title]Confirm" tabindex="0"></div>
                            <div class="mes_edit_copy menu_button fa-solid fa-copy interactable" title="Copy this message" data-i18n="[title]Copy this message" tabindex="0"></div>
                            <div class="mes_edit_delete menu_button fa-solid fa-trash-can interactable" title="Delete this message" data-i18n="[title]Delete this message" tabindex="0">
                            </div>
                            <div class="mes_edit_up menu_button fa-solid fa-chevron-up interactable" title="Move message up" data-i18n="[title]Move message up" tabindex="0"></div>
                            <div class="mes_edit_down menu_button fa-solid fa-chevron-down interactable" title="Move message down" data-i18n="[title]Move message down" tabindex="0">
                            </div>
                            <div class="mes_edit_cancel menu_button fa-solid fa-xmark interactable" title="Cancel" data-i18n="[title]Cancel" tabindex="0"></div>
                        </div>
                    </div>
                    <div class="mes_text"><h3>
    <span id="version_display_welcome">SillyTavern 1.12.9 'staging' (57a7d549c)</span>
</h3>
<a rel="noopener" href="https://docs.sillytavern.app/usage/update/" data-i18n="Want to update?" target="_blank">
    Want to update?
</a>
<h3 data-i18n="How to start chatting?">How to start chatting?</h3>
<ol>
    <li>
        <span data-i18n="Click_space">Click </span>
        <button class="menu_button menu_button_icon drawer-opener inline-flex interactable" data-target="sys-settings-button" tabindex="0">
            <i class="fa-solid fa-plug"></i>
            <span data-i18n="API Connections">API Connections</span>
        </button>
        <span data-i18n="and connect to an">and connect to an</span>
        <a rel="noopener" href="https://docs.sillytavern.app/usage/api-connections/" target="_blank">
            <span class="fa-solid fa-circle-question"></span>
            <span data-i18n="API">API</span></a>.
    </li>
    <li>
        <span data-i18n="Click _space">Click </span>
        <button class="menu_button menu_button_icon drawer-opener inline-flex interactable" data-target="rightNavHolder" tabindex="0">
            <i class="fa-solid fa-address-card"></i>
            <span data-i18n="Character Management">Character Management</span>
        </button>
        <span data-i18n="and pick a character."> and pick a character.</span>
    </li>
</ol>

<div>
    <span data-i18n="You can add more">You can add more</span>
    <button class="open_characters_library menu_button menu_button_icon inline-flex interactable" tabindex="0">
        <i class="fa-solid fa-image-portrait"></i>
        <span data-i18n="Sample characters">Sample characters</span>
    </button>
    <span data-i18n="or;or_welcome">or</span>
    <button class="external_import_button menu_button menu_button_icon inline-flex interactable" tabindex="0">
        <i class="fa-solid fa-cloud-arrow-down"></i>
        <span data-i18n="Import Characters">Import characters</span>
    </button>
    <span data-i18n="from other websites">from other websites.</span>
</div>
<div>
    <span data-i18n="Go to the">Go to the</span>

    <i data-i18n="Download Extensions &amp; Assets">Download Extensions &amp; Assets</i>
    <span data-i18n="menu within">menu within</span>

    <button class="menu_button menu_button_icon drawer-opener inline-flex interactable" data-target="extensions-settings-button" tabindex="0">
        <i class="fa-solid fa-cubes"></i>
        <span data-i18n="Extensions">Extensions</span>
    </button>

    <span data-i18n="to install additional features.">to install additional features.</span>
</div>

<h3 data-i18n="Confused or lost?">Confused or lost?</h3>
<ul>
    <li>
        <span class="note-link-span"><a rel="noopener" class="fa-solid fa-circle-question" href="https://docs.sillytavern.app/" target="_blank"></a></span> - <span data-i18n="click these icons!">click these icons!</span>
    </li>
    <li>
        <span data-i18n="Enter">Enter </span><code>/?</code><span data-i18n="in the chat bar"> in the chat bar</span>
    </li>
    <li>
        <a rel="noopener" href="https://docs.sillytavern.app/" data-i18n="SillyTavern Documentation Site" target="_blank">
            SillyTavern Documentation Site
        </a>
    </li>
</ul>

<h3 data-i18n="Still have questions?">Still have questions?</h3>
<ul>
    <li>
        <a rel="noopener" href="https://discord.gg/sillytavern" data-i18n="Join the SillyTavern Discord" target="_blank">
            Join the SillyTavern Discord
        </a>
    </li>
    <li>
        <a rel="noopener" href="https://github.com/SillyTavern/SillyTavern/issues" data-i18n="Post a GitHub issue" target="_blank">
            Post a GitHub issue
        </a>
    </li>
    <li>
        <a rel="noopener" href="https://github.com/SillyTavern/SillyTavern#questions-or-suggestions" data-i18n="Contact the developers" target="_blank">
            Contact the developers
        </a>
    </li>
</ul>
</div>
                    <div class="mes_img_container">
                        <div class="mes_img_controls">
                            <div title="Enlarge" class="right_menu_button fa-lg fa-solid fa-magnifying-glass mes_img_enlarge interactable" data-i18n="[title]Enlarge" tabindex="0"></div>
                            <div title="Caption" class="right_menu_button fa-lg fa-solid fa-envelope-open-text mes_img_caption interactable" data-i18n="[title]Caption" tabindex="0"></div>
                            <div title="Delete" class="right_menu_button fa-lg fa-solid fa-trash-can mes_img_delete interactable" data-i18n="[title]Delete" tabindex="0"></div>
                        </div>
                        <div class="mes_img_swipes">
                            <div title="Swipe left" class="right_menu_button fa-lg fa-solid fa-chevron-left mes_img_swipe_left interactable" data-i18n="[title]Swipe left" tabindex="0"></div>
                            <div class="mes_img_swipe_counter">1/1</div>
                            <div title="Swipe right" class="right_menu_button fa-lg fa-solid fa-chevron-right mes_img_swipe_right interactable" data-i18n="[title]Swipe right" tabindex="0"></div>
                        </div>
                        <img class="mes_img" src="">
                    </div>
                    <div class="mes_bias"></div>
                </div>
                <div class="flex-container swipeRightBlock flexFlowColumn flexNoGap">
                    <div class="swipe_right fa-solid fa-chevron-right interactable" style="display: none;" tabindex="0"></div>
                    <div class="swipes-counter" style="display: none;"></div>
                </div>
            </div><div class="mes smallSysMes last_mes" mesid="1" ch_name="SillyTavern System" is_user="false" is_system="true" bookmark_link="" swipeid="0" force_avatar="true" timestamp="December 28, 2024 3:04 AM">
                <div class="for_checkbox"></div><input type="checkbox" class="del_checkbox">
                <div class="mesAvatarWrapper">
                    <div class="avatar">
                        <img src="img/five.png">
                    </div>
                    <div class="mesIDDisplay">#1</div>
                    <div class="mes_timer"></div>
                    <div class="tokenCounterDisplay"></div>
                </div>
                <div class="swipe_left fa-solid fa-chevron-left interactable" style="display: none;" tabindex="0"></div>
                <div class="mes_block">
                    <div class="ch_name flex-container justifySpaceBetween">
                        <div class="flex-container flex1 alignitemscenter">
                            <div class="flex-container alignItemsBaseline">
                                <span class="name_text">SillyTavern System</span>
                                <i class="mes_ghost fa-solid fa-ghost" title="This message is invisible for the AI" data-i18n="[title]This message is invisible for the AI"></i>
                                <small class="timestamp" title="">December 28, 2024 3:04 AM</small>
                            </div>
                        </div>
                        <div class="mes_buttons">
                            <div title="Message Actions" class="mes_button extraMesButtonsHint fa-solid fa-ellipsis interactable" data-i18n="[title]Message Actions" tabindex="0"></div>
                            <div class="extraMesButtons">
                                <div title="Translate message" class="mes_button mes_translate fa-solid fa-language interactable" data-i18n="[title]Translate message" tabindex="0"></div>
                                <div title="Generate Image" class="mes_button sd_message_gen fa-solid fa-paintbrush interactable" data-i18n="[title]Generate Image" tabindex="0"></div>
                                <div title="Narrate" class="mes_button mes_narrate fa-solid fa-bullhorn interactable" data-i18n="[title]Narrate" tabindex="0"></div>
                                <div title="Prompt" class="mes_button mes_prompt fa-solid fa-square-poll-horizontal interactable" data-i18n="[title]Prompt" style="display: none;" tabindex="0"></div>
                                <div title="Exclude message from prompts" class="mes_button mes_hide fa-solid fa-eye interactable" data-i18n="[title]Exclude message from prompts" tabindex="0"></div>
                                <div title="Include message in prompts" class="mes_button mes_unhide fa-solid fa-eye-slash interactable" data-i18n="[title]Include message in prompts" tabindex="0"></div>
                                <div title="Embed file or image" class="mes_button mes_embed fa-solid fa-paperclip interactable" data-i18n="[title]Embed file or image" tabindex="0"></div>
                                <div title="Create checkpoint" class="mes_button mes_create_bookmark fa-regular fa-solid fa-flag-checkered interactable" data-i18n="[title]Create checkpoint" tabindex="0"></div>
                                <div title="Create branch" class="mes_button mes_create_branch fa-regular fa-code-branch interactable" data-i18n="[title]Create Branch" tabindex="0"></div>
                                <div title="Copy" class="mes_button mes_copy fa-solid fa-copy interactable" data-i18n="[title]Copy" tabindex="0"></div>
                            </div>
                            <div data-tooltip="Click to open checkpoint chat
Shift+Click to replace the existing checkpoint with a new one" class="mes_button mes_bookmark fa-solid fa-flag interactable" data-i18n="[data-tooltip]Open checkpoint chat
Shift+Click to replace the existing checkpoint with a new one" tabindex="0"></div>
                            <div title="Edit" class="mes_button mes_edit fa-solid fa-pencil interactable" data-i18n="[title]Edit" tabindex="0"></div>
                        </div>
                        <div class="mes_edit_buttons">
                            <div class="mes_edit_done menu_button fa-solid fa-check interactable" title="Confirm" data-i18n="[title]Confirm" tabindex="0"></div>
                            <div class="mes_edit_copy menu_button fa-solid fa-copy interactable" title="Copy this message" data-i18n="[title]Copy this message" tabindex="0"></div>
                            <div class="mes_edit_delete menu_button fa-solid fa-trash-can interactable" title="Delete this message" data-i18n="[title]Delete this message" tabindex="0">
                            </div>
                            <div class="mes_edit_up menu_button fa-solid fa-chevron-up interactable" title="Move message up" data-i18n="[title]Move message up" tabindex="0"></div>
                            <div class="mes_edit_down menu_button fa-solid fa-chevron-down interactable" title="Move message down" data-i18n="[title]Move message down" tabindex="0">
                            </div>
                            <div class="mes_edit_cancel menu_button fa-solid fa-xmark interactable" title="Cancel" data-i18n="[title]Cancel" tabindex="0"></div>
                        </div>
                    </div>
                    <div class="mes_text"><strong data-i18n="If you're connected to an API, try asking me something!">
    If you're connected to an API, try asking me something!
</strong>
</div>
                    <div class="mes_img_container">
                        <div class="mes_img_controls">
                            <div title="Enlarge" class="right_menu_button fa-lg fa-solid fa-magnifying-glass mes_img_enlarge interactable" data-i18n="[title]Enlarge" tabindex="0"></div>
                            <div title="Caption" class="right_menu_button fa-lg fa-solid fa-envelope-open-text mes_img_caption interactable" data-i18n="[title]Caption" tabindex="0"></div>
                            <div title="Delete" class="right_menu_button fa-lg fa-solid fa-trash-can mes_img_delete interactable" data-i18n="[title]Delete" tabindex="0"></div>
                        </div>
                        <div class="mes_img_swipes">
                            <div title="Swipe left" class="right_menu_button fa-lg fa-solid fa-chevron-left mes_img_swipe_left interactable" data-i18n="[title]Swipe left" tabindex="0"></div>
                            <div class="mes_img_swipe_counter">1/1</div>
                            <div title="Swipe right" class="right_menu_button fa-lg fa-solid fa-chevron-right mes_img_swipe_right interactable" data-i18n="[title]Swipe right" tabindex="0"></div>
                        </div>
                        <img class="mes_img" src="">
                    </div>
                    <div class="mes_bias"></div>
                </div>
                <div class="flex-container swipeRightBlock flexFlowColumn flexNoGap">
                    <div class="swipe_right fa-solid fa-chevron-right interactable" style="display: none;" tabindex="0"></div>
                    <div class="swipes-counter" style="display: none;"></div>
                </div>
            </div></div>
        <div id="form_sheld">
            <div id="dialogue_del_mes">
                <div id="dialogue_del_mes_ok" class="menu_button interactable" tabindex="0">Delete</div>
                <div id="dialogue_del_mes_cancel" class="menu_button interactable" tabindex="0">Cancel</div>
            </div>
            <div id="send_form" class="compact no-connection">
                <form id="file_form" class="wide100p displayNone">
                    <div class="file_attached">
                        <input id="file_form_input" type="file" hidden="">
                        <input id="embed_file_input" type="file" hidden="">
                        <i class="fa-solid fa-file-alt"></i>
                        <span class="file_name">File Name</span>
                        <span class="file_size">File Size</span>
                        <button id="file_form_reset" type="reset" class="menu_button interactable" title="Remove the file" data-i18n="[title]Remove the file" tabindex="0">
                            <i class="fa fa-times"></i>
                        </button>
                    </div>
                </form>
                <div id="nonQRFormItems">
                    <div id="leftSendForm" class="alignContentCenter">
                        <div id="options_button" class="fa-solid fa-bars interactable" tabindex="0"></div>
                    <div title="Extensions" class="fa-solid fa-magic-wand-sparkles interactable" style="display: flex;" id="extensionsMenuButton" tabindex="0"></div>
</div>
                    <textarea id="send_textarea" name="text" class="mdHotkeys" data-i18n="[no_connection_text]Not connected to API!;[connected_text]Type a message, or /? for help" placeholder="Not connected to API!" no_connection_text="Not connected to API!" connected_text="Type a message, or /? for help"></textarea>
                    <div id="rightSendForm" class="alignContentCenter">
                        <div id="stscript_continue" title="Continue script execution" class="stscript_btn stscript_continue interactable" data-i18n="[title]Continue script execution" tabindex="0">
                            <i class="fa-solid fa-play"></i>
                        </div>
                        <div id="stscript_pause" title="Pause script execution" class="stscript_btn stscript_pause interactable" data-i18n="[title]Pause script execution" tabindex="0">
                            <i class="fa-solid fa-pause"></i>
                        </div>
                        <div id="stscript_stop" title="Abort script execution" class="stscript_btn stscript_stop interactable" data-i18n="[title]Abort script execution" tabindex="0">
                            <i class="fa-solid fa-stop"></i>
                        </div>
                        <div id="mes_stop" title="Abort request" class="mes_stop" data-i18n="[title]Abort request">
                            <i class="fa-solid fa-circle-stop"></i>
                        </div>
                        <div id="mes_impersonate" class="fa-solid fa-user-secret interactable displayNone" title="Ask AI to write your message for you" data-i18n="[title]Ask AI to write your message for you" tabindex="0" style="display: none;"></div>
                        <div id="mes_continue" class="fa-fw fa-solid fa-arrow-right interactable displayNone" title="Continue the last message" data-i18n="[title]Continue the last message" style="display: none;" tabindex="0"></div>
                        <div id="send_but" class="fa-solid fa-paper-plane interactable displayNone" title="Send a message" data-i18n="[title]Send a message" tabindex="0"></div>
                    </div>
                </div>
            </div>
        <form id="img_form" style="display: none;"><input id="img_file" type="file" hidden="" accept="image/*"></form></div>
    </div>
    <!-- popups live outside sheld to avoid blur conflicts -->
    <div id="options" class="font-family-reset" style="display: none; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate(643px, -37px);" data-popper-placement="top-start">
        <div class="options-content">
            <a id="option_close_chat" class="displayNone interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-times"></i>
                <span data-i18n="Close chat">Close chat</span>
            </a>
            <a id="option_settings" class="displayNone interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-cog"></i>
                <span data-i18n="Toggle Panels">Toggle Panels</span>
            </a>
            <a id="option_toggle_AN" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-note-sticky"></i>
                <span data-i18n="Author's Note">Author's Note</span>
            </a>
            <a id="option_toggle_CFG" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-scale-balanced"></i>
                <span data-i18n="CFG Scale">CFG Scale</span>
            </a>
            <a id="option_toggle_logprobs" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-pie-chart"></i>
                <span data-i18n="Token Probabilities">Token Probabilities</span>
            </a>
            <a id="option_back_to_main" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-left-long"></i>
                <span data-i18n="Back to parent chat">Back to parent chat</span>
            </a>
            <a id="option_new_bookmark" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-flag"></i>
                <span data-i18n="Save checkpoint">Save checkpoint</span>
            </a>
            <a id="option_convert_to_group" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-people-arrows"></i>
                <span data-i18n="Convert to group">Convert to group</span>
            </a>
            <hr>
            <a id="option_start_new_chat" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-comments"></i>
                <span data-i18n="Start new chat">Start new chat</span>
            </a>
            <a id="option_close_chat" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-times"></i>
                <span data-i18n="Close chat">Close chat</span>
            </a>
            <a id="option_select_chat" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-address-book"></i>
                <span data-i18n="Manage chat files">Manage chat files</span>
            </a>
            <hr>
            <a id="option_delete_mes" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-trash-can"></i>
                <span data-i18n="Delete messages">Delete messages</span>
            </a>
            <a id="option_regenerate" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-repeat"></i>
                <span data-i18n="Regenerate">Regenerate</span>
            </a>
            <a id="option_impersonate" title="Ask AI to write your message for you" data-i18n="[title]Ask AI to write your message for you" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-user-secret"></i>
                <span data-i18n="Impersonate">Impersonate</span>
            </a>
            <a id="option_continue" title="Continue the last message" data-i18n="[title]Continue the last message" class="interactable" tabindex="0">
                <i class="fa-lg fa-solid fa-arrow-right"></i>
                <span data-i18n="Continue">Continue</span>
            </a>
        </div>
    </div>

    <!-- Script includes -->
    <script src="lib/polyfill.js"></script>
    <script src="lib/jquery-3.5.1.min.js"></script>
    <script src="lib/jquery-ui.min.js"></script>
    <script src="lib/jquery.transit.min.js"></script>
    <script src="lib/jquery-cookie-1.4.1.min.js"></script>
    <script src="lib/jquery.ui.touch-punch.min.js"></script>
    <script src="lib/cropper.min.js"></script>
    <script src="lib/jquery-cropper.min.js"></script>
    <script src="lib/toastr.min.js"></script>
    <script src="lib/select2.min.js"></script>
    <script src="lib/select2-search-placeholder.js"></script>
    <script src="lib/pagination.js"></script>
    <script src="lib/toolcool-color-picker.js"></script>
    <script src="lib/jquery.izoomify.js"></script>
    <script type="module" src="lib/structured-clone/monkey-patch.js"></script>
    <script type="module" src="lib/swiped-events.js"></script>
    <script type="module" src="lib/eventemitter.js"></script>
    <script type="module" src="scripts/i18n.js"></script>
    <script type="module" src="script.js"></script>
    <script>
        window.addEventListener('load', (event) => {
            const documentHeight = () => {
                const doc = document.documentElement;
                doc.style.setProperty('--doc-height', `${window.innerHeight}px`);
            }
            window.addEventListener('resize', documentHeight);
            documentHeight();
        });
    </script>



<div style="display: none; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate(678px, -37px);" class="options-content" id="extensionsMenu" data-popper-placement="top-start">
    <div class="extension_container interactable" id="data_bank_wand_container" tabindex="0">

<div title="View global, character, or data files." class="list-group-item flex-container flexGap5 interactable" id="manageAttachments" tabindex="0">
    <div class="fa-fw fa-solid fa-book-open-reader extensionsMenuExtensionButton"></div>
    <span data-i18n="Open Data Bank">Open Data Bank</span>
</div>
</div>
    <div class="extension_container interactable" id="attach_file_wand_container" tabindex="0"><div title="Attach a file or image to a current chat." class="list-group-item flex-container flexGap5 interactable" id="attachFile" tabindex="0">
    <div class="fa-fw fa-solid fa-paperclip extensionsMenuExtensionButton"></div>
    <span data-i18n="Attach a File">Attach a File</span>
</div>
</div>
    <div class="extension_container interactable" id="sd_wand_container" tabindex="0"><div class="list-group-item flex-container flexGap5 interactable" id="sd_gen" tabindex="0">
    <div data-i18n="[title]Trigger Stable Diffusion" title="Trigger Stable Diffusion" class="fa-solid fa-paintbrush extensionsMenuExtensionButton"></div>
    <span data-i18n="Generate Image">Generate Image</span>
</div>
<div class="list-group-item flex-container flexGap5 interactable" id="sd_stop_gen" style="display: none;" tabindex="0">
    <div data-i18n="[title]Abort current image generation task" title="Abort current image generation task" class="fa-solid fa-circle-stop extensionsMenuExtensionButton"></div>
    <span data-i18n="Stop Image Generation">Stop Image Generation</span>
</div>
</div>
    <div class="extension_container interactable" id="caption_wand_container" tabindex="0"><div id="send_picture" class="list-group-item flex-container flexGap5 interactable" tabindex="0">
            <div class="fa-solid fa-image extensionsMenuExtensionButton"></div>
            <span data-i18n="Generate Caption">Generate Caption</span>
        </div></div>
    <div class="extension_container interactable" id="tts_wand_container" tabindex="0">
        <div id="ttsExtensionMenuItem" class="list-group-item flex-container flexGap5 interactable" title="TTS play/pause" style="display: none;" tabindex="0">
            <div id="tts_media_control" class="extensionsMenuExtensionButton "></div>
            TTS Playback
        </div>
        <div id="ttsExtensionNarrateAll" class="list-group-item flex-container flexGap5 interactable" title="Narrate all messages in the current chat. Includes user messages, excludes hidden comments." tabindex="0">
            <div class="extensionsMenuExtensionButton fa-solid fa-radio"></div>
            Narrate All Chat
        </div></div>
    <div class="extension_container" id="screen_share_wand_container"></div>
    <div class="extension_container" id="prompt_inspector_wand_container"></div>
    <div class="extension_container" id="emulatorjs_wand_container"></div>
    <div class="extension_container" id="notebook_wand_container"></div>
    <div class="extension_container" id="chess_wand_container"></div>
    <div class="extension_container interactable" id="token_counter_wand_container" tabindex="0">
        <div id="token_counter" class="list-group-item flex-container flexGap5 interactable" tabindex="0">
            <div class="fa-solid fa-1 extensionsMenuExtensionButton"></div>
            Token Counter
        </div></div>
    <div class="extension_container" id="dice_wand_container"></div>
    <div class="extension_container" id="objective_wand_container"></div>
    <div class="extension_container interactable" id="translate_wand_container" tabindex="0"><div class="list-group-item flex-container flexGap5 interactable" id="translate_chat" tabindex="0">
    <div class="fa-solid fa-language extensionsMenuExtensionButton"></div>
    <span data-i18n="ext_translate_btn_chat">Translate Chat</span>
</div>
<div class="list-group-item flex-container flexGap5 interactable" id="translate_input_message" tabindex="0">
    <div class="fa-solid fa-keyboard extensionsMenuExtensionButton"></div>
    <span data-i18n="ext_translate_btn_input">Translate Input</span>
</div>
</div>
</div>
<script id="translate" type="module" src="/scripts/extensions/translate/index.js" async=""></script><script id="connection-manager" type="module" src="/scripts/extensions/connection-manager/index.js" async=""></script><script id="regex" type="module" src="/scripts/extensions/regex/index.js" async=""></script><script id="attachments" type="module" src="/scripts/extensions/attachments/index.js" async=""></script><script id="caption" type="module" src="/scripts/extensions/caption/index.js" async=""></script><script id="expressions" type="module" src="/scripts/extensions/expressions/index.js" async=""></script>
        <div id="expression-wrapper">
            <div id="expression-holder" class="expression-holder" style="display:none;">
                <div id="expression-holderheader" class="fa-solid fa-grip drag-grabber"></div>
                <img id="expression-image" class="expression" src="">
            </div>
        </div><div id="visual-novel-wrapper" style="display: none;">
        </div><script id="gallery" type="module" src="/scripts/extensions/gallery/index.js" async=""></script><script id="memory" type="module" src="/scripts/extensions/memory/index.js" async=""></script><script id="stable-diffusion" type="module" src="/scripts/extensions/stable-diffusion/index.js" async=""></script><script id="tts" type="module" src="/scripts/extensions/tts/index.js" async=""></script><div id="sd_dropdown" style="display: none; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate(0px, -730px);" data-popper-reference-hidden="" data-popper-escaped="" data-popper-placement="top">
    <ul class="list-group">
    <span>Send me a picture of:</span>
        <li data-i18n="sd_Yourself" data-value="you" id="sd_you" class="list-group-item">Yourself</li>
        <li data-i18n="sd_Your_Face" data-value="face" id="sd_face" class="list-group-item">Your Face</li>
        <li data-i18n="sd_Me" data-value="me" id="sd_me" class="list-group-item">Me</li>
        <li data-i18n="sd_The_Whole_Story" data-value="world" id="sd_world" class="list-group-item">The Whole Story</li>
        <li data-i18n="sd_The_Last_Message" data-value="last" id="sd_last" class="list-group-item">The Last Message</li>
        <li data-i18n="sd_Raw_Last_Message" data-value="raw_last" id="sd_raw_last" class="list-group-item">Raw Last Message</li>
        <li data-i18n="sd_Background" data-value="background" id="sd_background" class="list-group-item">Background</li>
    </ul>
</div>
<script id="quick-reply" type="module" src="/scripts/extensions/quick-reply/index.js" async=""></script><audio preload="auto" id="tts_audio" autoplay=""></audio><script id="assets" type="module" src="/scripts/extensions/assets/index.js" async=""></script><script id="token-counter" type="module" src="/scripts/extensions/token-counter/index.js" async=""></script><script id="prompt-hierarchy" type="module" src="/scripts/extensions/prompt-hierarchy/index.js" async=""></script><script id="vectors" type="module" src="/scripts/extensions/vectors/index.js" async=""></script><ul id="ui-id-1" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-2" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-3" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-4" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-5" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-6" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-7" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-8" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-9" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-10" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-11" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><ul id="ui-id-12" tabindex="0" class="ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" style="display: none;" unselectable="on"></ul><div role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div></body></html>